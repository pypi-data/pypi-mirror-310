<!doctype html>
<html class="no-js" lang="en" data-content_root="../">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="../genindex.html" /><link rel="search" title="Search" href="../search.html" /><link rel="next" title="gingerdj-admin and manage.py" href="gingerdj-admin.html" /><link rel="prev" title="Cross Site Request Forgery protection" href="csrf.html" />
        <link rel="canonical" href="https://www.gingersociety.org/products/ginger-dj/docs/ref/databases.html" />

    <!-- Generated with Sphinx 8.1.3 and Furo 2024.08.06 -->
        <title>Databases - GingerDJ 6.1.1 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=d10597a4" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo.css?v=354aac6f" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo-extensions.css?v=302659d7" />
    
    


<style>
  body {
    --color-code-background: #ffffff;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../contents.html"><div class="brand">GingerDJ 6.1.1 documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../contents.html">
  
  
  <span class="sidebar-brand-text">GingerDJ 6.1.1 documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul>
<li class="toctree-l1"><a class="reference internal" href="../index.html">GingerDJ documentation</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 has-children"><a class="reference internal" href="../intro/index.html">Getting started</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle navigation of Getting started</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../intro/overview.html">GingerDJ at a glance</a></li>
<li class="toctree-l2"><a class="reference internal" href="../intro/install.html">Quick install guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../intro/tutorial01.html">Writing your first GingerDJ app, part 1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../intro/tutorial02.html">Writing your first GingerDJ app, part 2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../intro/tutorial03.html">Writing your first GingerDJ app, part 3</a></li>
<li class="toctree-l2"><a class="reference internal" href="../intro/tutorial04.html">Writing your first GingerDJ app, part 4</a></li>
<li class="toctree-l2"><a class="reference internal" href="../intro/tutorial05.html">Writing your first GingerDJ app, part 5</a></li>
<li class="toctree-l2"><a class="reference internal" href="../intro/tutorial06.html">Writing your first GingerDJ app, part 6</a></li>
<li class="toctree-l2"><a class="reference internal" href="../intro/tutorial07.html">Writing your first GingerDJ app, part 7</a></li>
<li class="toctree-l2"><a class="reference internal" href="../intro/tutorial08.html">Writing your first GingerDJ app, part 8</a></li>
<li class="toctree-l2"><a class="reference internal" href="../intro/reusable-apps.html">Advanced tutorial: How to write reusable apps</a></li>
<li class="toctree-l2"><a class="reference internal" href="../intro/whatsnext.html">What to read next</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../topics/index.html">Using GingerDJ</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle navigation of Using GingerDJ</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../topics/install.html">How to install GingerDJ</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../topics/db/index.html">Models and databases</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle navigation of Models and databases</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../topics/db/models.html">Models</a></li>
<li class="toctree-l3"><a class="reference internal" href="../topics/db/queries.html">Making queries</a></li>
<li class="toctree-l3"><a class="reference internal" href="../topics/db/aggregation.html">Aggregation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../topics/db/search.html">Search</a></li>
<li class="toctree-l3"><a class="reference internal" href="../topics/db/managers.html">Managers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../topics/db/sql.html">Performing raw SQL queries</a></li>
<li class="toctree-l3"><a class="reference internal" href="../topics/db/transactions.html">Database transactions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../topics/db/multi-db.html">Multiple databases</a></li>
<li class="toctree-l3"><a class="reference internal" href="../topics/db/tablespaces.html">Tablespaces</a></li>
<li class="toctree-l3"><a class="reference internal" href="../topics/db/optimization.html">Database access optimization</a></li>
<li class="toctree-l3"><a class="reference internal" href="../topics/db/instrumentation.html">Database instrumentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../topics/db/fixtures.html">Fixtures</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../topics/db/examples/index.html">Examples of model relationship API usage</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle navigation of Examples of model relationship API usage</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../topics/db/examples/many_to_many.html">Many-to-many relationships</a></li>
<li class="toctree-l4"><a class="reference internal" href="../topics/db/examples/many_to_one.html">Many-to-one relationships</a></li>
<li class="toctree-l4"><a class="reference internal" href="../topics/db/examples/one_to_one.html">One-to-one relationships</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../topics/http/index.html">Handling HTTP requests</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><div class="visually-hidden">Toggle navigation of Handling HTTP requests</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../topics/http/urls.html">URL dispatcher</a></li>
<li class="toctree-l3"><a class="reference internal" href="../topics/http/views.html">Writing views</a></li>
<li class="toctree-l3"><a class="reference internal" href="../topics/http/decorators.html">View decorators</a></li>
<li class="toctree-l3"><a class="reference internal" href="../topics/http/file-uploads.html">File Uploads</a></li>
<li class="toctree-l3"><a class="reference internal" href="../topics/http/shortcuts.html">GingerDJ shortcut functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../topics/http/generic-views.html">Generic views</a></li>
<li class="toctree-l3"><a class="reference internal" href="../topics/http/middleware.html">Middleware</a></li>
<li class="toctree-l3"><a class="reference internal" href="../topics/http/sessions.html">How to use sessions</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../topics/forms/index.html">Working with forms</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><div class="visually-hidden">Toggle navigation of Working with forms</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../topics/forms/formsets.html">Formsets</a></li>
<li class="toctree-l3"><a class="reference internal" href="../topics/forms/modelforms.html">Creating forms from models</a></li>
<li class="toctree-l3"><a class="reference internal" href="../topics/forms/media.html">Form Assets (the <code class="docutils literal notranslate"><span class="pre">Media</span></code> class)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../topics/templates.html">Templates</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../topics/class-based-views/index.html">Class-based views</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" role="switch" type="checkbox"/><label for="toctree-checkbox-7"><div class="visually-hidden">Toggle navigation of Class-based views</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../topics/class-based-views/intro.html">Introduction to class-based views</a></li>
<li class="toctree-l3"><a class="reference internal" href="../topics/class-based-views/generic-display.html">Built-in class-based generic views</a></li>
<li class="toctree-l3"><a class="reference internal" href="../topics/class-based-views/generic-editing.html">Form handling with class-based views</a></li>
<li class="toctree-l3"><a class="reference internal" href="../topics/class-based-views/mixins.html">Using mixins with class-based views</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../topics/migrations.html">Migrations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../topics/files.html">Managing files</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../topics/testing/index.html">Testing in GingerDJ</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" role="switch" type="checkbox"/><label for="toctree-checkbox-8"><div class="visually-hidden">Toggle navigation of Testing in GingerDJ</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../topics/testing/overview.html">Writing and running tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="../topics/testing/tools.html">Testing tools</a></li>
<li class="toctree-l3"><a class="reference internal" href="../topics/testing/advanced.html">Advanced testing topics</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../topics/cache.html">GingerDJ’s cache framework</a></li>
<li class="toctree-l2"><a class="reference internal" href="../topics/conditional-view-processing.html">Conditional View Processing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../topics/signing.html">Cryptographic signing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../topics/email.html">Sending email</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../topics/i18n/index.html">Internationalization and localization</a><input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" role="switch" type="checkbox"/><label for="toctree-checkbox-9"><div class="visually-hidden">Toggle navigation of Internationalization and localization</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../topics/i18n/translation.html">Translation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../topics/i18n/formatting.html">Format localization</a></li>
<li class="toctree-l3"><a class="reference internal" href="../topics/i18n/timezones.html">Time zones</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../topics/logging.html">Logging</a></li>
<li class="toctree-l2"><a class="reference internal" href="../topics/pagination.html">Pagination</a></li>
<li class="toctree-l2"><a class="reference internal" href="../topics/security.html">Security in GingerDJ</a></li>
<li class="toctree-l2"><a class="reference internal" href="../topics/performance.html">Performance and optimization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../topics/serialization.html">Serializing GingerDJ objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="../topics/settings.html">GingerDJ settings</a></li>
<li class="toctree-l2"><a class="reference internal" href="../topics/signals.html">Signals</a></li>
<li class="toctree-l2"><a class="reference internal" href="../topics/checks.html">System check framework</a></li>
<li class="toctree-l2"><a class="reference internal" href="../topics/external-packages.html">External packages</a></li>
<li class="toctree-l2"><a class="reference internal" href="../topics/async.html">Asynchronous support</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../howto/index.html">“How-to” guides</a><input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" role="switch" type="checkbox"/><label for="toctree-checkbox-10"><div class="visually-hidden">Toggle navigation of “How-to” guides</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../howto/csrf.html">How to use GingerDJ’s CSRF protection</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howto/custom-management-commands.html">How to create custom <code class="docutils literal notranslate"><span class="pre">gingerdj-admin</span></code> commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howto/custom-model-fields.html">How to create custom model fields</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howto/custom-lookups.html">How to write custom lookups</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howto/custom-template-backend.html">How to implement a custom template backend</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howto/custom-template-tags.html">How to create custom template tags and filters</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howto/custom-file-storage.html">How to write a custom storage class</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../howto/deployment/index.html">How to deploy GingerDJ</a><input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" role="switch" type="checkbox"/><label for="toctree-checkbox-11"><div class="visually-hidden">Toggle navigation of How to deploy GingerDJ</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3 has-children"><a class="reference internal" href="../howto/deployment/wsgi/index.html">How to deploy with WSGI</a><input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" role="switch" type="checkbox"/><label for="toctree-checkbox-12"><div class="visually-hidden">Toggle navigation of How to deploy with WSGI</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../howto/deployment/wsgi/gunicorn.html">How to use GingerDJ with Gunicorn</a></li>
<li class="toctree-l4"><a class="reference internal" href="../howto/deployment/wsgi/uwsgi.html">How to use GingerDJ with uWSGI</a></li>
<li class="toctree-l4"><a class="reference internal" href="../howto/deployment/wsgi/modwsgi.html">How to use GingerDJ with Apache and <code class="docutils literal notranslate"><span class="pre">mod_wsgi</span></code></a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../howto/deployment/asgi/index.html">How to deploy with ASGI</a><input class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" role="switch" type="checkbox"/><label for="toctree-checkbox-13"><div class="visually-hidden">Toggle navigation of How to deploy with ASGI</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../howto/deployment/asgi/daphne.html">How to use GingerDJ with Daphne</a></li>
<li class="toctree-l4"><a class="reference internal" href="../howto/deployment/asgi/hypercorn.html">How to use GingerDJ with Hypercorn</a></li>
<li class="toctree-l4"><a class="reference internal" href="../howto/deployment/asgi/uvicorn.html">How to use GingerDJ with Uvicorn</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../howto/deployment/checklist.html">Deployment checklist</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../howto/upgrade-version.html">How to upgrade GingerDJ to a newer version</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howto/error-reporting.html">How to manage error reporting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howto/initial-data.html">How to provide initial data for models</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howto/legacy-databases.html">How to integrate GingerDJ with a legacy database</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howto/logging.html">How to configure and use logging</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howto/outputting-csv.html">How to create CSV output</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howto/outputting-pdf.html">How to create PDF files</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howto/overriding-templates.html">How to override templates</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howto/static-files/index.html">How to manage static files (e.g. images, JavaScript, CSS)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howto/static-files/deployment.html">How to deploy static files</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howto/windows.html">How to install GingerDJ on Windows</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howto/writing-migrations.html">How to create database migrations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howto/delete-app.html">How to delete a GingerDJ application</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../faq/index.html">GingerDJ FAQ</a><input class="toctree-checkbox" id="toctree-checkbox-14" name="toctree-checkbox-14" role="switch" type="checkbox"/><label for="toctree-checkbox-14"><div class="visually-hidden">Toggle navigation of GingerDJ FAQ</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../faq/general.html">FAQ: General</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq/install.html">FAQ: Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq/usage.html">FAQ: Using GingerDJ</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq/models.html">FAQ: Databases and models</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq/admin.html">FAQ: The admin</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq/troubleshooting.html">Troubleshooting</a></li>
</ul>
</li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="index.html">API Reference</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-15" name="toctree-checkbox-15" role="switch" type="checkbox"/><label for="toctree-checkbox-15"><div class="visually-hidden">Toggle navigation of API Reference</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="applications.html">Applications</a></li>
<li class="toctree-l2"><a class="reference internal" href="checks.html">System check framework</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="class-based-views/index.html">Built-in class-based views API</a><input class="toctree-checkbox" id="toctree-checkbox-16" name="toctree-checkbox-16" role="switch" type="checkbox"/><label for="toctree-checkbox-16"><div class="visually-hidden">Toggle navigation of Built-in class-based views API</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="class-based-views/base.html">Base views</a></li>
<li class="toctree-l3"><a class="reference internal" href="class-based-views/generic-display.html">Generic display views</a></li>
<li class="toctree-l3"><a class="reference internal" href="class-based-views/generic-editing.html">Generic editing views</a></li>
<li class="toctree-l3"><a class="reference internal" href="class-based-views/generic-date-based.html">Generic date views</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="class-based-views/mixins.html">Class-based views mixins</a><input class="toctree-checkbox" id="toctree-checkbox-17" name="toctree-checkbox-17" role="switch" type="checkbox"/><label for="toctree-checkbox-17"><div class="visually-hidden">Toggle navigation of Class-based views mixins</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="class-based-views/mixins-simple.html">Simple mixins</a></li>
<li class="toctree-l4"><a class="reference internal" href="class-based-views/mixins-single-object.html">Single object mixins</a></li>
<li class="toctree-l4"><a class="reference internal" href="class-based-views/mixins-multiple-object.html">Multiple object mixins</a></li>
<li class="toctree-l4"><a class="reference internal" href="class-based-views/mixins-editing.html">Editing mixins</a></li>
<li class="toctree-l4"><a class="reference internal" href="class-based-views/mixins-date-based.html">Date-based mixins</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="class-based-views/flattened-index.html">Class-based generic views - flattened index</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="clickjacking.html">Clickjacking Protection</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="contrib/index.html"><code class="docutils literal notranslate"><span class="pre">contrib</span></code> packages</a><input class="toctree-checkbox" id="toctree-checkbox-18" name="toctree-checkbox-18" role="switch" type="checkbox"/><label for="toctree-checkbox-18"><div class="visually-hidden">Toggle navigation of contrib packages</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3 has-children"><a class="reference internal" href="contrib/admin/index.html">The GingerDJ admin site</a><input class="toctree-checkbox" id="toctree-checkbox-19" name="toctree-checkbox-19" role="switch" type="checkbox"/><label for="toctree-checkbox-19"><div class="visually-hidden">Toggle navigation of The GingerDJ admin site</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="contrib/admin/actions.html">Admin actions</a></li>
<li class="toctree-l4"><a class="reference internal" href="contrib/admin/filters.html"><code class="docutils literal notranslate"><span class="pre">ModelAdmin</span></code> List Filters</a></li>
<li class="toctree-l4"><a class="reference internal" href="contrib/admin/admindocs.html">The GingerDJ admin documentation generator</a></li>
<li class="toctree-l4"><a class="reference internal" href="contrib/admin/javascript.html">JavaScript customizations in the admin</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="contrib/flatpages.html">The flatpages app</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="contrib/gis/index.html">GeoGinger</a><input class="toctree-checkbox" id="toctree-checkbox-20" name="toctree-checkbox-20" role="switch" type="checkbox"/><label for="toctree-checkbox-20"><div class="visually-hidden">Toggle navigation of GeoGinger</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="contrib/gis/tutorial.html">GeoGinger Tutorial</a></li>
<li class="toctree-l4 has-children"><a class="reference internal" href="contrib/gis/install/index.html">GeoGinger Installation</a><input class="toctree-checkbox" id="toctree-checkbox-21" name="toctree-checkbox-21" role="switch" type="checkbox"/><label for="toctree-checkbox-21"><div class="visually-hidden">Toggle navigation of GeoGinger Installation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="contrib/gis/install/geolibs.html">Installing Geospatial libraries</a></li>
<li class="toctree-l5"><a class="reference internal" href="contrib/gis/install/postgis.html">Installing PostGIS</a></li>
<li class="toctree-l5"><a class="reference internal" href="contrib/gis/install/spatialite.html">Installing SpatiaLite</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="contrib/gis/model-api.html">GeoGinger Model API</a></li>
<li class="toctree-l4"><a class="reference internal" href="contrib/gis/db-api.html">GeoGinger Database API</a></li>
<li class="toctree-l4"><a class="reference internal" href="contrib/gis/forms-api.html">GeoGinger Forms API</a></li>
<li class="toctree-l4"><a class="reference internal" href="contrib/gis/geoquerysets.html">GIS QuerySet API Reference</a></li>
<li class="toctree-l4"><a class="reference internal" href="contrib/gis/functions.html">Geographic Database Functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="contrib/gis/measure.html">Measurement Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="contrib/gis/geos.html">GEOS API</a></li>
<li class="toctree-l4"><a class="reference internal" href="contrib/gis/gdal.html">GDAL API</a></li>
<li class="toctree-l4"><a class="reference internal" href="contrib/gis/geoip2.html">Geolocation with GeoIP2</a></li>
<li class="toctree-l4 has-children"><a class="reference internal" href="contrib/gis/utils.html">GeoGinger Utilities</a><input class="toctree-checkbox" id="toctree-checkbox-22" name="toctree-checkbox-22" role="switch" type="checkbox"/><label for="toctree-checkbox-22"><div class="visually-hidden">Toggle navigation of GeoGinger Utilities</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="contrib/gis/layermapping.html"><code class="docutils literal notranslate"><span class="pre">LayerMapping</span></code> data import utility</a></li>
<li class="toctree-l5"><a class="reference internal" href="contrib/gis/ogrinspect.html">OGR Inspection</a></li>
<li class="toctree-l5"><a class="reference internal" href="contrib/gis/serializers.html"><code class="docutils literal notranslate"><span class="pre">GeoJSON</span></code> Serializer</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="contrib/gis/commands.html">GeoGinger Management Commands</a></li>
<li class="toctree-l4"><a class="reference internal" href="contrib/gis/admin.html">GeoGinger’s admin site</a></li>
<li class="toctree-l4"><a class="reference internal" href="contrib/gis/feeds.html">Geographic Feeds</a></li>
<li class="toctree-l4"><a class="reference internal" href="contrib/gis/sitemaps.html">Geographic Sitemaps</a></li>
<li class="toctree-l4"><a class="reference internal" href="contrib/gis/testing.html">Testing GeoGinger apps</a></li>
<li class="toctree-l4"><a class="reference internal" href="contrib/gis/deployment.html">Deploying GeoGinger</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="contrib/humanize.html"><code class="docutils literal notranslate"><span class="pre">gingerdj.contrib.humanize</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="contrib/messages.html">The messages framework</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="contrib/postgres/index.html"><code class="docutils literal notranslate"><span class="pre">gingerdj.contrib.postgres</span></code></a><input class="toctree-checkbox" id="toctree-checkbox-23" name="toctree-checkbox-23" role="switch" type="checkbox"/><label for="toctree-checkbox-23"><div class="visually-hidden">Toggle navigation of gingerdj.contrib.postgres</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="contrib/postgres/aggregates.html">PostgreSQL specific aggregation functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="contrib/postgres/constraints.html">PostgreSQL specific database constraints</a></li>
<li class="toctree-l4"><a class="reference internal" href="contrib/postgres/expressions.html">PostgreSQL specific query expressions</a></li>
<li class="toctree-l4"><a class="reference internal" href="contrib/postgres/fields.html">PostgreSQL specific model fields</a></li>
<li class="toctree-l4"><a class="reference internal" href="contrib/postgres/forms.html">PostgreSQL specific form fields and widgets</a></li>
<li class="toctree-l4"><a class="reference internal" href="contrib/postgres/functions.html">PostgreSQL specific database functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="contrib/postgres/indexes.html">PostgreSQL specific model indexes</a></li>
<li class="toctree-l4"><a class="reference internal" href="contrib/postgres/lookups.html">PostgreSQL specific lookups</a></li>
<li class="toctree-l4"><a class="reference internal" href="contrib/postgres/operations.html">Database migration operations</a></li>
<li class="toctree-l4"><a class="reference internal" href="contrib/postgres/search.html">Full text search</a></li>
<li class="toctree-l4"><a class="reference internal" href="contrib/postgres/validators.html">Validators</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="contrib/redirects.html">The redirects app</a></li>
<li class="toctree-l3"><a class="reference internal" href="contrib/sitemaps.html">The sitemap framework</a></li>
<li class="toctree-l3"><a class="reference internal" href="contrib/sites.html">The “sites” framework</a></li>
<li class="toctree-l3"><a class="reference internal" href="contrib/staticfiles.html">The <code class="docutils literal notranslate"><span class="pre">staticfiles</span></code> app</a></li>
<li class="toctree-l3"><a class="reference internal" href="contrib/syndication.html">The syndication feed framework</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="csrf.html">Cross Site Request Forgery protection</a></li>
<li class="toctree-l2 current current-page"><a class="current reference internal" href="#">Databases</a></li>
<li class="toctree-l2"><a class="reference internal" href="gingerdj-admin.html"><code class="docutils literal notranslate"><span class="pre">gingerdj-admin</span></code> and <code class="docutils literal notranslate"><span class="pre">manage.py</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="gingerdj-admin.html#running-management-commands-from-your-code">Running management commands from your code</a></li>
<li class="toctree-l2"><a class="reference internal" href="exceptions.html">GingerDJ Exceptions</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="files/index.html">File handling</a><input class="toctree-checkbox" id="toctree-checkbox-24" name="toctree-checkbox-24" role="switch" type="checkbox"/><label for="toctree-checkbox-24"><div class="visually-hidden">Toggle navigation of File handling</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="files/file.html">The <code class="docutils literal notranslate"><span class="pre">File</span></code> object</a></li>
<li class="toctree-l3"><a class="reference internal" href="files/storage.html">File storage API</a></li>
<li class="toctree-l3"><a class="reference internal" href="files/uploads.html">Uploaded Files and Upload Handlers</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="forms/index.html">Forms</a><input class="toctree-checkbox" id="toctree-checkbox-25" name="toctree-checkbox-25" role="switch" type="checkbox"/><label for="toctree-checkbox-25"><div class="visually-hidden">Toggle navigation of Forms</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="forms/api.html">The Forms API</a></li>
<li class="toctree-l3"><a class="reference internal" href="forms/fields.html">Form fields</a></li>
<li class="toctree-l3"><a class="reference internal" href="forms/models.html">Model Form Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="forms/formsets.html">Formset Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="forms/renderers.html">The form rendering API</a></li>
<li class="toctree-l3"><a class="reference internal" href="forms/widgets.html">Widgets</a></li>
<li class="toctree-l3"><a class="reference internal" href="forms/validation.html">Form and field validation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="logging.html">Logging</a></li>
<li class="toctree-l2"><a class="reference internal" href="middleware.html">Middleware</a></li>
<li class="toctree-l2"><a class="reference internal" href="migration-operations.html">Migration Operations</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="models/index.html">Models</a><input class="toctree-checkbox" id="toctree-checkbox-26" name="toctree-checkbox-26" role="switch" type="checkbox"/><label for="toctree-checkbox-26"><div class="visually-hidden">Toggle navigation of Models</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="models/fields.html">Model field reference</a></li>
<li class="toctree-l3"><a class="reference internal" href="models/fields.html#field-attribute-reference">Field attribute reference</a></li>
<li class="toctree-l3"><a class="reference internal" href="models/indexes.html">Model index reference</a></li>
<li class="toctree-l3"><a class="reference internal" href="models/constraints.html">Constraints reference</a></li>
<li class="toctree-l3"><a class="reference internal" href="models/meta.html">Model <code class="docutils literal notranslate"><span class="pre">_meta</span></code> API</a></li>
<li class="toctree-l3"><a class="reference internal" href="models/relations.html">Related objects reference</a></li>
<li class="toctree-l3"><a class="reference internal" href="models/class.html">Model class reference</a></li>
<li class="toctree-l3"><a class="reference internal" href="models/options.html">Model <code class="docutils literal notranslate"><span class="pre">Meta</span></code> options</a></li>
<li class="toctree-l3"><a class="reference internal" href="models/instances.html">Model instance reference</a></li>
<li class="toctree-l3"><a class="reference internal" href="models/querysets.html"><code class="docutils literal notranslate"><span class="pre">QuerySet</span></code> API reference</a></li>
<li class="toctree-l3"><a class="reference internal" href="models/lookups.html">Lookup API reference</a></li>
<li class="toctree-l3"><a class="reference internal" href="models/expressions.html">Query Expressions</a></li>
<li class="toctree-l3"><a class="reference internal" href="models/conditional-expressions.html">Conditional Expressions</a></li>
<li class="toctree-l3"><a class="reference internal" href="models/database-functions.html">Database Functions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="paginator.html">Paginator</a></li>
<li class="toctree-l2"><a class="reference internal" href="request-response.html">Request and response objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="schema-editor.html"><code class="docutils literal notranslate"><span class="pre">SchemaEditor</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="settings.html">Settings</a></li>
<li class="toctree-l2"><a class="reference internal" href="signals.html">Signals</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="templates/index.html">Templates</a><input class="toctree-checkbox" id="toctree-checkbox-27" name="toctree-checkbox-27" role="switch" type="checkbox"/><label for="toctree-checkbox-27"><div class="visually-hidden">Toggle navigation of Templates</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="templates/language.html">The GingerDJ template language</a></li>
<li class="toctree-l3"><a class="reference internal" href="templates/builtins.html">Built-in template tags and filters</a></li>
<li class="toctree-l3"><a class="reference internal" href="templates/api.html">The GingerDJ template language: for Python programmers</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="template-response.html"><code class="docutils literal notranslate"><span class="pre">TemplateResponse</span></code> and <code class="docutils literal notranslate"><span class="pre">SimpleTemplateResponse</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="unicode.html">Unicode data</a></li>
<li class="toctree-l2"><a class="reference internal" href="urlresolvers.html"><code class="docutils literal notranslate"><span class="pre">gingerdj.urls</span></code> utility functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="urls.html"><code class="docutils literal notranslate"><span class="pre">gingerdj.urls</span></code> functions for use in URLconfs</a></li>
<li class="toctree-l2"><a class="reference internal" href="urls.html#module-gingerdj.conf.urls"><code class="docutils literal notranslate"><span class="pre">gingerdj.conf.urls</span></code> functions for use in URLconfs</a></li>
<li class="toctree-l2"><a class="reference internal" href="utils.html">GingerDJ Utils</a></li>
<li class="toctree-l2"><a class="reference internal" href="validators.html">Validators</a></li>
<li class="toctree-l2"><a class="reference internal" href="views.html">Built-in Views</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../misc/index.html">Meta-documentation and miscellany</a><input class="toctree-checkbox" id="toctree-checkbox-28" name="toctree-checkbox-28" role="switch" type="checkbox"/><label for="toctree-checkbox-28"><div class="visually-hidden">Toggle navigation of Meta-documentation and miscellany</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../misc/api-stability.html">API stability</a></li>
<li class="toctree-l2"><a class="reference internal" href="../misc/design-philosophies.html">Design philosophies</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">Glossary</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="view-this-page">
  <a class="muted-link" href="../_sources/ref/databases.txt" title="View this page">
    <svg><use href="#svg-eye"></use></svg>
    <span class="visually-hidden">View this page</span>
  </a>
</div>
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section id="s-databases">
<span id="databases"></span><h1>Databases<a class="headerlink" href="#databases" title="Link to this heading">¶</a></h1>
<p>GingerDJ officially supports the following databases:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#postgresql-notes"><span class="std std-ref">PostgreSQL</span></a></p></li>
<li><p><a class="reference internal" href="#mariadb-notes"><span class="std std-ref">MariaDB</span></a></p></li>
<li><p><a class="reference internal" href="#mysql-notes"><span class="std std-ref">MySQL</span></a></p></li>
<li><p><a class="reference internal" href="#oracle-notes"><span class="std std-ref">Oracle</span></a></p></li>
<li><p><a class="reference internal" href="#sqlite-notes"><span class="std std-ref">SQLite</span></a></p></li>
</ul>
<p>There are also a number of <a class="reference internal" href="#third-party-notes"><span class="std std-ref">database backends provided by third parties</span></a>.</p>
<p>GingerDJ attempts to support as many features as possible on all database
backends. However, not all database backends are alike, and we’ve had to make
design decisions on which features to support and which assumptions we can make
safely.</p>
<p>This file describes some of the features that might be relevant to GingerDJ
usage. It is not intended as a replacement for server-specific documentation or
reference manuals.</p>
<section id="s-general-notes">
<span id="general-notes"></span><h2>General notes<a class="headerlink" href="#general-notes" title="Link to this heading">¶</a></h2>
<section id="s-persistent-connections">
<span id="s-persistent-database-connections"></span><span id="persistent-connections"></span><span id="persistent-database-connections"></span><h3>Persistent connections<a class="headerlink" href="#persistent-connections" title="Link to this heading">¶</a></h3>
<p>Persistent connections avoid the overhead of reestablishing a connection to
the database in each HTTP request. They’re controlled by the
<a class="reference internal" href="settings.html#std-setting-CONN_MAX_AGE"><code class="xref std std-setting docutils literal notranslate"><span class="pre">CONN_MAX_AGE</span></code></a> parameter which defines the maximum lifetime of a
connection. It can be set independently for each database.</p>
<p>The default value is <code class="docutils literal notranslate"><span class="pre">0</span></code>, preserving the historical behavior of closing the
database connection at the end of each request. To enable persistent
connections, set <a class="reference internal" href="settings.html#std-setting-CONN_MAX_AGE"><code class="xref std std-setting docutils literal notranslate"><span class="pre">CONN_MAX_AGE</span></code></a> to a positive integer of seconds. For
unlimited persistent connections, set it to <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
<section id="s-connection-management">
<span id="connection-management"></span><h4>Connection management<a class="headerlink" href="#connection-management" title="Link to this heading">¶</a></h4>
<p>GingerDJ opens a connection to the database when it first makes a database
query. It keeps this connection open and reuses it in subsequent requests.
GingerDJ closes the connection once it exceeds the maximum age defined by
<a class="reference internal" href="settings.html#std-setting-CONN_MAX_AGE"><code class="xref std std-setting docutils literal notranslate"><span class="pre">CONN_MAX_AGE</span></code></a> or when it isn’t usable any longer.</p>
<p>In detail, GingerDJ automatically opens a connection to the database whenever it
needs one and doesn’t have one already — either because this is the first
connection, or because the previous connection was closed.</p>
<p>At the beginning of each request, GingerDJ closes the connection if it has
reached its maximum age. If your database terminates idle connections after
some time, you should set <a class="reference internal" href="settings.html#std-setting-CONN_MAX_AGE"><code class="xref std std-setting docutils literal notranslate"><span class="pre">CONN_MAX_AGE</span></code></a> to a lower value, so that
GingerDJ doesn’t attempt to use a connection that has been terminated by the
database server. (This problem may only affect very low traffic sites.)</p>
<p>At the end of each request, GingerDJ closes the connection if it has reached its
maximum age or if it is in an unrecoverable error state. If any database
errors have occurred while processing the requests, GingerDJ checks whether the
connection still works, and closes it if it doesn’t. Thus, database errors
affect at most one request per each application’s worker thread; if the
connection becomes unusable, the next request gets a fresh connection.</p>
<p>Setting <a class="reference internal" href="settings.html#std-setting-CONN_HEALTH_CHECKS"><code class="xref std std-setting docutils literal notranslate"><span class="pre">CONN_HEALTH_CHECKS</span></code></a> to <code class="docutils literal notranslate"><span class="pre">True</span></code> can be used to improve the
robustness of connection reuse and prevent errors when a connection has been
closed by the database server which is now ready to accept and serve new
connections, e.g. after database server restart. The health check is performed
only once per request and only if the database is being accessed during the
handling of the request.</p>
</section>
<section id="s-caveats">
<span id="caveats"></span><h4>Caveats<a class="headerlink" href="#caveats" title="Link to this heading">¶</a></h4>
<p>Since each thread maintains its own connection, your database must support at
least as many simultaneous connections as you have worker threads.</p>
<p>Sometimes a database won’t be accessed by the majority of your views, for
example because it’s the database of an external system, or thanks to caching.
In such cases, you should set <a class="reference internal" href="settings.html#std-setting-CONN_MAX_AGE"><code class="xref std std-setting docutils literal notranslate"><span class="pre">CONN_MAX_AGE</span></code></a> to a low value or even
<code class="docutils literal notranslate"><span class="pre">0</span></code>, because it doesn’t make sense to maintain a connection that’s unlikely
to be reused. This will help keep the number of simultaneous connections to
this database small.</p>
<p>The development server creates a new thread for each request it handles,
negating the effect of persistent connections. Don’t enable them during
development.</p>
<p>When GingerDJ establishes a connection to the database, it sets up appropriate
parameters, depending on the backend being used. If you enable persistent
connections, this setup is no longer repeated every request. If you modify
parameters such as the connection’s isolation level or time zone, you should
either restore GingerDJ’s defaults at the end of each request, force an
appropriate value at the beginning of each request, or disable persistent
connections.</p>
<p>If a connection is created in a long-running process, outside of GingerDJ’s
request-response cycle, the connection will remain open until explicitly
closed, or timeout occurs. You can use <code class="docutils literal notranslate"><span class="pre">gingerdj.db.close_old_connections()</span></code> to
close all old or unusable connections.</p>
</section>
</section>
<section id="s-encoding">
<span id="encoding"></span><h3>Encoding<a class="headerlink" href="#encoding" title="Link to this heading">¶</a></h3>
<p>GingerDJ assumes that all databases use UTF-8 encoding. Using other encodings may
result in unexpected behavior such as “value too long” errors from your
database for data that is valid in GingerDJ. See the database specific notes
below for information on how to set up your database correctly.</p>
</section>
</section>
<section id="s-postgresql-notes">
<span id="s-id1"></span><span id="postgresql-notes"></span><span id="id1"></span><h2>PostgreSQL notes<a class="headerlink" href="#postgresql-notes" title="Link to this heading">¶</a></h2>
<p>GingerDJ supports PostgreSQL 13 and higher. <a class="reference external" href="https://www.psycopg.org/psycopg3/">psycopg</a> 3.1.8+ or <a class="reference external" href="https://www.psycopg.org/">psycopg2</a>
2.8.4+ is required, though the latest <a class="reference external" href="https://www.psycopg.org/psycopg3/">psycopg</a> 3.1.8+ is recommended.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Support for <code class="docutils literal notranslate"><span class="pre">psycopg2</span></code> is likely to be deprecated and removed at some
point in the future.</p>
</div>
<section id="s-postgresql-connection-settings">
<span id="s-id2"></span><span id="postgresql-connection-settings"></span><span id="id2"></span><h3>PostgreSQL connection settings<a class="headerlink" href="#postgresql-connection-settings" title="Link to this heading">¶</a></h3>
<p>See <a class="reference internal" href="settings.html#std-setting-HOST"><code class="xref std std-setting docutils literal notranslate"><span class="pre">HOST</span></code></a> for details.</p>
<p>To connect using a service name from the <a class="reference external" href="https://www.postgresql.org/docs/current/libpq-pgservice.html">connection service file</a> and a
password from the <a class="reference external" href="https://www.postgresql.org/docs/current/libpq-pgpass.html">password file</a>, you must specify them in the
<a class="reference internal" href="settings.html#std-setting-OPTIONS"><code class="xref std std-setting docutils literal notranslate"><span class="pre">OPTIONS</span></code></a> part of your database configuration in <a class="reference internal" href="settings.html#std-setting-DATABASES"><code class="xref std std-setting docutils literal notranslate"><span class="pre">DATABASES</span></code></a>:</p>
<div class="literal-block-wrapper docutils container" id="id15">
<div class="code-block-caption"><span class="caption-text"><code class="docutils literal notranslate"><span class="pre">settings.py</span></code></span><a class="headerlink" href="#id15" title="Link to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">DATABASES</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;ENGINE&quot;</span><span class="p">:</span> <span class="s2">&quot;gingerdj.db.backends.postgresql&quot;</span><span class="p">,</span>
        <span class="s2">&quot;OPTIONS&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;service&quot;</span><span class="p">:</span> <span class="s2">&quot;my_service&quot;</span><span class="p">,</span>
            <span class="s2">&quot;passfile&quot;</span><span class="p">:</span> <span class="s2">&quot;.my_pgpass&quot;</span><span class="p">,</span>
        <span class="p">},</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id16">
<div class="code-block-caption"><span class="caption-text"><code class="docutils literal notranslate"><span class="pre">.pg_service.conf</span></code></span><a class="headerlink" href="#id16" title="Link to this code">¶</a></div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>[my_service]
host=localhost
user=USER
dbname=NAME
port=5432
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id17">
<div class="code-block-caption"><span class="caption-text"><code class="docutils literal notranslate"><span class="pre">.my_pgpass</span></code></span><a class="headerlink" href="#id17" title="Link to this code">¶</a></div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>localhost:5432:NAME:USER:PASSWORD
</pre></div>
</div>
</div>
<p>The PostgreSQL backend passes the content of <a class="reference internal" href="settings.html#std-setting-OPTIONS"><code class="xref std std-setting docutils literal notranslate"><span class="pre">OPTIONS</span></code></a> as keyword
arguments to the connection constructor, allowing for more advanced control
of driver behavior. All available <a class="reference external" href="https://www.postgresql.org/docs/current/libpq-connect.html#LIBPQ-PARAMKEYWORDS">parameters</a> are described in detail in the
PostgreSQL documentation.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Using a service name for testing purposes is not supported. This
<a class="extlink-ticket reference external" href="https://code.gingerdj.gloportal.dev/ticket/33685">may be implemented later</a>.</p>
</div>
</section>
<section id="s-optimizing-postgresql-s-configuration">
<span id="optimizing-postgresql-s-configuration"></span><h3>Optimizing PostgreSQL’s configuration<a class="headerlink" href="#optimizing-postgresql-s-configuration" title="Link to this heading">¶</a></h3>
<p>GingerDJ needs the following parameters for its database connections:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">client_encoding</span></code>: <code class="docutils literal notranslate"><span class="pre">'UTF8'</span></code>,</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">default_transaction_isolation</span></code>: <code class="docutils literal notranslate"><span class="pre">'read</span> <span class="pre">committed'</span></code> by default,
or the value set in the connection options (see below),</p></li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">timezone</span></code>:</dt><dd><ul>
<li><p>when <a class="reference internal" href="settings.html#std-setting-USE_TZ"><code class="xref std std-setting docutils literal notranslate"><span class="pre">USE_TZ</span></code></a> is <code class="docutils literal notranslate"><span class="pre">True</span></code>, <code class="docutils literal notranslate"><span class="pre">'UTC'</span></code> by default, or the
<a class="reference internal" href="settings.html#std-setting-DATABASE-TIME_ZONE"><code class="xref std std-setting docutils literal notranslate"><span class="pre">TIME_ZONE</span></code></a> value set for the connection,</p></li>
<li><p>when <a class="reference internal" href="settings.html#std-setting-USE_TZ"><code class="xref std std-setting docutils literal notranslate"><span class="pre">USE_TZ</span></code></a> is <code class="docutils literal notranslate"><span class="pre">False</span></code>, the value of the global
<a class="reference internal" href="settings.html#std-setting-TIME_ZONE"><code class="xref std std-setting docutils literal notranslate"><span class="pre">TIME_ZONE</span></code></a> setting.</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
<p>If these parameters already have the correct values, GingerDJ won’t set them for
every new connection, which improves performance slightly. You can configure
them directly in <code class="file docutils literal notranslate"><span class="pre">postgresql.conf</span></code> or more conveniently per database
user with <a class="reference external" href="https://www.postgresql.org/docs/current/sql-alterrole.html">ALTER ROLE</a>.</p>
<p>GingerDJ will work just fine without this optimization, but each new connection
will do some additional queries to set these parameters.</p>
</section>
<section id="s-isolation-level">
<span id="s-database-isolation-level"></span><span id="isolation-level"></span><span id="database-isolation-level"></span><h3>Isolation level<a class="headerlink" href="#isolation-level" title="Link to this heading">¶</a></h3>
<p>Like PostgreSQL itself, GingerDJ defaults to the <code class="docutils literal notranslate"><span class="pre">READ</span> <span class="pre">COMMITTED</span></code> <a class="reference external" href="https://www.postgresql.org/docs/current/transaction-iso.html">isolation
level</a>. If you need a higher isolation level such as <code class="docutils literal notranslate"><span class="pre">REPEATABLE</span> <span class="pre">READ</span></code> or
<code class="docutils literal notranslate"><span class="pre">SERIALIZABLE</span></code>, set it in the <a class="reference internal" href="settings.html#std-setting-OPTIONS"><code class="xref std std-setting docutils literal notranslate"><span class="pre">OPTIONS</span></code></a> part of your database
configuration in <a class="reference internal" href="settings.html#std-setting-DATABASES"><code class="xref std std-setting docutils literal notranslate"><span class="pre">DATABASES</span></code></a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">gingerdj.db.backends.postgresql.psycopg_any</span> <span class="kn">import</span> <span class="n">IsolationLevel</span>

<span class="n">DATABASES</span> <span class="o">=</span> <span class="p">{</span>
    <span class="c1"># ...</span>
    <span class="s2">&quot;OPTIONS&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;isolation_level&quot;</span><span class="p">:</span> <span class="n">IsolationLevel</span><span class="o">.</span><span class="n">SERIALIZABLE</span><span class="p">,</span>
    <span class="p">},</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Under higher isolation levels, your application should be prepared to
handle exceptions raised on serialization failures. This option is
designed for advanced uses.</p>
</div>
</section>
<section id="s-role">
<span id="s-database-role"></span><span id="role"></span><span id="database-role"></span><h3>Role<a class="headerlink" href="#role" title="Link to this heading">¶</a></h3>
<p>If you need to use a different role for database connections than the role use
to establish the connection, set it in the <a class="reference internal" href="settings.html#std-setting-OPTIONS"><code class="xref std std-setting docutils literal notranslate"><span class="pre">OPTIONS</span></code></a> part of your
database configuration in <a class="reference internal" href="settings.html#std-setting-DATABASES"><code class="xref std std-setting docutils literal notranslate"><span class="pre">DATABASES</span></code></a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">DATABASES</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;ENGINE&quot;</span><span class="p">:</span> <span class="s2">&quot;gingerdj.db.backends.postgresql&quot;</span><span class="p">,</span>
        <span class="c1"># ...</span>
        <span class="s2">&quot;OPTIONS&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;assume_role&quot;</span><span class="p">:</span> <span class="s2">&quot;my_application_role&quot;</span><span class="p">,</span>
        <span class="p">},</span>
    <span class="p">},</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="s-connection-pool">
<span id="s-postgresql-pool"></span><span id="connection-pool"></span><span id="postgresql-pool"></span><h3>Connection pool<a class="headerlink" href="#connection-pool" title="Link to this heading">¶</a></h3>
<div class="versionadded">
<span class="title">New in GingerDJ Development version.</span> </div>
<p>To use a connection pool with <a class="reference external" href="https://www.psycopg.org/psycopg3/">psycopg</a>, you can either set <code class="docutils literal notranslate"><span class="pre">&quot;pool&quot;</span></code> in the
<a class="reference internal" href="settings.html#std-setting-OPTIONS"><code class="xref std std-setting docutils literal notranslate"><span class="pre">OPTIONS</span></code></a> part of your database configuration in <a class="reference internal" href="settings.html#std-setting-DATABASES"><code class="xref std std-setting docutils literal notranslate"><span class="pre">DATABASES</span></code></a>
to be a dict to be passed to <a class="reference external" href="https://www.psycopg.org/psycopg3/docs/api/pool.html#psycopg_pool.ConnectionPool" title="(in psycopg)"><code class="xref py py-class docutils literal notranslate"><span class="pre">ConnectionPool</span></code></a>, or
to <code class="docutils literal notranslate"><span class="pre">True</span></code> to use the <code class="docutils literal notranslate"><span class="pre">ConnectionPool</span></code> defaults:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">DATABASES</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;ENGINE&quot;</span><span class="p">:</span> <span class="s2">&quot;gingerdj.db.backends.postgresql&quot;</span><span class="p">,</span>
        <span class="c1"># ...</span>
        <span class="s2">&quot;OPTIONS&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;pool&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
        <span class="p">},</span>
    <span class="p">},</span>
<span class="p">}</span>
</pre></div>
</div>
<p>This option requires <code class="docutils literal notranslate"><span class="pre">psycopg[pool]</span></code> or <a class="extlink-pypi reference external" href="https://pypi.org/project/psycopg-pool/">psycopg-pool</a> to be installed
and is ignored with <code class="docutils literal notranslate"><span class="pre">psycopg2</span></code>.</p>
</section>
<section id="s-server-side-parameters-binding">
<span id="s-database-server-side-parameters-binding"></span><span id="server-side-parameters-binding"></span><span id="database-server-side-parameters-binding"></span><h3>Server-side parameters binding<a class="headerlink" href="#server-side-parameters-binding" title="Link to this heading">¶</a></h3>
<p>With <a class="reference external" href="https://www.psycopg.org/psycopg3/">psycopg</a> 3.1.8+, GingerDJ defaults to the <a class="reference external" href="https://www.psycopg.org/psycopg3/docs/advanced/cursors.html#client-side-binding-cursors" title="(in psycopg)"><span class="xref std std-ref">client-side binding
cursors</span></a>. If you want to use the
<a class="reference external" href="https://www.psycopg.org/psycopg3/docs/basic/from_pg2.html#server-side-binding" title="(in psycopg)"><span class="xref std std-ref">server-side binding</span></a> set it in the
<a class="reference internal" href="settings.html#std-setting-OPTIONS"><code class="xref std std-setting docutils literal notranslate"><span class="pre">OPTIONS</span></code></a> part of your database configuration in
<a class="reference internal" href="settings.html#std-setting-DATABASES"><code class="xref std std-setting docutils literal notranslate"><span class="pre">DATABASES</span></code></a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">DATABASES</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;ENGINE&quot;</span><span class="p">:</span> <span class="s2">&quot;gingerdj.db.backends.postgresql&quot;</span><span class="p">,</span>
        <span class="c1"># ...</span>
        <span class="s2">&quot;OPTIONS&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;server_side_binding&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
        <span class="p">},</span>
    <span class="p">},</span>
<span class="p">}</span>
</pre></div>
</div>
<p>This option is ignored with <code class="docutils literal notranslate"><span class="pre">psycopg2</span></code>.</p>
</section>
<section id="s-indexes-for-varchar-and-text-columns">
<span id="indexes-for-varchar-and-text-columns"></span><h3>Indexes for <code class="docutils literal notranslate"><span class="pre">varchar</span></code> and <code class="docutils literal notranslate"><span class="pre">text</span></code> columns<a class="headerlink" href="#indexes-for-varchar-and-text-columns" title="Link to this heading">¶</a></h3>
<p>When specifying <code class="docutils literal notranslate"><span class="pre">db_index=True</span></code> on your model fields, GingerDJ typically
outputs a single <code class="docutils literal notranslate"><span class="pre">CREATE</span> <span class="pre">INDEX</span></code> statement.  However, if the database type
for the field is either <code class="docutils literal notranslate"><span class="pre">varchar</span></code> or <code class="docutils literal notranslate"><span class="pre">text</span></code> (e.g., used by <code class="docutils literal notranslate"><span class="pre">CharField</span></code>,
<code class="docutils literal notranslate"><span class="pre">FileField</span></code>, and <code class="docutils literal notranslate"><span class="pre">TextField</span></code>), then GingerDJ will create
an additional index that uses an appropriate <a class="reference external" href="https://www.postgresql.org/docs/current/indexes-opclass.html">PostgreSQL operator class</a>
for the column.  The extra index is necessary to correctly perform
lookups that use the <code class="docutils literal notranslate"><span class="pre">LIKE</span></code> operator in their SQL, as is done with the
<code class="docutils literal notranslate"><span class="pre">contains</span></code> and <code class="docutils literal notranslate"><span class="pre">startswith</span></code> lookup types.</p>
</section>
<section id="s-migration-operation-for-adding-extensions">
<span id="migration-operation-for-adding-extensions"></span><h3>Migration operation for adding extensions<a class="headerlink" href="#migration-operation-for-adding-extensions" title="Link to this heading">¶</a></h3>
<p>If you need to add a PostgreSQL extension (like <code class="docutils literal notranslate"><span class="pre">hstore</span></code>, <code class="docutils literal notranslate"><span class="pre">postgis</span></code>, etc.)
using a migration, use the
<a class="reference internal" href="contrib/postgres/operations.html#gingerdj.contrib.postgres.operations.CreateExtension" title="gingerdj.contrib.postgres.operations.CreateExtension"><code class="xref py py-class docutils literal notranslate"><span class="pre">CreateExtension</span></code></a> operation.</p>
</section>
<section id="s-server-side-cursors">
<span id="s-postgresql-server-side-cursors"></span><span id="server-side-cursors"></span><span id="postgresql-server-side-cursors"></span><h3>Server-side cursors<a class="headerlink" href="#server-side-cursors" title="Link to this heading">¶</a></h3>
<p>When using <a class="reference internal" href="models/querysets.html#gingerdj.db.models.query.QuerySet.iterator" title="gingerdj.db.models.query.QuerySet.iterator"><code class="xref py py-meth docutils literal notranslate"><span class="pre">QuerySet.iterator()</span></code></a>, GingerDJ opens a <a class="reference external" href="https://www.psycopg.org/psycopg3/docs/advanced/cursors.html#server-side-cursors" title="(in psycopg)"><span class="xref std std-ref">server-side
cursor</span></a>. By default, PostgreSQL assumes that
only the first 10% of the results of cursor queries will be fetched. The query
planner spends less time planning the query and starts returning results
faster, but this could diminish performance if more than 10% of the results are
retrieved. PostgreSQL’s assumptions on the number of rows retrieved for a
cursor query is controlled with the <a class="reference external" href="https://www.postgresql.org/docs/current/runtime-config-query.html#GUC-CURSOR-TUPLE-FRACTION">cursor_tuple_fraction</a> option.</p>
<section id="s-transaction-pooling-and-server-side-cursors">
<span id="s-transaction-pooling-server-side-cursors"></span><span id="transaction-pooling-and-server-side-cursors"></span><span id="transaction-pooling-server-side-cursors"></span><h4>Transaction pooling and server-side cursors<a class="headerlink" href="#transaction-pooling-and-server-side-cursors" title="Link to this heading">¶</a></h4>
<p>Using a connection pooler in transaction pooling mode (e.g. <a class="reference external" href="https://www.pgbouncer.org/">PgBouncer</a>)
requires disabling server-side cursors for that connection.</p>
<p>Server-side cursors are local to a connection and remain open at the end of a
transaction when <a class="reference internal" href="settings.html#std-setting-DATABASE-AUTOCOMMIT"><code class="xref std std-setting docutils literal notranslate"><span class="pre">AUTOCOMMIT</span></code></a> is <code class="docutils literal notranslate"><span class="pre">True</span></code>. A
subsequent transaction may attempt to fetch more results from a server-side
cursor. In transaction pooling mode, there’s no guarantee that subsequent
transactions will use the same connection. If a different connection is used,
an error is raised when the transaction references the server-side cursor,
because server-side cursors are only accessible in the connection in which they
were created.</p>
<p>One solution is to disable server-side cursors for a connection in
<a class="reference internal" href="settings.html#std-setting-DATABASES"><code class="xref std std-setting docutils literal notranslate"><span class="pre">DATABASES</span></code></a> by setting <a class="reference internal" href="settings.html#std-setting-DATABASE-DISABLE_SERVER_SIDE_CURSORS"><code class="xref std std-setting docutils literal notranslate"><span class="pre">DISABLE_SERVER_SIDE_CURSORS</span></code></a> to <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p>
<p>To benefit from server-side cursors in transaction pooling mode, you could set
up <a class="reference internal" href="../topics/db/multi-db.html"><span class="doc">another connection to the database</span></a> in order to
perform queries that use server-side cursors. This connection needs to either
be directly to the database or to a connection pooler in session pooling mode.</p>
<p>Another option is to wrap each <code class="docutils literal notranslate"><span class="pre">QuerySet</span></code> using server-side cursors in an
<a class="reference internal" href="../topics/db/transactions.html#gingerdj.db.transaction.atomic" title="gingerdj.db.transaction.atomic"><code class="xref py py-func docutils literal notranslate"><span class="pre">atomic()</span></code></a> block, because it disables <code class="docutils literal notranslate"><span class="pre">autocommit</span></code>
for the duration of the transaction. This way, the server-side cursor will only
live for the duration of the transaction.</p>
</section>
</section>
<section id="s-manually-specifying-values-of-auto-incrementing-primary-keys">
<span id="s-manually-specified-autoincrement-pk"></span><span id="manually-specifying-values-of-auto-incrementing-primary-keys"></span><span id="manually-specified-autoincrement-pk"></span><h3>Manually-specifying values of auto-incrementing primary keys<a class="headerlink" href="#manually-specifying-values-of-auto-incrementing-primary-keys" title="Link to this heading">¶</a></h3>
<p>GingerDJ uses PostgreSQL’s identity columns to store auto-incrementing primary
keys. An identity column is populated with values from a <a class="reference external" href="https://www.postgresql.org/docs/current/sql-createsequence.html">sequence</a> that keeps
track of the next available value. Manually assigning a value to an
auto-incrementing field doesn’t update the field’s sequence, which might later
cause a conflict. For example:</p>
<p>If you need to specify such values, reset the sequence afterward to avoid
reusing a value that’s already in the table. The <a class="reference internal" href="gingerdj-admin.html#gingerdj-admin-sqlsequencereset"><code class="xref std std-djadmin docutils literal notranslate"><span class="pre">sqlsequencereset</span></code></a>
management command generates the SQL statements to do that.</p>
</section>
<section id="s-test-database-templates">
<span id="test-database-templates"></span><h3>Test database templates<a class="headerlink" href="#test-database-templates" title="Link to this heading">¶</a></h3>
<p>You can use the <a class="reference internal" href="settings.html#std-setting-TEST_TEMPLATE"><code class="xref std std-setting docutils literal notranslate"><span class="pre">TEST['TEMPLATE']</span></code></a> setting to specify
a <a class="reference external" href="https://www.postgresql.org/docs/current/sql-createdatabase.html">template</a> (e.g. <code class="docutils literal notranslate"><span class="pre">'template0'</span></code>) from which to create a test database.</p>
</section>
<section id="s-speeding-up-test-execution-with-non-durable-settings">
<span id="speeding-up-test-execution-with-non-durable-settings"></span><h3>Speeding up test execution with non-durable settings<a class="headerlink" href="#speeding-up-test-execution-with-non-durable-settings" title="Link to this heading">¶</a></h3>
<p>You can speed up test execution times by <a class="reference external" href="https://www.postgresql.org/docs/current/non-durability.html">configuring PostgreSQL to be
non-durable</a>.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This is dangerous: it will make your database more susceptible to data loss
or corruption in the case of a server crash or power loss. Only use this on
a development machine where you can easily restore the entire contents of
all databases in the cluster.</p>
</div>
</section>
</section>
<section id="s-mariadb-notes">
<span id="s-id4"></span><span id="mariadb-notes"></span><span id="id4"></span><h2>MariaDB notes<a class="headerlink" href="#mariadb-notes" title="Link to this heading">¶</a></h2>
<p>GingerDJ supports MariaDB 10.5 and higher.</p>
<p>To use MariaDB, use the MySQL backend, which is shared between the two. See the
<a class="reference internal" href="#mysql-notes"><span class="std std-ref">MySQL notes</span></a> for more details.</p>
</section>
<section id="s-mysql-notes">
<span id="s-id5"></span><span id="mysql-notes"></span><span id="id5"></span><h2>MySQL notes<a class="headerlink" href="#mysql-notes" title="Link to this heading">¶</a></h2>
<section id="s-version-support">
<span id="version-support"></span><h3>Version support<a class="headerlink" href="#version-support" title="Link to this heading">¶</a></h3>
<p>GingerDJ supports MySQL 8.0.11 and higher.</p>
<p>GingerDJ’s <code class="docutils literal notranslate"><span class="pre">inspectdb</span></code> feature uses the <code class="docutils literal notranslate"><span class="pre">information_schema</span></code> database, which
contains detailed data on all database schemas.</p>
<p>GingerDJ expects the database to support Unicode (UTF-8 encoding) and delegates to
it the task of enforcing transactions and referential integrity. It is important
to be aware of the fact that the two latter ones aren’t actually enforced by
MySQL when using the MyISAM storage engine, see the next section.</p>
</section>
<section id="s-storage-engines">
<span id="s-mysql-storage-engines"></span><span id="storage-engines"></span><span id="mysql-storage-engines"></span><h3>Storage engines<a class="headerlink" href="#storage-engines" title="Link to this heading">¶</a></h3>
<p>MySQL has several <a class="reference external" href="https://dev.mysql.com/doc/refman/en/storage-engines.html">storage engines</a>. You can change the default storage engine
in the server configuration.</p>
<p>MySQL’s default storage engine is <a class="reference external" href="https://dev.mysql.com/doc/refman/en/innodb-storage-engine.html">InnoDB</a>. This engine is fully transactional
and supports foreign key references. It’s the recommended choice. However, the
InnoDB autoincrement counter is lost on a MySQL restart because it does not
remember the <code class="docutils literal notranslate"><span class="pre">AUTO_INCREMENT</span></code> value, instead recreating it as “max(id)+1”.
This may result in an inadvertent reuse of <a class="reference internal" href="models/fields.html#gingerdj.db.models.AutoField" title="gingerdj.db.models.AutoField"><code class="xref py py-class docutils literal notranslate"><span class="pre">AutoField</span></code></a>
values.</p>
<p>The main drawbacks of <a class="reference external" href="https://dev.mysql.com/doc/refman/en/myisam-storage-engine.html">MyISAM</a> are that it doesn’t support transactions or
enforce foreign-key constraints.</p>
</section>
<section id="s-mysql-db-api-drivers">
<span id="s-id7"></span><span id="mysql-db-api-drivers"></span><span id="id7"></span><h3>MySQL DB API Drivers<a class="headerlink" href="#mysql-db-api-drivers" title="Link to this heading">¶</a></h3>
<p>MySQL has a couple drivers that implement the Python Database API described in
<span class="target" id="index-0"></span><a class="pep reference external" href="https://peps.python.org/pep-0249/"><strong>PEP 249</strong></a>:</p>
<ul class="simple">
<li><p><a class="extlink-pypi reference external" href="https://pypi.org/project/mysqlclient/">mysqlclient</a> is a native driver. It’s <strong>the recommended choice</strong>.</p></li>
<li><p><a class="reference external" href="https://dev.mysql.com/downloads/connector/python/">MySQL Connector/Python</a> is a pure Python driver from Oracle that does not
require the MySQL client library or any Python modules outside the standard
library.</p></li>
</ul>
<p>These drivers are thread-safe and provide connection pooling.</p>
<p>In addition to a DB API driver, GingerDJ needs an adapter to access the database
drivers from its ORM. GingerDJ provides an adapter for mysqlclient while MySQL
Connector/Python includes <a class="reference external" href="https://dev.mysql.com/doc/connector-python/en/connector-python-gingerdj-backend.html">its own</a>.</p>
<section id="s-mysqlclient">
<span id="mysqlclient"></span><h4>mysqlclient<a class="headerlink" href="#mysqlclient" title="Link to this heading">¶</a></h4>
<p>GingerDJ requires <a class="reference internal" href="#mysqlclient">mysqlclient</a> 1.4.3 or later.</p>
</section>
<section id="s-id8">
<span id="id8"></span><h4>MySQL Connector/Python<a class="headerlink" href="#id8" title="Link to this heading">¶</a></h4>
<p>MySQL Connector/Python is available from the <a class="reference external" href="https://dev.mysql.com/downloads/connector/python/">download page</a>.
The GingerDJ adapter is available in versions 1.1.X and later. It may not
support the most recent releases of GingerDJ.</p>
</section>
</section>
<section id="s-time-zone-definitions">
<span id="s-mysql-time-zone-definitions"></span><span id="time-zone-definitions"></span><span id="mysql-time-zone-definitions"></span><h3>Time zone definitions<a class="headerlink" href="#time-zone-definitions" title="Link to this heading">¶</a></h3>
<p>If you plan on using GingerDJ’s <a class="reference internal" href="../topics/i18n/timezones.html"><span class="doc">timezone support</span></a>,
use <a class="reference external" href="https://dev.mysql.com/doc/refman/en/mysql-tzinfo-to-sql.html">mysql_tzinfo_to_sql</a> to load time zone tables into the MySQL database.
This needs to be done just once for your MySQL server, not per database.</p>
</section>
<section id="s-creating-your-database">
<span id="creating-your-database"></span><h3>Creating your database<a class="headerlink" href="#creating-your-database" title="Link to this heading">¶</a></h3>
<p>You can <a class="reference external" href="https://dev.mysql.com/doc/refman/en/create-database.html">create your database</a> using the command-line tools and this SQL:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">CREATE</span><span class="w"> </span><span class="k">DATABASE</span><span class="w"> </span><span class="o">&lt;</span><span class="n">dbname</span><span class="o">&gt;</span><span class="w"> </span><span class="nb">CHARACTER</span><span class="w"> </span><span class="k">SET</span><span class="w"> </span><span class="n">utf8</span><span class="p">;</span>
</pre></div>
</div>
<p>This ensures all tables and columns will use UTF-8 by default.</p>
<section id="s-collation-settings">
<span id="s-mysql-collation"></span><span id="collation-settings"></span><span id="mysql-collation"></span><h4>Collation settings<a class="headerlink" href="#collation-settings" title="Link to this heading">¶</a></h4>
<p>The collation setting for a column controls the order in which data is sorted
as well as what strings compare as equal. You can specify the <code class="docutils literal notranslate"><span class="pre">db_collation</span></code>
parameter to set the collation name of the column for
<a class="reference internal" href="models/fields.html#gingerdj.db.models.CharField.db_collation" title="gingerdj.db.models.CharField.db_collation"><code class="xref py py-attr docutils literal notranslate"><span class="pre">CharField</span></code></a> and
<a class="reference internal" href="models/fields.html#gingerdj.db.models.TextField.db_collation" title="gingerdj.db.models.TextField.db_collation"><code class="xref py py-attr docutils literal notranslate"><span class="pre">TextField</span></code></a>.</p>
<p>The collation can also be set on a database-wide level and per-table. This is
<a class="reference external" href="https://dev.mysql.com/doc/refman/en/charset.html">documented thoroughly</a> in the MySQL documentation. In such cases, you must
set the collation by directly manipulating the database settings or tables.
GingerDJ doesn’t provide an API to change them.</p>
<p>By default, with a UTF-8 database, MySQL will use the
<code class="docutils literal notranslate"><span class="pre">utf8_general_ci</span></code> collation. This results in all string equality
comparisons being done in a <em>case-insensitive</em> manner. That is, <code class="docutils literal notranslate"><span class="pre">&quot;Fred&quot;</span></code> and
<code class="docutils literal notranslate"><span class="pre">&quot;freD&quot;</span></code> are considered equal at the database level. If you have a unique
constraint on a field, it would be illegal to try to insert both <code class="docutils literal notranslate"><span class="pre">&quot;aa&quot;</span></code> and
<code class="docutils literal notranslate"><span class="pre">&quot;AA&quot;</span></code> into the same column, since they compare as equal (and, hence,
non-unique) with the default collation. If you want case-sensitive comparisons
on a particular column or table, change the column or table to use the
<code class="docutils literal notranslate"><span class="pre">utf8_bin</span></code> collation.</p>
<p>Please note that according to <a class="reference external" href="https://dev.mysql.com/doc/refman/en/charset-unicode-sets.html">MySQL Unicode Character Sets</a>, comparisons for
the <code class="docutils literal notranslate"><span class="pre">utf8_general_ci</span></code> collation are faster, but slightly less correct, than
comparisons for <code class="docutils literal notranslate"><span class="pre">utf8_unicode_ci</span></code>. If this is acceptable for your application,
you should use <code class="docutils literal notranslate"><span class="pre">utf8_general_ci</span></code> because it is faster. If this is not acceptable
(for example, if you require German dictionary order), use <code class="docutils literal notranslate"><span class="pre">utf8_unicode_ci</span></code>
because it is more accurate.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Model formsets validate unique fields in a case-sensitive manner. Thus when
using a case-insensitive collation, a formset with unique field values that
differ only by case will pass validation, but upon calling <code class="docutils literal notranslate"><span class="pre">save()</span></code>, an
<code class="docutils literal notranslate"><span class="pre">IntegrityError</span></code> will be raised.</p>
</div>
</section>
</section>
<section id="s-connecting-to-the-database">
<span id="connecting-to-the-database"></span><h3>Connecting to the database<a class="headerlink" href="#connecting-to-the-database" title="Link to this heading">¶</a></h3>
<p>Refer to the <a class="reference internal" href="settings.html"><span class="doc">settings documentation</span></a>.</p>
<p>Connection settings are used in this order:</p>
<ol class="arabic simple">
<li><p><a class="reference internal" href="settings.html#std-setting-OPTIONS"><code class="xref std std-setting docutils literal notranslate"><span class="pre">OPTIONS</span></code></a>.</p></li>
<li><p><a class="reference internal" href="settings.html#std-setting-NAME"><code class="xref std std-setting docutils literal notranslate"><span class="pre">NAME</span></code></a>, <a class="reference internal" href="settings.html#std-setting-USER"><code class="xref std std-setting docutils literal notranslate"><span class="pre">USER</span></code></a>, <a class="reference internal" href="settings.html#std-setting-PASSWORD"><code class="xref std std-setting docutils literal notranslate"><span class="pre">PASSWORD</span></code></a>, <a class="reference internal" href="settings.html#std-setting-HOST"><code class="xref std std-setting docutils literal notranslate"><span class="pre">HOST</span></code></a>,
<a class="reference internal" href="settings.html#std-setting-PORT"><code class="xref std std-setting docutils literal notranslate"><span class="pre">PORT</span></code></a></p></li>
<li><p>MySQL option files.</p></li>
</ol>
<p>In other words, if you set the name of the database in <a class="reference internal" href="settings.html#std-setting-OPTIONS"><code class="xref std std-setting docutils literal notranslate"><span class="pre">OPTIONS</span></code></a>,
this will take precedence over <a class="reference internal" href="settings.html#std-setting-NAME"><code class="xref std std-setting docutils literal notranslate"><span class="pre">NAME</span></code></a>, which would override
anything in a <a class="reference external" href="https://dev.mysql.com/doc/refman/en/option-files.html">MySQL option file</a>.</p>
<p>Here’s a sample configuration which uses a MySQL option file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># settings.py</span>
<span class="n">DATABASES</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;ENGINE&quot;</span><span class="p">:</span> <span class="s2">&quot;gingerdj.db.backends.mysql&quot;</span><span class="p">,</span>
        <span class="s2">&quot;OPTIONS&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;read_default_file&quot;</span><span class="p">:</span> <span class="s2">&quot;/path/to/my.cnf&quot;</span><span class="p">,</span>
        <span class="p">},</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="c1"># my.cnf</span>
<span class="k">[client]</span>
<span class="na">database</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">NAME</span>
<span class="na">user</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">USER</span>
<span class="na">password</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">PASSWORD</span>
<span class="na">default-character-set</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">utf8</span>
</pre></div>
</div>
<p>Several other <a class="reference external" href="https://mysqlclient.readthedocs.io/user_guide.html#functions-and-attributes">MySQLdb connection options</a> may be useful, such as <code class="docutils literal notranslate"><span class="pre">ssl</span></code>,
<code class="docutils literal notranslate"><span class="pre">init_command</span></code>, and <code class="docutils literal notranslate"><span class="pre">sql_mode</span></code>.</p>
<section id="s-setting-sql-mode">
<span id="s-mysql-sql-mode"></span><span id="setting-sql-mode"></span><span id="mysql-sql-mode"></span><h4>Setting <code class="docutils literal notranslate"><span class="pre">sql_mode</span></code><a class="headerlink" href="#setting-sql-mode" title="Link to this heading">¶</a></h4>
<p>The default value of the <code class="docutils literal notranslate"><span class="pre">sql_mode</span></code> option contains <code class="docutils literal notranslate"><span class="pre">STRICT_TRANS_TABLES</span></code>.
That option escalates warnings into errors when data are truncated upon
insertion, so GingerDJ highly recommends activating a <a class="reference external" href="https://dev.mysql.com/doc/refman/en/sql-mode.html#sql-mode-strict">strict mode</a> for MySQL to
prevent data loss (either <code class="docutils literal notranslate"><span class="pre">STRICT_TRANS_TABLES</span></code> or <code class="docutils literal notranslate"><span class="pre">STRICT_ALL_TABLES</span></code>).</p>
<p>If you need to customize the SQL mode, you can set the <code class="docutils literal notranslate"><span class="pre">sql_mode</span></code> variable
like other MySQL options: either in a config file or with the entry
<code class="docutils literal notranslate"><span class="pre">'init_command':</span> <span class="pre">&quot;SET</span> <span class="pre">sql_mode='STRICT_TRANS_TABLES'&quot;</span></code> in the
<a class="reference internal" href="settings.html#std-setting-OPTIONS"><code class="xref std std-setting docutils literal notranslate"><span class="pre">OPTIONS</span></code></a> part of your database configuration in <a class="reference internal" href="settings.html#std-setting-DATABASES"><code class="xref std std-setting docutils literal notranslate"><span class="pre">DATABASES</span></code></a>.</p>
</section>
<section id="s-mysql-isolation-level">
<span id="s-id9"></span><span id="mysql-isolation-level"></span><span id="id9"></span><h4>Isolation level<a class="headerlink" href="#mysql-isolation-level" title="Link to this heading">¶</a></h4>
<p>When running concurrent loads, database transactions from different sessions
(say, separate threads handling different requests) may interact with each
other. These interactions are affected by each session’s <a class="reference external" href="https://dev.mysql.com/doc/refman/en/innodb-transaction-isolation-levels.html">transaction isolation
level</a>. You can set a connection’s isolation level with an
<code class="docutils literal notranslate"><span class="pre">'isolation_level'</span></code> entry in the <a class="reference internal" href="settings.html#std-setting-OPTIONS"><code class="xref std std-setting docutils literal notranslate"><span class="pre">OPTIONS</span></code></a> part of your database
configuration in <a class="reference internal" href="settings.html#std-setting-DATABASES"><code class="xref std std-setting docutils literal notranslate"><span class="pre">DATABASES</span></code></a>. Valid values for
this entry are the four standard isolation levels:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">'read</span> <span class="pre">uncommitted'</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'read</span> <span class="pre">committed'</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'repeatable</span> <span class="pre">read'</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'serializable'</span></code></p></li>
</ul>
<p>or <code class="docutils literal notranslate"><span class="pre">None</span></code> to use the server’s configured isolation level. However, GingerDJ
works best with and defaults to read committed rather than MySQL’s default,
repeatable read. Data loss is possible with repeatable read. In particular,
you may see cases where <a class="reference internal" href="models/querysets.html#gingerdj.db.models.query.QuerySet.get_or_create" title="gingerdj.db.models.query.QuerySet.get_or_create"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_or_create()</span></code></a>
will raise an <a class="reference internal" href="exceptions.html#gingerdj.db.IntegrityError" title="gingerdj.db.IntegrityError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">IntegrityError</span></code></a> but the object won’t appear in
a subsequent <a class="reference internal" href="models/querysets.html#gingerdj.db.models.query.QuerySet.get" title="gingerdj.db.models.query.QuerySet.get"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get()</span></code></a> call.</p>
</section>
</section>
<section id="s-creating-your-tables">
<span id="creating-your-tables"></span><h3>Creating your tables<a class="headerlink" href="#creating-your-tables" title="Link to this heading">¶</a></h3>
<p>When GingerDJ generates the schema, it doesn’t specify a storage engine, so
tables will be created with whatever default storage engine your database
server is configured for. The easiest solution is to set your database server’s
default storage engine to the desired engine.</p>
<p>If you’re using a hosting service and can’t change your server’s default
storage engine, you have a couple of options.</p>
<ul>
<li><p>After the tables are created, execute an <code class="docutils literal notranslate"><span class="pre">ALTER</span> <span class="pre">TABLE</span></code> statement to
convert a table to a new storage engine (such as InnoDB):</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">ALTER</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="o">&lt;</span><span class="n">tablename</span><span class="o">&gt;</span><span class="w"> </span><span class="n">ENGINE</span><span class="o">=</span><span class="n">INNODB</span><span class="p">;</span>
</pre></div>
</div>
<p>This can be tedious if you have a lot of tables.</p>
</li>
<li><p>Another option is to use the <code class="docutils literal notranslate"><span class="pre">init_command</span></code> option for MySQLdb prior to
creating your tables:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;OPTIONS&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">&quot;init_command&quot;</span><span class="p">:</span> <span class="s2">&quot;SET default_storage_engine=INNODB&quot;</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>
</div>
<p>This sets the default storage engine upon connecting to the database.
After your tables have been created, you should remove this option as it
adds a query that is only needed during table creation to each database
connection.</p>
</li>
</ul>
</section>
<section id="s-table-names">
<span id="table-names"></span><h3>Table names<a class="headerlink" href="#table-names" title="Link to this heading">¶</a></h3>
<p>There are <a class="reference external" href="https://bugs.mysql.com/bug.php?id=48875">known issues</a> in even the latest versions of MySQL that can cause the
case of a table name to be altered when certain SQL statements are executed
under certain conditions. It is recommended that you use lowercase table
names, if possible, to avoid any problems that might arise from this behavior.
GingerDJ uses lowercase table names when it auto-generates table names from
models, so this is mainly a consideration if you are overriding the table name
via the <a class="reference internal" href="models/options.html#gingerdj.db.models.Options.db_table" title="gingerdj.db.models.Options.db_table"><code class="xref py py-class docutils literal notranslate"><span class="pre">db_table</span></code></a> parameter.</p>
</section>
<section id="s-savepoints">
<span id="savepoints"></span><h3>Savepoints<a class="headerlink" href="#savepoints" title="Link to this heading">¶</a></h3>
<p>Both the GingerDJ ORM and MySQL (when using the InnoDB <a class="reference internal" href="#mysql-storage-engines"><span class="std std-ref">storage engine</span></a>) support database <a class="reference internal" href="../topics/db/transactions.html#topics-db-transactions-savepoints"><span class="std std-ref">savepoints</span></a>.</p>
<p>If you use the MyISAM storage engine please be aware of the fact that you will
receive database-generated errors if you try to use the <a class="reference internal" href="../topics/db/transactions.html#topics-db-transactions-savepoints"><span class="std std-ref">savepoint-related
methods of the transactions API</span></a>. The reason
for this is that detecting the storage engine of a MySQL database/table is an
expensive operation so it was decided it isn’t worth to dynamically convert
these methods in no-op’s based in the results of such detection.</p>
</section>
<section id="s-notes-on-specific-fields">
<span id="notes-on-specific-fields"></span><h3>Notes on specific fields<a class="headerlink" href="#notes-on-specific-fields" title="Link to this heading">¶</a></h3>
<section id="s-character-fields">
<span id="s-mysql-character-fields"></span><span id="character-fields"></span><span id="mysql-character-fields"></span><h4>Character fields<a class="headerlink" href="#character-fields" title="Link to this heading">¶</a></h4>
<p>Any fields that are stored with <code class="docutils literal notranslate"><span class="pre">VARCHAR</span></code> column types may have their
<code class="docutils literal notranslate"><span class="pre">max_length</span></code> restricted to 255 characters if you are using <code class="docutils literal notranslate"><span class="pre">unique=True</span></code>
for the field. This affects <a class="reference internal" href="models/fields.html#gingerdj.db.models.CharField" title="gingerdj.db.models.CharField"><code class="xref py py-class docutils literal notranslate"><span class="pre">CharField</span></code></a>,
<a class="reference internal" href="models/fields.html#gingerdj.db.models.SlugField" title="gingerdj.db.models.SlugField"><code class="xref py py-class docutils literal notranslate"><span class="pre">SlugField</span></code></a>. See <a class="reference external" href="https://dev.mysql.com/doc/refman/en/create-index.html#create-index-column-prefixes">the MySQL documentation</a> for more
details.</p>
</section>
<section id="s-textfield-limitations">
<span id="textfield-limitations"></span><h4><code class="docutils literal notranslate"><span class="pre">TextField</span></code> limitations<a class="headerlink" href="#textfield-limitations" title="Link to this heading">¶</a></h4>
<p>MySQL can index only the first N chars of a <code class="docutils literal notranslate"><span class="pre">BLOB</span></code> or <code class="docutils literal notranslate"><span class="pre">TEXT</span></code> column. Since
<code class="docutils literal notranslate"><span class="pre">TextField</span></code> doesn’t have a defined length, you can’t mark it as
<code class="docutils literal notranslate"><span class="pre">unique=True</span></code>. MySQL will report: “BLOB/TEXT column ‘&lt;db_column&gt;’ used in key
specification without a key length”.</p>
</section>
<section id="s-fractional-seconds-support-for-time-and-datetime-fields">
<span id="s-mysql-fractional-seconds"></span><span id="fractional-seconds-support-for-time-and-datetime-fields"></span><span id="mysql-fractional-seconds"></span><h4>Fractional seconds support for Time and DateTime fields<a class="headerlink" href="#fractional-seconds-support-for-time-and-datetime-fields" title="Link to this heading">¶</a></h4>
<p>MySQL can store fractional seconds, provided that the column definition
includes a fractional indication (e.g. <code class="docutils literal notranslate"><span class="pre">DATETIME(6)</span></code>).</p>
<p>GingerDJ will not upgrade existing columns to include fractional seconds if the
database server supports it. If you want to enable them on an existing database,
it’s up to you to either manually update the column on the target database, by
executing a command like:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">ALTER</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="o">`</span><span class="n">your_table</span><span class="o">`</span><span class="w"> </span><span class="k">MODIFY</span><span class="w"> </span><span class="o">`</span><span class="n">your_datetime_column</span><span class="o">`</span><span class="w"> </span><span class="n">DATETIME</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span>
</pre></div>
</div>
<p>or using a <a class="reference internal" href="migration-operations.html#gingerdj.db.migrations.operations.RunSQL" title="gingerdj.db.migrations.operations.RunSQL"><code class="xref py py-class docutils literal notranslate"><span class="pre">RunSQL</span></code></a> operation in a
<a class="reference internal" href="../topics/migrations.html#data-migrations"><span class="std std-ref">data migration</span></a>.</p>
</section>
<section id="s-timestamp-columns">
<span id="timestamp-columns"></span><h4><code class="docutils literal notranslate"><span class="pre">TIMESTAMP</span></code> columns<a class="headerlink" href="#timestamp-columns" title="Link to this heading">¶</a></h4>
<p>If you are using a legacy database that contains <code class="docutils literal notranslate"><span class="pre">TIMESTAMP</span></code> columns, you must
set <a class="reference internal" href="settings.html#std-setting-USE_TZ"><code class="xref std std-setting docutils literal notranslate"><span class="pre">USE_TZ</span> <span class="pre">=</span> <span class="pre">False</span></code></a> to avoid data corruption.
<a class="reference internal" href="gingerdj-admin.html#gingerdj-admin-inspectdb"><code class="xref std std-djadmin docutils literal notranslate"><span class="pre">inspectdb</span></code></a> maps these columns to
<a class="reference internal" href="models/fields.html#gingerdj.db.models.DateTimeField" title="gingerdj.db.models.DateTimeField"><code class="xref py py-class docutils literal notranslate"><span class="pre">DateTimeField</span></code></a> and if you enable timezone support,
both MySQL and GingerDJ will attempt to convert the values from UTC to local time.</p>
</section>
</section>
<section id="s-row-locking-with-queryset-select-for-update">
<span id="row-locking-with-queryset-select-for-update"></span><h3>Row locking with <code class="docutils literal notranslate"><span class="pre">QuerySet.select_for_update()</span></code><a class="headerlink" href="#row-locking-with-queryset-select-for-update" title="Link to this heading">¶</a></h3>
<p>MySQL and MariaDB do not support some options to the <code class="docutils literal notranslate"><span class="pre">SELECT</span> <span class="pre">...</span> <span class="pre">FOR</span> <span class="pre">UPDATE</span></code>
statement. If <code class="docutils literal notranslate"><span class="pre">select_for_update()</span></code> is used with an unsupported option, then
a <a class="reference internal" href="exceptions.html#gingerdj.db.NotSupportedError" title="gingerdj.db.NotSupportedError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">NotSupportedError</span></code></a> is raised.</p>
<div class="table-wrapper docutils container">
<table class="docutils">
<thead>
<tr class="row-odd"><th class="head"><p>Option</p></th>
<th class="head"><p>MariaDB</p></th>
<th class="head"><p>MySQL</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">SKIP</span> <span class="pre">LOCKED</span></code></p></td>
<td><p>X (≥10.6)</p></td>
<td><p>X</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">NOWAIT</span></code></p></td>
<td><p>X</p></td>
<td><p>X</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">OF</span></code></p></td>
<td></td>
<td><p>X</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">NO</span> <span class="pre">KEY</span></code></p></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
</div>
<p>When using <code class="docutils literal notranslate"><span class="pre">select_for_update()</span></code> on MySQL, make sure you filter a queryset
against at least a set of fields contained in unique constraints or only
against fields covered by indexes. Otherwise, an exclusive write lock will be
acquired over the full table for the duration of the transaction.</p>
</section>
<section id="s-automatic-typecasting-can-cause-unexpected-results">
<span id="automatic-typecasting-can-cause-unexpected-results"></span><h3>Automatic typecasting can cause unexpected results<a class="headerlink" href="#automatic-typecasting-can-cause-unexpected-results" title="Link to this heading">¶</a></h3>
<p>When performing a query on a string type, but with an integer value, MySQL will
coerce the types of all values in the table to an integer before performing the
comparison. If your table contains the values <code class="docutils literal notranslate"><span class="pre">'abc'</span></code>, <code class="docutils literal notranslate"><span class="pre">'def'</span></code> and you
query for <code class="docutils literal notranslate"><span class="pre">WHERE</span> <span class="pre">mycolumn=0</span></code>, both rows will match. Similarly, <code class="docutils literal notranslate"><span class="pre">WHERE</span> <span class="pre">mycolumn=1</span></code>
will match the value <code class="docutils literal notranslate"><span class="pre">'abc1'</span></code>. Therefore, string type fields included in GingerDJ
will always cast the value to a string before using it in a query.</p>
<p>If you implement custom model fields that inherit from
<a class="reference internal" href="models/fields.html#gingerdj.db.models.Field" title="gingerdj.db.models.Field"><code class="xref py py-class docutils literal notranslate"><span class="pre">Field</span></code></a> directly, are overriding
<a class="reference internal" href="models/fields.html#gingerdj.db.models.Field.get_prep_value" title="gingerdj.db.models.Field.get_prep_value"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_prep_value()</span></code></a>, or use
<a class="reference internal" href="models/expressions.html#gingerdj.db.models.expressions.RawSQL" title="gingerdj.db.models.expressions.RawSQL"><code class="xref py py-class docutils literal notranslate"><span class="pre">RawSQL</span></code></a>,
<a class="reference internal" href="models/querysets.html#gingerdj.db.models.query.QuerySet.extra" title="gingerdj.db.models.query.QuerySet.extra"><code class="xref py py-meth docutils literal notranslate"><span class="pre">extra()</span></code></a>, or
<a class="reference internal" href="../topics/db/sql.html#gingerdj.db.models.Manager.raw" title="gingerdj.db.models.Manager.raw"><code class="xref py py-meth docutils literal notranslate"><span class="pre">raw()</span></code></a>, you should ensure that you perform
appropriate typecasting.</p>
</section>
</section>
<section id="s-sqlite-notes">
<span id="s-id10"></span><span id="sqlite-notes"></span><span id="id10"></span><h2>SQLite notes<a class="headerlink" href="#sqlite-notes" title="Link to this heading">¶</a></h2>
<p>GingerDJ supports SQLite 3.27.0 and later.</p>
<p><a class="reference external" href="https://www.sqlite.org/">SQLite</a> provides an excellent development alternative for applications that
are predominantly read-only or require a smaller installation footprint. As
with all database servers, though, there are some differences that are
specific to SQLite that you should be aware of.</p>
<section id="s-substring-matching-and-case-sensitivity">
<span id="s-sqlite-string-matching"></span><span id="substring-matching-and-case-sensitivity"></span><span id="sqlite-string-matching"></span><h3>Substring matching and case sensitivity<a class="headerlink" href="#substring-matching-and-case-sensitivity" title="Link to this heading">¶</a></h3>
<p>For all SQLite versions, there is some slightly counter-intuitive behavior when
attempting to match some types of strings.  These are triggered when using the
<a class="reference internal" href="models/querysets.html#std-fieldlookup-iexact"><code class="xref std std-lookup docutils literal notranslate"><span class="pre">iexact</span></code></a> or <a class="reference internal" href="models/querysets.html#std-fieldlookup-contains"><code class="xref std std-lookup docutils literal notranslate"><span class="pre">contains</span></code></a> filters in Querysets. The behavior
splits into two cases:</p>
<p>1. For substring matching, all matches are done case-insensitively. That is a
filter such as <code class="docutils literal notranslate"><span class="pre">filter(name__contains=&quot;aa&quot;)</span></code> will match a name of <code class="docutils literal notranslate"><span class="pre">&quot;Aabb&quot;</span></code>.</p>
<p>2. For strings containing characters outside the ASCII range, all exact string
matches are performed case-sensitively, even when the case-insensitive options
are passed into the query. So the <a class="reference internal" href="models/querysets.html#std-fieldlookup-iexact"><code class="xref std std-lookup docutils literal notranslate"><span class="pre">iexact</span></code></a> filter will behave exactly
the same as the <a class="reference internal" href="models/querysets.html#std-fieldlookup-exact"><code class="xref std std-lookup docutils literal notranslate"><span class="pre">exact</span></code></a> filter in these cases.</p>
<p>Some possible workarounds for this are <a class="reference external" href="https://www.sqlite.org/faq.html#q18">documented at sqlite.org</a>, but they
aren’t utilized by the default SQLite backend in GingerDJ, as incorporating them
would be fairly difficult to do robustly. Thus, GingerDJ exposes the default
SQLite behavior and you should be aware of this when doing case-insensitive or
substring filtering.</p>
</section>
<section id="s-decimal-handling">
<span id="s-sqlite-decimal-handling"></span><span id="decimal-handling"></span><span id="sqlite-decimal-handling"></span><h3>Decimal handling<a class="headerlink" href="#decimal-handling" title="Link to this heading">¶</a></h3>
<p>SQLite has no real decimal internal type. Decimal values are internally
converted to the <code class="docutils literal notranslate"><span class="pre">REAL</span></code> data type (8-byte IEEE floating point number), as
explained in the <a class="reference external" href="https://www.sqlite.org/datatype3.html#storage_classes_and_datatypes">SQLite datatypes documentation</a>, so they don’t support
correctly-rounded decimal floating point arithmetic.</p>
</section>
<section id="s-database-is-locked-errors">
<span id="database-is-locked-errors"></span><h3>“Database is locked” errors<a class="headerlink" href="#database-is-locked-errors" title="Link to this heading">¶</a></h3>
<p>SQLite is meant to be a lightweight database, and thus can’t support a high
level of concurrency. <code class="docutils literal notranslate"><span class="pre">OperationalError:</span> <span class="pre">database</span> <span class="pre">is</span> <span class="pre">locked</span></code> errors indicate
that your application is experiencing more concurrency than <code class="docutils literal notranslate"><span class="pre">sqlite</span></code> can
handle in default configuration. This error means that one thread or process has
an exclusive lock on the database connection and another thread timed out
waiting for the lock the be released.</p>
<p>Python’s SQLite wrapper has
a default timeout value that determines how long the second thread is allowed to
wait on the lock before it times out and raises the <code class="docutils literal notranslate"><span class="pre">OperationalError:</span> <span class="pre">database</span>
<span class="pre">is</span> <span class="pre">locked</span></code> error.</p>
<p>If you’re getting this error, you can solve it by:</p>
<ul>
<li><p>Switching to another database backend. At a certain point SQLite becomes
too “lite” for real-world applications, and these sorts of concurrency
errors indicate you’ve reached that point.</p></li>
<li><p>Rewriting your code to reduce concurrency and ensure that database
transactions are short-lived.</p></li>
<li><p>Increase the default timeout value by setting the <code class="docutils literal notranslate"><span class="pre">timeout</span></code> database
option:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;OPTIONS&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="c1"># ...</span>
    <span class="s2">&quot;timeout&quot;</span><span class="p">:</span> <span class="mi">20</span><span class="p">,</span>
    <span class="c1"># ...</span>
<span class="p">}</span>
</pre></div>
</div>
<p>This will make SQLite wait a bit longer before throwing “database is locked”
errors; it won’t really do anything to solve them.</p>
</li>
</ul>
<section id="s-transactions-behavior">
<span id="s-sqlite-transaction-behavior"></span><span id="transactions-behavior"></span><span id="sqlite-transaction-behavior"></span><h4>Transactions behavior<a class="headerlink" href="#transactions-behavior" title="Link to this heading">¶</a></h4>
<div class="versionadded">
<span class="title">New in GingerDJ Development version.</span> </div>
<p>SQLite supports three transaction modes: <code class="docutils literal notranslate"><span class="pre">DEFERRED</span></code>, <code class="docutils literal notranslate"><span class="pre">IMMEDIATE</span></code>, and
<code class="docutils literal notranslate"><span class="pre">EXCLUSIVE</span></code>.</p>
<p>The default is <code class="docutils literal notranslate"><span class="pre">DEFERRED</span></code>. If you need to use a different mode, set it in the
<a class="reference internal" href="settings.html#std-setting-OPTIONS"><code class="xref std std-setting docutils literal notranslate"><span class="pre">OPTIONS</span></code></a> part of your database configuration in
<a class="reference internal" href="settings.html#std-setting-DATABASES"><code class="xref std std-setting docutils literal notranslate"><span class="pre">DATABASES</span></code></a>, for example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;OPTIONS&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="c1"># ...</span>
    <span class="s2">&quot;transaction_mode&quot;</span><span class="p">:</span> <span class="s2">&quot;IMMEDIATE&quot;</span><span class="p">,</span>
    <span class="c1"># ...</span>
<span class="p">}</span>
</pre></div>
</div>
<p>To make sure your transactions wait until <code class="docutils literal notranslate"><span class="pre">timeout</span></code> before raising “Database
is Locked”, change the transaction mode to <code class="docutils literal notranslate"><span class="pre">IMMEDIATE</span></code>.</p>
<p>For the best performance with <code class="docutils literal notranslate"><span class="pre">IMMEDIATE</span></code> and <code class="docutils literal notranslate"><span class="pre">EXCLUSIVE</span></code>, transactions
should be as short as possible. This might be hard to guarantee for all of your
views so the usage of <a class="reference internal" href="settings.html#std-setting-DATABASE-ATOMIC_REQUESTS"><code class="xref std std-setting docutils literal notranslate"><span class="pre">ATOMIC_REQUESTS</span></code></a> is
discouraged  in this case.</p>
<p>For more information see <a class="reference external" href="https://www.sqlite.org/lang_transaction.html#deferred_immediate_and_exclusive_transactions">Transactions in SQLite</a>.</p>
</section>
</section>
<section id="s-queryset-select-for-update-not-supported">
<span id="queryset-select-for-update-not-supported"></span><h3><code class="docutils literal notranslate"><span class="pre">QuerySet.select_for_update()</span></code> not supported<a class="headerlink" href="#queryset-select-for-update-not-supported" title="Link to this heading">¶</a></h3>
<p>SQLite does not support the <code class="docutils literal notranslate"><span class="pre">SELECT</span> <span class="pre">...</span> <span class="pre">FOR</span> <span class="pre">UPDATE</span></code> syntax. Calling it will
have no effect.</p>
</section>
<section id="s-isolation-when-using-queryset-iterator">
<span id="s-sqlite-isolation"></span><span id="isolation-when-using-queryset-iterator"></span><span id="sqlite-isolation"></span><h3>Isolation when using <code class="docutils literal notranslate"><span class="pre">QuerySet.iterator()</span></code><a class="headerlink" href="#isolation-when-using-queryset-iterator" title="Link to this heading">¶</a></h3>
<p>There are special considerations described in <a class="reference external" href="https://www.sqlite.org/isolation.html">Isolation In SQLite</a> when
modifying a table while iterating over it using <a class="reference internal" href="models/querysets.html#gingerdj.db.models.query.QuerySet.iterator" title="gingerdj.db.models.query.QuerySet.iterator"><code class="xref py py-meth docutils literal notranslate"><span class="pre">QuerySet.iterator()</span></code></a>. If
a row is added, changed, or deleted within the loop, then that row may or may
not appear, or may appear twice, in subsequent results fetched from the
iterator. Your code must handle this.</p>
</section>
<section id="s-enabling-json1-extension-on-sqlite">
<span id="s-sqlite-json1"></span><span id="enabling-json1-extension-on-sqlite"></span><span id="sqlite-json1"></span><h3>Enabling JSON1 extension on SQLite<a class="headerlink" href="#enabling-json1-extension-on-sqlite" title="Link to this heading">¶</a></h3>
<p>To use <a class="reference internal" href="models/fields.html#gingerdj.db.models.JSONField" title="gingerdj.db.models.JSONField"><code class="xref py py-class docutils literal notranslate"><span class="pre">JSONField</span></code></a> on SQLite, you need to enable the
<a class="reference external" href="https://www.sqlite.org/json1.html">JSON1 extension</a> on Python’s <a class="reference external" href="https://docs.python.org/3/library/sqlite3.html#module-sqlite3" title="(in Python v3.13)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">sqlite3</span></code></a> library. If the extension is
not enabled on your installation, a system error (<code class="docutils literal notranslate"><span class="pre">fields.E180</span></code>) will be
raised.</p>
<p>To enable the JSON1 extension you can follow the instruction on
<a class="reference external" href="https://code.gingerdj.gloportal.dev/wiki/JSON1Extension">the wiki page</a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The JSON1 extension is enabled by default on SQLite 3.38+.</p>
</div>
</section>
<section id="s-setting-pragma-options">
<span id="s-sqlite-init-command"></span><span id="setting-pragma-options"></span><span id="sqlite-init-command"></span><h3>Setting pragma options<a class="headerlink" href="#setting-pragma-options" title="Link to this heading">¶</a></h3>
<div class="versionadded">
<span class="title">New in GingerDJ Development version.</span> </div>
<p><a class="reference external" href="https://www.sqlite.org/pragma.html">Pragma options</a> can be set upon connection by using the <code class="docutils literal notranslate"><span class="pre">init_command</span></code> in
the <a class="reference internal" href="settings.html#std-setting-OPTIONS"><code class="xref std std-setting docutils literal notranslate"><span class="pre">OPTIONS</span></code></a> part of your database configuration in
<a class="reference internal" href="settings.html#std-setting-DATABASES"><code class="xref std std-setting docutils literal notranslate"><span class="pre">DATABASES</span></code></a>. The example below shows how to enable extra durability of
synchronous writes and change the <code class="docutils literal notranslate"><span class="pre">cache_size</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">DATABASES</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;ENGINE&quot;</span><span class="p">:</span> <span class="s2">&quot;gingerdj.db.backends.sqlite3&quot;</span><span class="p">,</span>
        <span class="c1"># ...</span>
        <span class="s2">&quot;OPTIONS&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;init_command&quot;</span><span class="p">:</span> <span class="s2">&quot;PRAGMA synchronous=3; PRAGMA cache_size=2000;&quot;</span><span class="p">,</span>
        <span class="p">},</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
</section>
<section id="s-oracle-notes">
<span id="s-id12"></span><span id="oracle-notes"></span><span id="id12"></span><h2>Oracle notes<a class="headerlink" href="#oracle-notes" title="Link to this heading">¶</a></h2>
<p>GingerDJ supports <a class="reference external" href="https://www.oracle.com/">Oracle Database Server</a> versions 19c and higher. Version
1.3.2 or higher of the <a class="reference external" href="https://oracle.github.io/python-oracledb/">oracledb</a> Python driver is required.</p>
<div class="deprecated">
<p><span class="versionmodified deprecated">Deprecated since version 5.0: </span>Support for <code class="docutils literal notranslate"><span class="pre">cx_Oracle</span></code> is deprecated.</p>
</div>
<p>In order for the <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">manage.py</span> <span class="pre">migrate</span></code> command to work, your Oracle
database user must have privileges to run the following commands:</p>
<ul class="simple">
<li><p>CREATE TABLE</p></li>
<li><p>CREATE SEQUENCE</p></li>
<li><p>CREATE PROCEDURE</p></li>
<li><p>CREATE TRIGGER</p></li>
</ul>
<p>To run a project’s test suite, the user usually needs these <em>additional</em>
privileges:</p>
<ul class="simple">
<li><p>CREATE USER</p></li>
<li><p>ALTER USER</p></li>
<li><p>DROP USER</p></li>
<li><p>CREATE TABLESPACE</p></li>
<li><p>DROP TABLESPACE</p></li>
<li><p>CREATE SESSION WITH ADMIN OPTION</p></li>
<li><p>CREATE TABLE WITH ADMIN OPTION</p></li>
<li><p>CREATE SEQUENCE WITH ADMIN OPTION</p></li>
<li><p>CREATE PROCEDURE WITH ADMIN OPTION</p></li>
<li><p>CREATE TRIGGER WITH ADMIN OPTION</p></li>
</ul>
<p>While the <code class="docutils literal notranslate"><span class="pre">RESOURCE</span></code> role has the required <code class="docutils literal notranslate"><span class="pre">CREATE</span> <span class="pre">TABLE</span></code>,
<code class="docutils literal notranslate"><span class="pre">CREATE</span> <span class="pre">SEQUENCE</span></code>, <code class="docutils literal notranslate"><span class="pre">CREATE</span> <span class="pre">PROCEDURE</span></code>, and <code class="docutils literal notranslate"><span class="pre">CREATE</span> <span class="pre">TRIGGER</span></code> privileges,
and a user granted <code class="docutils literal notranslate"><span class="pre">RESOURCE</span> <span class="pre">WITH</span> <span class="pre">ADMIN</span> <span class="pre">OPTION</span></code> can grant <code class="docutils literal notranslate"><span class="pre">RESOURCE</span></code>, such
a user cannot grant the individual privileges (e.g. <code class="docutils literal notranslate"><span class="pre">CREATE</span> <span class="pre">TABLE</span></code>), and thus
<code class="docutils literal notranslate"><span class="pre">RESOURCE</span> <span class="pre">WITH</span> <span class="pre">ADMIN</span> <span class="pre">OPTION</span></code> is not usually sufficient for running tests.</p>
<p>Some test suites also create views or materialized views; to run these, the
user also needs <code class="docutils literal notranslate"><span class="pre">CREATE</span> <span class="pre">VIEW</span> <span class="pre">WITH</span> <span class="pre">ADMIN</span> <span class="pre">OPTION</span></code> and
<code class="docutils literal notranslate"><span class="pre">CREATE</span> <span class="pre">MATERIALIZED</span> <span class="pre">VIEW</span> <span class="pre">WITH</span> <span class="pre">ADMIN</span> <span class="pre">OPTION</span></code> privileges. In particular, this
is needed for GingerDJ’s own test suite.</p>
<p>All of these privileges are included in the DBA role, which is appropriate
for use on a private developer’s database.</p>
<p>The Oracle database backend uses the <code class="docutils literal notranslate"><span class="pre">SYS.DBMS_LOB</span></code> and <code class="docutils literal notranslate"><span class="pre">SYS.DBMS_RANDOM</span></code>
packages, so your user will require execute permissions on it. It’s normally
accessible to all users by default, but in case it is not, you’ll need to grant
permissions like so:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">GRANT</span><span class="w"> </span><span class="k">EXECUTE</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n">SYS</span><span class="p">.</span><span class="n">DBMS_LOB</span><span class="w"> </span><span class="k">TO</span><span class="w"> </span><span class="k">user</span><span class="p">;</span>
<span class="k">GRANT</span><span class="w"> </span><span class="k">EXECUTE</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n">SYS</span><span class="p">.</span><span class="n">DBMS_RANDOM</span><span class="w"> </span><span class="k">TO</span><span class="w"> </span><span class="k">user</span><span class="p">;</span>
</pre></div>
</div>
<section id="s-id13">
<span id="id13"></span><h3>Connecting to the database<a class="headerlink" href="#id13" title="Link to this heading">¶</a></h3>
<p>To connect using the service name of your Oracle database, your <code class="docutils literal notranslate"><span class="pre">settings.py</span></code>
file should look something like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">DATABASES</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;ENGINE&quot;</span><span class="p">:</span> <span class="s2">&quot;gingerdj.db.backends.oracle&quot;</span><span class="p">,</span>
        <span class="s2">&quot;NAME&quot;</span><span class="p">:</span> <span class="s2">&quot;xe&quot;</span><span class="p">,</span>
        <span class="s2">&quot;USER&quot;</span><span class="p">:</span> <span class="s2">&quot;a_user&quot;</span><span class="p">,</span>
        <span class="s2">&quot;PASSWORD&quot;</span><span class="p">:</span> <span class="s2">&quot;a_password&quot;</span><span class="p">,</span>
        <span class="s2">&quot;HOST&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="s2">&quot;PORT&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>In this case, you should leave both <a class="reference internal" href="settings.html#std-setting-HOST"><code class="xref std std-setting docutils literal notranslate"><span class="pre">HOST</span></code></a> and <a class="reference internal" href="settings.html#std-setting-PORT"><code class="xref std std-setting docutils literal notranslate"><span class="pre">PORT</span></code></a> empty.
However, if you don’t use a <code class="docutils literal notranslate"><span class="pre">tnsnames.ora</span></code> file or a similar naming method
and want to connect using the SID (“xe” in this example), then fill in both
<a class="reference internal" href="settings.html#std-setting-HOST"><code class="xref std std-setting docutils literal notranslate"><span class="pre">HOST</span></code></a> and <a class="reference internal" href="settings.html#std-setting-PORT"><code class="xref std std-setting docutils literal notranslate"><span class="pre">PORT</span></code></a> like so:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">DATABASES</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;ENGINE&quot;</span><span class="p">:</span> <span class="s2">&quot;gingerdj.db.backends.oracle&quot;</span><span class="p">,</span>
        <span class="s2">&quot;NAME&quot;</span><span class="p">:</span> <span class="s2">&quot;xe&quot;</span><span class="p">,</span>
        <span class="s2">&quot;USER&quot;</span><span class="p">:</span> <span class="s2">&quot;a_user&quot;</span><span class="p">,</span>
        <span class="s2">&quot;PASSWORD&quot;</span><span class="p">:</span> <span class="s2">&quot;a_password&quot;</span><span class="p">,</span>
        <span class="s2">&quot;HOST&quot;</span><span class="p">:</span> <span class="s2">&quot;dbprod01ned.mycompany.com&quot;</span><span class="p">,</span>
        <span class="s2">&quot;PORT&quot;</span><span class="p">:</span> <span class="s2">&quot;1540&quot;</span><span class="p">,</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>You should either supply both <a class="reference internal" href="settings.html#std-setting-HOST"><code class="xref std std-setting docutils literal notranslate"><span class="pre">HOST</span></code></a> and <a class="reference internal" href="settings.html#std-setting-PORT"><code class="xref std std-setting docutils literal notranslate"><span class="pre">PORT</span></code></a>, or leave
both as empty strings. GingerDJ will use a different connect descriptor depending
on that choice.</p>
<section id="s-full-dsn-and-easy-connect">
<span id="full-dsn-and-easy-connect"></span><h4>Full DSN and Easy Connect<a class="headerlink" href="#full-dsn-and-easy-connect" title="Link to this heading">¶</a></h4>
<p>A Full DSN or Easy Connect string can be used in <a class="reference internal" href="settings.html#std-setting-NAME"><code class="xref std std-setting docutils literal notranslate"><span class="pre">NAME</span></code></a> if both
<a class="reference internal" href="settings.html#std-setting-HOST"><code class="xref std std-setting docutils literal notranslate"><span class="pre">HOST</span></code></a> and <a class="reference internal" href="settings.html#std-setting-PORT"><code class="xref std std-setting docutils literal notranslate"><span class="pre">PORT</span></code></a> are empty. This format is required when
using RAC or pluggable databases without <code class="docutils literal notranslate"><span class="pre">tnsnames.ora</span></code>, for example.</p>
<p>Example of an Easy Connect string:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;NAME&quot;</span><span class="p">:</span> <span class="s2">&quot;localhost:1521/orclpdb1&quot;</span>
</pre></div>
</div>
<p>Example of a full DSN string:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;NAME&quot;</span><span class="p">:</span> <span class="p">(</span>
    <span class="s2">&quot;(DESCRIPTION=(ADDRESS=(PROTOCOL=TCP)(HOST=localhost)(PORT=1521))&quot;</span>
    <span class="s2">&quot;(CONNECT_DATA=(SERVICE_NAME=orclpdb1)))&quot;</span>
<span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="s-threaded-option">
<span id="threaded-option"></span><h3>Threaded option<a class="headerlink" href="#threaded-option" title="Link to this heading">¶</a></h3>
<p>If you plan to run GingerDJ in a multithreaded environment (e.g. Apache using the
default MPM module on any modern operating system), then you <strong>must</strong> set
the <code class="docutils literal notranslate"><span class="pre">threaded</span></code> option of your Oracle database configuration to <code class="docutils literal notranslate"><span class="pre">True</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;OPTIONS&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">&quot;threaded&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Failure to do this may result in crashes and other odd behavior.</p>
</section>
<section id="s-insert-returning-into">
<span id="insert-returning-into"></span><h3>INSERT … RETURNING INTO<a class="headerlink" href="#insert-returning-into" title="Link to this heading">¶</a></h3>
<p>By default, the Oracle backend uses a <code class="docutils literal notranslate"><span class="pre">RETURNING</span> <span class="pre">INTO</span></code> clause to efficiently
retrieve the value of an <code class="docutils literal notranslate"><span class="pre">AutoField</span></code> when inserting new rows.  This behavior
may result in a <code class="docutils literal notranslate"><span class="pre">DatabaseError</span></code> in certain unusual setups, such as when
inserting into a remote table, or into a view with an <code class="docutils literal notranslate"><span class="pre">INSTEAD</span> <span class="pre">OF</span></code> trigger.
The <code class="docutils literal notranslate"><span class="pre">RETURNING</span> <span class="pre">INTO</span></code> clause can be disabled by setting the
<code class="docutils literal notranslate"><span class="pre">use_returning_into</span></code> option of the database configuration to <code class="docutils literal notranslate"><span class="pre">False</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;OPTIONS&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">&quot;use_returning_into&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>
</div>
<p>In this case, the Oracle backend will use a separate <code class="docutils literal notranslate"><span class="pre">SELECT</span></code> query to
retrieve <code class="docutils literal notranslate"><span class="pre">AutoField</span></code> values.</p>
</section>
<section id="s-naming-issues">
<span id="naming-issues"></span><h3>Naming issues<a class="headerlink" href="#naming-issues" title="Link to this heading">¶</a></h3>
<p>Oracle imposes a name length limit of 30 characters. To accommodate this, the
backend truncates database identifiers to fit, replacing the final four
characters of the truncated name with a repeatable MD5 hash value.
Additionally, the backend turns database identifiers to all-uppercase.</p>
<p>To prevent these transformations (this is usually required only when dealing
with legacy databases or accessing tables which belong to other users), use
a quoted name as the value for <code class="docutils literal notranslate"><span class="pre">db_table</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">LegacyModel</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">db_table</span> <span class="o">=</span> <span class="s1">&#39;&quot;name_left_in_lowercase&quot;&#39;</span>


<span class="k">class</span> <span class="nc">ForeignModel</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">db_table</span> <span class="o">=</span> <span class="s1">&#39;&quot;OTHER_USER&quot;.&quot;NAME_ONLY_SEEMS_OVER_30&quot;&#39;</span>
</pre></div>
</div>
<p>Quoted names can also be used with GingerDJ’s other supported database
backends; except for Oracle, however, the quotes have no effect.</p>
<p>When running <code class="docutils literal notranslate"><span class="pre">migrate</span></code>, an <code class="docutils literal notranslate"><span class="pre">ORA-06552</span></code> error may be encountered if
certain Oracle keywords are used as the name of a model field or the
value of a <code class="docutils literal notranslate"><span class="pre">db_column</span></code> option.  GingerDJ quotes all identifiers used
in queries to prevent most such problems, but this error can still
occur when an Oracle datatype is used as a column name.  In
particular, take care to avoid using the names <code class="docutils literal notranslate"><span class="pre">date</span></code>,
<code class="docutils literal notranslate"><span class="pre">timestamp</span></code>, <code class="docutils literal notranslate"><span class="pre">number</span></code> or <code class="docutils literal notranslate"><span class="pre">float</span></code> as a field name.</p>
</section>
<section id="s-null-and-empty-strings">
<span id="s-oracle-null-empty-strings"></span><span id="null-and-empty-strings"></span><span id="oracle-null-empty-strings"></span><h3>NULL and empty strings<a class="headerlink" href="#null-and-empty-strings" title="Link to this heading">¶</a></h3>
<p>GingerDJ generally prefers to use the empty string (<code class="docutils literal notranslate"><span class="pre">''</span></code>) rather than
<code class="docutils literal notranslate"><span class="pre">NULL</span></code>, but Oracle treats both identically. To get around this, the
Oracle backend ignores an explicit <code class="docutils literal notranslate"><span class="pre">null</span></code> option on fields that
have the empty string as a possible value and generates DDL as if
<code class="docutils literal notranslate"><span class="pre">null=True</span></code>. When fetching from the database, it is assumed that
a <code class="docutils literal notranslate"><span class="pre">NULL</span></code> value in one of these fields really means the empty
string, and the data is silently converted to reflect this assumption.</p>
</section>
<section id="s-id14">
<span id="id14"></span><h3><code class="docutils literal notranslate"><span class="pre">TextField</span></code> limitations<a class="headerlink" href="#id14" title="Link to this heading">¶</a></h3>
<p>The Oracle backend stores <code class="docutils literal notranslate"><span class="pre">TextFields</span></code> as <code class="docutils literal notranslate"><span class="pre">NCLOB</span></code> columns. Oracle imposes
some limitations on the usage of such LOB columns in general:</p>
<ul class="simple">
<li><p>LOB columns may not be used as primary keys.</p></li>
<li><p>LOB columns may not be used in indexes.</p></li>
<li><p>LOB columns may not be used in a <code class="docutils literal notranslate"><span class="pre">SELECT</span> <span class="pre">DISTINCT</span></code> list. This means that
attempting to use the <code class="docutils literal notranslate"><span class="pre">QuerySet.distinct</span></code> method on a model that
includes <code class="docutils literal notranslate"><span class="pre">TextField</span></code> columns will result in an <code class="docutils literal notranslate"><span class="pre">ORA-00932</span></code> error when
run against Oracle. As a workaround, use the <code class="docutils literal notranslate"><span class="pre">QuerySet.defer</span></code> method in
conjunction with <code class="docutils literal notranslate"><span class="pre">distinct()</span></code> to prevent <code class="docutils literal notranslate"><span class="pre">TextField</span></code> columns from being
included in the <code class="docutils literal notranslate"><span class="pre">SELECT</span> <span class="pre">DISTINCT</span></code> list.</p></li>
</ul>
</section>
</section>
<section id="s-subclassing-the-built-in-database-backends">
<span id="s-subclassing-database-backends"></span><span id="subclassing-the-built-in-database-backends"></span><span id="subclassing-database-backends"></span><h2>Subclassing the built-in database backends<a class="headerlink" href="#subclassing-the-built-in-database-backends" title="Link to this heading">¶</a></h2>
<p>GingerDJ comes with built-in database backends. You may subclass an existing
database backends to modify its behavior, features, or configuration.</p>
<p>Consider, for example, that you need to change a single database feature.
First, you have to create a new directory with a <code class="docutils literal notranslate"><span class="pre">base</span></code> module in it. For
example:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>mysite/
    ...
    mydbengine/
        __init__.py
        base.py
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">base.py</span></code> module must contain a class named <code class="docutils literal notranslate"><span class="pre">DatabaseWrapper</span></code> that
subclasses an existing engine from the <code class="docutils literal notranslate"><span class="pre">gingerdj.db.backends</span></code> module. Here’s an
example of subclassing the PostgreSQL engine to change a feature class
<code class="docutils literal notranslate"><span class="pre">allows_group_by_selected_pks_on_model</span></code>:</p>
<div class="literal-block-wrapper docutils container" id="id18">
<div class="code-block-caption"><span class="caption-text"><code class="docutils literal notranslate"><span class="pre">mysite/mydbengine/base.py</span></code></span><a class="headerlink" href="#id18" title="Link to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">gingerdj.db.backends.postgresql</span> <span class="kn">import</span> <span class="n">base</span><span class="p">,</span> <span class="n">features</span>


<span class="k">class</span> <span class="nc">DatabaseFeatures</span><span class="p">(</span><span class="n">features</span><span class="o">.</span><span class="n">DatabaseFeatures</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">allows_group_by_selected_pks_on_model</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">True</span>


<span class="k">class</span> <span class="nc">DatabaseWrapper</span><span class="p">(</span><span class="n">base</span><span class="o">.</span><span class="n">DatabaseWrapper</span><span class="p">):</span>
    <span class="n">features_class</span> <span class="o">=</span> <span class="n">DatabaseFeatures</span>
</pre></div>
</div>
</div>
<p>Finally, you must specify a <a class="reference internal" href="settings.html#std-setting-DATABASE-ENGINE"><code class="xref std std-setting docutils literal notranslate"><span class="pre">DATABASE-ENGINE</span></code></a> in your <code class="docutils literal notranslate"><span class="pre">settings.py</span></code>
file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">DATABASES</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;ENGINE&quot;</span><span class="p">:</span> <span class="s2">&quot;mydbengine&quot;</span><span class="p">,</span>
        <span class="c1"># ...</span>
    <span class="p">},</span>
<span class="p">}</span>
</pre></div>
</div>
<p>You can see the current list of database engines by looking in
<a class="extlink-source reference external" href="https://github.com/gingerdj/gingerdj/blob/main/gingerdj/db/backends">gingerdj/db/backends</a>.</p>
</section>
<section id="s-using-a-3rd-party-database-backend">
<span id="s-third-party-notes"></span><span id="using-a-3rd-party-database-backend"></span><span id="third-party-notes"></span><h2>Using a 3rd-party database backend<a class="headerlink" href="#using-a-3rd-party-database-backend" title="Link to this heading">¶</a></h2>
<p>In addition to the officially supported databases, there are backends provided
by 3rd parties that allow you to use other databases with GingerDJ:</p>
<ul class="simple">
<li><p><a class="extlink-pypi reference external" href="https://pypi.org/project/gingerdj-cockroachdb/">CockroachDB</a></p></li>
<li><p><a class="extlink-pypi reference external" href="https://pypi.org/project/gingerdj-firebird/">Firebird</a></p></li>
<li><p><a class="extlink-pypi reference external" href="https://pypi.org/project/gingerdj-google-spanner/">Google Cloud Spanner</a></p></li>
<li><p><a class="extlink-pypi reference external" href="https://pypi.org/project/mssql-gingerdj/">Microsoft SQL Server</a></p></li>
<li><p><a class="extlink-pypi reference external" href="https://pypi.org/project/gingerdj-snowflake/">Snowflake</a></p></li>
<li><p><a class="extlink-pypi reference external" href="https://pypi.org/project/gingerdj-tidb/">TiDB</a></p></li>
<li><p><a class="extlink-pypi reference external" href="https://pypi.org/project/gingerdj-yugabytedb/">YugabyteDB</a></p></li>
</ul>
<p>The GingerDJ versions and ORM features supported by these unofficial backends
vary considerably. Queries regarding the specific capabilities of these
unofficial backends, along with any support queries, should be directed to
the support channels provided by each 3rd party project.</p>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="gingerdj-admin.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title"><code class="docutils literal notranslate"><span class="pre">gingerdj-admin</span></code> and <code class="docutils literal notranslate"><span class="pre">manage.py</span></code></div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="csrf.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Cross Site Request Forgery protection</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; Ginger Society and contributors
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            <div class="last-updated">
              Last updated on Nov 21, 2024</div>
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Databases</a><ul>
<li><a class="reference internal" href="#general-notes">General notes</a><ul>
<li><a class="reference internal" href="#persistent-connections">Persistent connections</a><ul>
<li><a class="reference internal" href="#connection-management">Connection management</a></li>
<li><a class="reference internal" href="#caveats">Caveats</a></li>
</ul>
</li>
<li><a class="reference internal" href="#encoding">Encoding</a></li>
</ul>
</li>
<li><a class="reference internal" href="#postgresql-notes">PostgreSQL notes</a><ul>
<li><a class="reference internal" href="#postgresql-connection-settings">PostgreSQL connection settings</a></li>
<li><a class="reference internal" href="#optimizing-postgresql-s-configuration">Optimizing PostgreSQL’s configuration</a></li>
<li><a class="reference internal" href="#isolation-level">Isolation level</a></li>
<li><a class="reference internal" href="#role">Role</a></li>
<li><a class="reference internal" href="#connection-pool">Connection pool</a></li>
<li><a class="reference internal" href="#server-side-parameters-binding">Server-side parameters binding</a></li>
<li><a class="reference internal" href="#indexes-for-varchar-and-text-columns">Indexes for <code class="docutils literal notranslate"><span class="pre">varchar</span></code> and <code class="docutils literal notranslate"><span class="pre">text</span></code> columns</a></li>
<li><a class="reference internal" href="#migration-operation-for-adding-extensions">Migration operation for adding extensions</a></li>
<li><a class="reference internal" href="#server-side-cursors">Server-side cursors</a><ul>
<li><a class="reference internal" href="#transaction-pooling-and-server-side-cursors">Transaction pooling and server-side cursors</a></li>
</ul>
</li>
<li><a class="reference internal" href="#manually-specifying-values-of-auto-incrementing-primary-keys">Manually-specifying values of auto-incrementing primary keys</a></li>
<li><a class="reference internal" href="#test-database-templates">Test database templates</a></li>
<li><a class="reference internal" href="#speeding-up-test-execution-with-non-durable-settings">Speeding up test execution with non-durable settings</a></li>
</ul>
</li>
<li><a class="reference internal" href="#mariadb-notes">MariaDB notes</a></li>
<li><a class="reference internal" href="#mysql-notes">MySQL notes</a><ul>
<li><a class="reference internal" href="#version-support">Version support</a></li>
<li><a class="reference internal" href="#storage-engines">Storage engines</a></li>
<li><a class="reference internal" href="#mysql-db-api-drivers">MySQL DB API Drivers</a><ul>
<li><a class="reference internal" href="#mysqlclient">mysqlclient</a></li>
<li><a class="reference internal" href="#id8">MySQL Connector/Python</a></li>
</ul>
</li>
<li><a class="reference internal" href="#time-zone-definitions">Time zone definitions</a></li>
<li><a class="reference internal" href="#creating-your-database">Creating your database</a><ul>
<li><a class="reference internal" href="#collation-settings">Collation settings</a></li>
</ul>
</li>
<li><a class="reference internal" href="#connecting-to-the-database">Connecting to the database</a><ul>
<li><a class="reference internal" href="#setting-sql-mode">Setting <code class="docutils literal notranslate"><span class="pre">sql_mode</span></code></a></li>
<li><a class="reference internal" href="#mysql-isolation-level">Isolation level</a></li>
</ul>
</li>
<li><a class="reference internal" href="#creating-your-tables">Creating your tables</a></li>
<li><a class="reference internal" href="#table-names">Table names</a></li>
<li><a class="reference internal" href="#savepoints">Savepoints</a></li>
<li><a class="reference internal" href="#notes-on-specific-fields">Notes on specific fields</a><ul>
<li><a class="reference internal" href="#character-fields">Character fields</a></li>
<li><a class="reference internal" href="#textfield-limitations"><code class="docutils literal notranslate"><span class="pre">TextField</span></code> limitations</a></li>
<li><a class="reference internal" href="#fractional-seconds-support-for-time-and-datetime-fields">Fractional seconds support for Time and DateTime fields</a></li>
<li><a class="reference internal" href="#timestamp-columns"><code class="docutils literal notranslate"><span class="pre">TIMESTAMP</span></code> columns</a></li>
</ul>
</li>
<li><a class="reference internal" href="#row-locking-with-queryset-select-for-update">Row locking with <code class="docutils literal notranslate"><span class="pre">QuerySet.select_for_update()</span></code></a></li>
<li><a class="reference internal" href="#automatic-typecasting-can-cause-unexpected-results">Automatic typecasting can cause unexpected results</a></li>
</ul>
</li>
<li><a class="reference internal" href="#sqlite-notes">SQLite notes</a><ul>
<li><a class="reference internal" href="#substring-matching-and-case-sensitivity">Substring matching and case sensitivity</a></li>
<li><a class="reference internal" href="#decimal-handling">Decimal handling</a></li>
<li><a class="reference internal" href="#database-is-locked-errors">“Database is locked” errors</a><ul>
<li><a class="reference internal" href="#transactions-behavior">Transactions behavior</a></li>
</ul>
</li>
<li><a class="reference internal" href="#queryset-select-for-update-not-supported"><code class="docutils literal notranslate"><span class="pre">QuerySet.select_for_update()</span></code> not supported</a></li>
<li><a class="reference internal" href="#isolation-when-using-queryset-iterator">Isolation when using <code class="docutils literal notranslate"><span class="pre">QuerySet.iterator()</span></code></a></li>
<li><a class="reference internal" href="#enabling-json1-extension-on-sqlite">Enabling JSON1 extension on SQLite</a></li>
<li><a class="reference internal" href="#setting-pragma-options">Setting pragma options</a></li>
</ul>
</li>
<li><a class="reference internal" href="#oracle-notes">Oracle notes</a><ul>
<li><a class="reference internal" href="#id13">Connecting to the database</a><ul>
<li><a class="reference internal" href="#full-dsn-and-easy-connect">Full DSN and Easy Connect</a></li>
</ul>
</li>
<li><a class="reference internal" href="#threaded-option">Threaded option</a></li>
<li><a class="reference internal" href="#insert-returning-into">INSERT … RETURNING INTO</a></li>
<li><a class="reference internal" href="#naming-issues">Naming issues</a></li>
<li><a class="reference internal" href="#null-and-empty-strings">NULL and empty strings</a></li>
<li><a class="reference internal" href="#id14"><code class="docutils literal notranslate"><span class="pre">TextField</span></code> limitations</a></li>
</ul>
</li>
<li><a class="reference internal" href="#subclassing-the-built-in-database-backends">Subclassing the built-in database backends</a></li>
<li><a class="reference internal" href="#using-a-3rd-party-database-backend">Using a 3rd-party database backend</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="../_static/documentation_options.js?v=c5a15dbd"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/scripts/furo.js?v=5fa4622c"></script>
    </body>
</html>