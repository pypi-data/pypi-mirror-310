"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1445],{48502:function(e,n,t){t.d(n,{z:function(){return l}});var r=t(73235),s=t(20958),i=t(78491);function o(){let e=(0,r._)(["\n  fragment AutomationAssetSelectionFragment on AssetSelection {\n    assetSelectionString\n    assetsOrError {\n      ... on AssetConnection {\n        nodes {\n          id\n          ...AssetSelectionNodeFragment\n        }\n      }\n      ... on PythonError {\n        ...PythonErrorFragment\n      }\n    }\n  }\n\n  fragment AssetSelectionNodeFragment on Asset {\n    id\n    key {\n      path\n    }\n    definition {\n      id\n      automationCondition {\n        __typename\n      }\n    }\n  }\n\n  ","\n"]);return o=function(){return e},e}let l=(0,s.Ps)(o(),i.B)},24427:function(e,n,t){t.d(n,{p:function(){return E}});var r=t(52322),s=t(14934),i=t(43212),o=t(39013),l=t(92506),a=t(38491),d=t(89891),c=t(72330),u=t(83373);let h=e=>{let{isOpen:n,onToggle:t}=e;return(0,r.jsx)(u.k,{onClick:e=>{t(e)},style:{cursor:"pointer",width:18},children:(0,r.jsx)(c.JO,{name:"arrow_drop_down",style:{transform:n?"rotate(0deg)":"rotate(-90deg)"}})})};var x=t(35292),p=t(53664),m=t(2784),g=t(47933),j=t(8068),v=t(99590),f=t(71406),y=t(44900),S=t(75442),C=t(88257),b=t(33847),w=t(81732),k=t(70812),T=t(92199);let E=e=>{let{assetSelection:n,automationType:t,targets:l,repoAddress:a}=e,d=(0,T.Ux)(a);if(!l&&!n)return(0,r.jsx)("span",{});let c=null==l?void 0:l.filter(e=>!(0,y.pv)(e.pipelineName));return n?(0,r.jsx)(R,{assetSelection:n,automationType:t}):(null==c?void 0:c.length)?(0,r.jsx)(s.x,{flex:{direction:"row",gap:4},children:c.map(e=>e.pipelineName?(0,r.jsx)(i.V,{icon:"job",tooltipText:e.pipelineName,children:(0,r.jsx)(b.h,{pipelineName:e.pipelineName,pipelineHrefContext:a,isJob:!!(d&&(0,T.E8)(d,e.pipelineName))},e.pipelineName)},e.pipelineName):null)}):(0,r.jsx)(i.V,{children:(0,r.jsx)("div",{style:{color:o.$()},children:"None"})})},R=e=>{let{assetSelection:n,automationType:t}=e,[c,u]=(0,m.useState)(!1),h="PythonError"===n.assetsOrError.__typename?n.assetsOrError:null,x=(0,m.useMemo)(()=>"PythonError"===n.assetsOrError.__typename?[]:n.assetsOrError.nodes.slice().sort((e,n)=>f.Bl.compare((0,y.ll)(e.key),(0,y.ll)(n.key))),[n.assetsOrError]),p=(0,m.useMemo)(()=>x.filter(e=>{var n;return!!(null===(n=e.definition)||void 0===n?void 0:n.automationCondition)}),[x]),b=(0,m.useMemo)(()=>x.filter(e=>{var n;return!(null===(n=e.definition)||void 0===n?void 0:n.automationCondition)}),[x]),w=n.assetSelectionString||"",k="all materializable assets"===w,T=x[0];return T&&1===x.length?(0,r.jsx)(i.V,{icon:"asset",children:(0,r.jsx)(g.rU,{to:(0,S.p)(T.key),children:w})}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(l.Vq,{isOpen:c,title:"Targeted assets",onClose:()=>u(!1),style:{width:"750px",maxWidth:"80vw",minWidth:"500px"},canOutsideClickClose:!0,canEscapeKeyClose:!0,children:[(0,r.jsx)(s.x,{flex:{direction:"column"},style:{height:"50vh",maxHeight:"1000px",minHeight:"400px"},children:t===C.dEY.AUTO_MATERIALIZE||t===C.dEY.AUTOMATION?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(I,{title:"Assets with a materialization policy",titleBorder:"bottom",assets:p}),(0,r.jsx)(I,{title:"Assets without a materialization policy",titleBorder:"top-and-bottom",assets:b})]}):(0,r.jsx)(I,{assets:x})}),(0,r.jsx)(l.cN,{topBorder:!0,children:(0,r.jsx)(a.zx,{intent:"primary",onClick:()=>{u(!1)},children:"Close"})})]}),(0,r.jsx)(i.V,{icon:1===x.length?"asset":"asset_group",intent:h?"danger":"none",children:(0,r.jsx)(d.Z,{onClick:()=>{h?(0,j._K)({title:"Python error",body:(0,r.jsx)(v.T9,{error:h})}):u(!0)},color:h?o.Yn():o.Es(),children:h?"Error loading asset selection":k?"All materializable assets":w})})]})},I=e=>{let{assets:n,title:t,titleBorder:i="top-and-bottom"}=e,[l,a]=(0,m.useState)(!0);return(0,r.jsxs)(r.Fragment,{children:[t?(0,r.jsx)(s.x,{border:i,padding:{right:24,vertical:12},children:(0,r.jsxs)(s.x,{flex:{direction:"row",gap:4},style:{cursor:"pointer"},onClick:()=>{a(!l)},children:[(0,r.jsx)(h,{onToggle:()=>{},isOpen:l}),(0,r.jsxs)(x.Tj,{children:[t," (",k.V.format(n.length),")"]})]})}):null,l?n.length?(0,r.jsx)("div",{style:{height:"100%",overflowY:"hidden"},children:(0,r.jsx)(w.Y,{padding:0,items:n,renderItem:e=>(0,r.jsx)(P,{asset:e},e.id),itemBorders:!0})}):(0,r.jsx)(s.x,{padding:{horizontal:24,vertical:12},children:(0,r.jsx)(x.YS,{color:o.$(),children:"0 assets"})}):null]})},P=e=>{let{asset:n}=e;return(0,r.jsx)(s.x,{flex:{alignItems:"center",gap:4},style:{cursor:"pointer"},padding:{horizontal:24},children:(0,r.jsx)(g.rU,{to:(0,S.p)(n.key),target:"_blank",children:(0,r.jsx)(s.x,{style:{overflow:"hidden"},children:(0,r.jsx)(p.g,{text:(0,y.ll)(n.key)})})})})}},59502:function(e,n,t){t.d(n,{p:function(){return w}});var r=t(52322),s=t(39013),i=t(60129),o=t(35292),l=t(35002),a=t(40191),d=t(28879),c=t.n(d),u=t(77491),h=t.n(u),x=t(30733),p=t.n(x),m=t(2784),g=t(35505),j=t(57758),v=t(68903),f=t(72045),y=t(88257);c().extend(h());let S={[y.izS.SUCCESS]:s.fA(),[y.izS.FAILURE]:s.FY(),[y.izS.STARTED]:s.v4(),[y.izS.SKIPPED]:s.A8()},C={[y.izS.SUCCESS]:s.Lv(),[y.izS.FAILURE]:s.MP(),[y.izS.STARTED]:s.Jq(),[y.izS.SKIPPED]:s.$l()},b=p()(e=>new Intl.DateTimeFormat(navigator.language,{hour:"2-digit",minute:"2-digit",second:"2-digit",hourCycle:"h23",timeZone:"Automatic"===e?(0,f.cw)():e,timeZoneName:"short"})),w=e=>{let{ticks:n,tickResultType:t,onHoverTick:s,onSelectTick:a,exactRange:d,timeRange:c=3e5,tickGrid:u=6e4,timeAfter:h=6e4}=e,[x,p]=(0,m.useState)(Date.now()),[g,f]=(0,m.useState)(!1);(0,m.useEffect)(()=>{if(!g&&!d){let e=setInterval(()=>{p(Date.now())},100);return()=>clearInterval(e)}return()=>{}},[d,g]);let y=(null==d?void 0:d[1])?1e3*d[1]:x+h,S=(null==d?void 0:d[0])?1e3*d[0]:x-c,C=y-S,{viewport:w,containerProps:z}=(0,i.S)(),N=(0,m.useMemo)(()=>n.filter(e=>!e.endTimestamp||1e3*e.endTimestamp>S).reverse(),[n,S]),O=(0,m.useMemo)(()=>N.map((e,n)=>{var t,r;let s=(t=1e3*e.timestamp,w.width*(t-S)/C),i=(r=(0,j.g6)(e,N.length-n-1)?e.timestamp:e.endTimestamp?1e3*e.endTimestamp:x,w.width*(r-S)/C);return{...e,width:Math.max(i-s,8),startX:s}}),[S,x,N,C,w.width]),q=Math.max((y-S)/25,u),D=q/5,F=Math.ceil(S/D)*D,$=(0,m.useMemo)(()=>{let e=[];for(let t=F;t<=y;t+=D){var n;e.push({time:t,x:(n=t,w.width*(n-S)/C),showLabel:t%q==0})}return e},[y,F,D,w.width,S,C,q]),{timezone:[M]}=(0,m.useContext)(v.JB);return(0,r.jsx)("div",{style:{marginRight:"8px"},children:(0,r.jsxs)("div",{...z,children:[(0,r.jsxs)(T,{children:[$.map(e=>(0,r.jsxs)(I,{style:{transform:"translateX(".concat(e.x,"px)")},children:[(0,r.jsx)(P,{}),e.showLabel?(0,r.jsx)(A,{children:(0,r.jsx)(o.YS,{children:b(M).format(new Date(e.time))})}):null]},e.time)),O.map(e=>{var n,i;let o=null!==(i="materializations"!==t&&"runIds"in e?null===(n=e.runIds)||void 0===n?void 0:n.length:e.requestedAssetMaterializationCount)&&void 0!==i?i:0;return(0,r.jsx)(R,{style:{transform:"translateX(".concat(e.startX,"px)"),width:"".concat(e.width,"px")},status:e.status,onMouseEnter:()=>{s(e),f(!0)},onMouseLeave:()=>{s(),f(!1)},onClick:()=>{a(e)},children:(0,r.jsx)(l.u,{content:(0,r.jsx)(k,{tick:e,tickResultType:t}),children:(0,r.jsx)("div",{style:{width:e.width+"px",height:"80px"},children:o>0?o:null})})},e.id)}),(0,r.jsx)(_,{style:{transform:"translateX(".concat(w.width*(x-S)/C,"px)")}})]}),(0,r.jsx)(E,{})]})})},k=(0,m.memo)(e=>{let{tick:n,tickResultType:t}=e,i=(0,m.useMemo)(()=>{var e,r;return n.status===y.izS.FAILURE?"Evaluation failed":n.status===y.izS.STARTED?"Evaluating…":"materializations"!==t&&"runs"in n?"".concat((null===(e=n.runs)||void 0===e?void 0:e.length)||0," run").concat((0,a.I)(null===(r=n.runs)||void 0===r?void 0:r.length,"","s")," requested"):"".concat(n.requestedAssetMaterializationCount," materialization").concat((0,a.I)(n.requestedAssetMaterializationCount,"","s")," requested")},[n,t]),l=c()(1e3*n.timestamp),d=c()(n.endTimestamp?1e3*n.endTimestamp:Date.now()),u=l.to(d,!0);return(0,r.jsxs)("div",{children:[(0,r.jsxs)(o.YS,{as:"div",children:[i," (",u,")"]}),n.status===y.izS.STARTED?null:(0,r.jsx)(o.YS,{color:s.$(),children:"Click for details"})]})}),T=g.ZP.div.withConfig({componentId:"sc-e25fbce7-0"})(["position:relative;height:100px;padding:10px 2px;border-bottom:1px solid ",";"],s.wL()),E=g.ZP.div.withConfig({componentId:"sc-e25fbce7-1"})(["height:24px;"]),R=g.ZP.div.withConfig({componentId:"sc-e25fbce7-2"})(["cursor:pointer;position:absolute;top:10px;height:80px;will-change:transform,width;border-radius:2px;div{place-content:center;display:grid;}color:",";",""],s.v8(),e=>{let{status:n}=e;return"\n    background: ".concat(S[n],";\n    &:hover {\n      background: ").concat(C[n],";\n    }\n  ")}),I=g.ZP.div.withConfig({componentId:"sc-e25fbce7-3"})(["position:absolute;top:0;height:124px;will-change:transform;"]),P=g.ZP.div.withConfig({componentId:"sc-e25fbce7-4"})(["position:absolute;top:0;height:108px;width:1px;background:",";"],s.wL()),A=g.ZP.div.withConfig({componentId:"sc-e25fbce7-5"})(["height:16px;position:absolute;bottom:0;width:100px;margin-left:-24px;"]),_=g.ZP.div.withConfig({componentId:"sc-e25fbce7-6"})(["position:absolute;top:0;height:126px;width:2px;background:",";&:after{content:'Now';position:absolute;left:0;background:",";color:",";bottom:0;font-size:12px;padding:3px 4px;}"],s.Bj(),s.Bj(),s.KH())},9790:function(e,n,t){t.d(n,{C:function(){return H},H:function(){return Y}});var r,s,i=t(73235),o=t(52322);t(26529);var l=t(14934),a=t(79106),d=t(37483),c=t(80122),u=t(46100),h=t(60603),x=t(38491),p=t(72330),m=t(35292),g=t(74188),j=t(89891),v=t(40191),f=t(39013),y=t(1747),S=t(65511),C=t(42418),b=t(2784),w=t(35505),k=t(77837),T=t(581),E=t(59502),R=t(44030),I=t(57758),P=t(20958),A=t(50309),_=t(78491),z=t(99590),N=t(16336),O=t(85227),q=t(88257),D=t(4378),F=t(2278),$=t(15332),M=t(86269),U=t(57397),L=t(58905),K=t(20718);function Z(){let e=(0,i._)(["\n  query TickHistoryQuery(\n    $instigationSelector: InstigationSelector!\n    $dayRange: Int\n    $limit: Int\n    $cursor: String\n    $statuses: [InstigationTickStatus!]\n    $beforeTimestamp: Float\n    $afterTimestamp: Float\n  ) {\n    instigationStateOrError(instigationSelector: $instigationSelector) {\n      ... on InstigationState {\n        id\n        instigationType\n        ticks(\n          dayRange: $dayRange\n          limit: $limit\n          cursor: $cursor\n          statuses: $statuses\n          beforeTimestamp: $beforeTimestamp\n          afterTimestamp: $afterTimestamp\n        ) {\n          id\n          ...HistoryTick\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n  ","\n  ","\n"]);return Z=function(){return e},e}S.kL.register(C.ZP),(r=s||(s={})).ALL="all",r.FAILED="failed",r.SUCCESS="success";let B={all:[q.izS.SUCCESS,q.izS.FAILURE,q.izS.STARTED,q.izS.SKIPPED],failed:[q.izS.FAILURE],success:[q.izS.SUCCESS]},Y=e=>{var n;let{name:t,repoAddress:r,tabs:s,tickResultType:i,setTimerange:u,setParentStatuses:h}=e,[x,p]=(0,D.q)({queryKey:"status",defaults:{status:"all"}}),m={...(0,K.$)(r),name:t},g=b.useMemo(()=>B[x]||B.all,[x]),{queryResult:j,paginationProps:v}=(0,$.l)({nextCursorForResult:e=>{var n;if("InstigationState"===e.instigationStateOrError.__typename)return null===(n=e.instigationStateOrError.ticks[24])||void 0===n?void 0:n.id},getResultArray:e=>e&&"InstigationState"===e.instigationStateOrError.__typename?e.instigationStateOrError.ticks:[],variables:{instigationSelector:m,statuses:g},query:Q,pageSize:25});(0,N.C4)(j,N.dT);let f=null==j?void 0:null===(n=j.data)||void 0===n?void 0:n.instigationStateOrError,y=b.useMemo(()=>(null==f?void 0:f.__typename)==="InstigationState"?f.ticks:[],[f]);b.useEffect(()=>{if(v.hasPrevCursor){if(y&&y.length){var e,n;let t=null===(e=y[y.length-1])||void 0===e?void 0:e.timestamp,r=null===(n=y[0])||void 0===n?void 0:n.endTimestamp;t&&r&&(null==u||u([t,r]))}}else null==u||u(void 0)},[v.hasPrevCursor,y,u]),b.useEffect(()=>{v.hasPrevCursor?null==h||h(Array.from(g)):null==h||h(void 0)},[v.hasPrevCursor,h,g]),b.useEffect(()=>{!v.hasPrevCursor||y.length||j.loading||v.reset()},[y,j.loading,v.hasPrevCursor]);let[S,C]=b.useState(),{data:w}=j;if(!w)return(0,o.jsx)(l.x,{padding:{vertical:48},children:(0,o.jsx)(a.$,{purpose:"page"})});if("PythonError"===w.instigationStateOrError.__typename)return(0,o.jsx)(z.T9,{error:w.instigationStateOrError});if("InstigationStateNotFoundError"===w.instigationStateOrError.__typename)return(0,o.jsx)(l.x,{padding:{vertical:32},flex:{justifyContent:"center"},children:(0,o.jsx)(d.t,{icon:"no-results",title:"No ticks to display"})});let{instigationType:k}=w.instigationStateOrError;return y.length||"all"!==x?(0,o.jsxs)(o.Fragment,{children:[S?(0,o.jsx)(U.l,{tick:S,instigationSelector:m,onClose:()=>C(void 0)}):null,(0,o.jsx)(l.x,{padding:{vertical:12,horizontal:24},children:(0,o.jsxs)(l.x,{flex:{direction:"row",justifyContent:"space-between",alignItems:"center"},children:[s,(0,o.jsx)(l.x,{flex:{direction:"row",gap:16},children:(0,o.jsx)(V,{status:x,onChange:p})})]})}),y.length?(0,o.jsxs)(W,{children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{style:{width:120},children:"Timestamp"}),(0,o.jsx)("th",{style:{width:90},children:"Status"}),(0,o.jsx)("th",{style:{width:90},children:"Duration"}),k===q._5b.SENSOR?(0,o.jsx)("th",{style:{width:120},children:"Cursor"}):null,(0,o.jsx)("th",{style:{width:180},children:"Result"})]})}),(0,o.jsx)("tbody",{children:y.map((e,n)=>(0,o.jsx)(J,{tick:e,tickResultType:i,instigationSelector:m,index:n},e.id))})]}):(0,o.jsx)(l.x,{padding:{vertical:32},flex:{justifyContent:"center"},children:(0,o.jsx)(d.t,{icon:"no-results",title:"No ticks to display"})}),y.length>0?(0,o.jsx)("div",{style:{marginTop:"16px"},children:(0,o.jsx)(c.pI,{...v})}):null]}):null},V=e=>{let{status:n,onChange:t}=e,r=[{key:"all",label:"All ticks"},{key:"success",label:"Requested"},{key:"failed",label:"Failed"}],s=r.find(e=>{let{key:t}=e;return t===n});return(0,o.jsx)(u.P,{popoverProps:{position:"bottom-right"},filterable:!1,activeItem:s,items:r,itemRenderer:(e,n)=>(0,o.jsx)(h.sN,{active:n.modifiers.active,onClick:n.handleClick,text:e.label,style:{width:"300px"}},e.key),itemListRenderer:e=>{let{renderItem:n,filteredItems:t}=e,r=t.map(n).filter(Boolean);return(0,o.jsx)(h.v2,{children:r})},onItemSelect:e=>t(e.key),children:(0,o.jsx)(x.zx,{rightIcon:(0,o.jsx)(p.JO,{name:"arrow_drop_down"}),style:{minWidth:"200px",display:"flex",justifyContent:"space-between"},children:null==s?void 0:s.label})})},H=e=>{let{name:n,repoAddress:t,tickResultType:r,onHighlightRunIds:s,beforeTimestamp:i,afterTimestamp:d,statuses:c}=e,[u,h]=(0,D.q)({encode:e=>({tickId:e}),decode:e=>{var n;return null!==(n=e.tickId)&&void 0!==n?n:void 0}}),[x,p]=b.useState(!1),g={...(0,K.$)(t),name:n},j=(0,P.aM)(Q,{variables:{instigationSelector:g,beforeTimestamp:i,afterTimestamp:d,statuses:c,limit:i?void 0:15},notifyOnNetworkStatusChange:!0});(0,N.C4)(j,1e3,!(x||i&&d));let{data:v,error:f}=j;if(!v||f)return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(l.x,{padding:{top:16,horizontal:24},border:"bottom",children:(0,o.jsx)(m.pm,{children:"Recent ticks"})}),(0,o.jsx)(l.x,{padding:{vertical:64},children:(0,o.jsx)(a.$,{purpose:"section"})})]});if("PythonError"===v.instigationStateOrError.__typename)return(0,o.jsx)(z.T9,{error:v.instigationStateOrError});if("InstigationStateNotFoundError"===v.instigationStateOrError.__typename)return null;let{ticks:y=[]}=v.instigationStateOrError,S=e=>{h(e?e.tickId:void 0)};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(R.X,{isOpen:!!u,tickId:u,tickResultType:r,instigationSelector:g,onClose:()=>S(void 0)}),(0,o.jsx)(l.x,{padding:{vertical:16,horizontal:24},children:(0,o.jsx)(m.pm,{children:"Recent ticks"})}),(0,o.jsx)(l.x,{border:"top",children:(0,o.jsx)(E.p,{ticks:y,tickResultType:r,onHoverTick:e=>{e||p(!1),(null==e?void 0:e.runIds)&&(s&&s(e.runIds),p(!0))},onSelectTick:S,exactRange:i&&d?[d,i]:void 0})})]})};function J(e){let{tick:n,tickResultType:t,instigationSelector:r,index:s}=e,i=(0,O.m)(),[a,d]=b.useState(!1),[c,u]=b.useMemo(()=>{let e=n.dynamicPartitionsRequestResults;return[(0,I.sw)(e,q.Dq2.ADD_PARTITIONS),(0,I.sw)(e,q.Dq2.DELETE_PARTITIONS)]},[null==n?void 0:n.dynamicPartitionsRequestResults]),h=(0,I.g6)(n,s);return(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{children:(0,o.jsx)(M.v,{timestamp:n.timestamp,timeFormat:{showTimezone:!1,showSeconds:!0}})}),(0,o.jsx)("td",{children:(0,o.jsx)(L.a,{tick:n,tickResultType:t,isStuckStarted:h})}),(0,o.jsx)("td",{children:h?"- ":(0,o.jsx)(F.Q,{startUnix:n.timestamp,endUnix:n.endTimestamp||Date.now()/1e3})}),n.instigationType===q._5b.SENSOR?(0,o.jsx)("td",{style:{width:120},children:n.cursor?(0,o.jsxs)(l.x,{flex:{direction:"row",alignItems:"center",gap:8},children:[(0,o.jsx)("div",{style:{fontFamily:g.b.monospace,fontSize:"14px"},children:(0,I.$G)(n.cursor||"")}),(0,o.jsx)(X,{onClick:async()=>{i(n.cursor||""),await (0,A.B7)({message:(0,o.jsx)("div",{children:"Copied value"}),intent:"success"})},children:(0,o.jsx)(p.JO,{name:"assignment"})})]}):(0,o.jsx)(o.Fragment,{children:"—"})}):null,(0,o.jsx)("td",{children:(0,o.jsxs)(l.x,{flex:{direction:"column",gap:6},children:["runs"===t?(0,o.jsxs)(l.x,{flex:{alignItems:"center",gap:8},children:[(0,o.jsx)(j.Z,{onClick:()=>d(!0),children:1===n.runIds.length?"1 run requested":"".concat(n.runIds.length," runs requested")}),1===n.runs.length?n.runs.map(e=>(0,o.jsx)(b.Fragment,{children:(0,o.jsx)(T.RX,{run:e})},e.id)):null]}):(0,o.jsx)(l.x,{flex:{alignItems:"center",gap:8},children:(0,o.jsx)(j.Z,{onClick:()=>d(!0),children:1===n.requestedAssetMaterializationCount?"1 materialization requested":"".concat(n.requestedAssetMaterializationCount," materializations requested")})}),c||u?(0,o.jsxs)(m.YS,{children:["(",c?(0,o.jsxs)("span",{children:[c," partition",(0,v.I)(c,"","s")," created",u?",":""]}):null,u?(0,o.jsxs)("span",{children:[u," partition",(0,v.I)(u,"","s")," deleted,"]}):null,")"]}):null,(0,o.jsx)(R.X,{isOpen:a,tickId:n.tickId,tickResultType:t,instigationSelector:r,onClose:()=>{d(!1)}})]})})]})}let Q=(0,P.Ps)(Z(),T.S9,_.B,k.dY,T.vw),X=w.ZP.button.withConfig({componentId:"sc-d4278c97-0"})(["background:transparent;border:0;cursor:pointer;padding:8px;margin:-6px;outline:none;","{background-color:",";transition:background-color 100ms;}:hover ","{background-color:",";}:focus ","{background-color:",";}"],p.a1,f.md(),p.a1,f.$l(),p.a1,f.Es()),W=(0,w.ZP)(y.i).withConfig({componentId:"sc-d4278c97-1"})(["th,td{vertical-align:middle !important;}"])},57758:function(e,n,t){t.d(n,{$G:function(){return s},g6:function(){return i},sw:function(){return o}});var r=t(88257);let s=e=>e.length>100?"".concat(e.slice(0,95),"…"):e;function i(e,n){return!e.endTimestamp&&(0!==n&&e.status===r.izS.STARTED||1e3*e.timestamp<Date.now()-259200)}function o(e,n){return e.reduce((e,t)=>{if(t.type===n){var r;return e+((null===(r=t.partitionKeys)||void 0===r?void 0:r.length)||0)}return e},0)}},6750:function(e,n,t){t.d(n,{d:function(){return a}});var r=t(73235),s=t(20958),i=t(78491),o=t(48502);function l(){let e=(0,r._)(["\n  query ScheduleAssetSelectionQuery($scheduleSelector: ScheduleSelector!) {\n    scheduleOrError(scheduleSelector: $scheduleSelector) {\n      ... on Schedule {\n        id\n        assetSelection {\n          ...AutomationAssetSelectionFragment\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n"]);return l=function(){return e},e}let a=(0,s.Ps)(l(),o.z,i.B)},55546:function(e,n,t){t.d(n,{e:function(){return et}});var r=t(52322),s=t(74580),i=t(35292),o=t(43212),l=t(14934),a=t(35002),d=t(38491),c=t(90441),u=t(74188),h=t(72330),x=t(2784),p=t(47933),m=t(35505),g=t(19679),j=t(84842);let v=e=>{var n;let{metadata:t}=e;return(null==t?void 0:null===(n=t.assetKeys)||void 0===n?void 0:n.length)?(0,r.jsx)(l.x,{flex:{direction:"column",gap:2},children:t.assetKeys.map(e=>(0,r.jsx)(j.R,{path:e.path,icon:"asset"},e.path.join("/")))}):(0,r.jsx)("span",{})};var f=t(89398),y=t(20958),S=t(36803),C=t(20718);let b=e=>{let{repoAddress:n,sensor:t}=e,{permissions:{canStartSensor:s,canStopSensor:i}}=(0,S.xz)(n.location),{name:o}=t,l={...(0,C.$)(n),sensorName:o},[c,{loading:u}]=(0,y.Db)(f.Lq,{onCompleted:f.oI}),h=s&&i,x=h?'In code, a default status for "'.concat(o,'" has been set to "').concat(t.defaultStatus,'". Click here to reset the sensor status to track the status set in code.'):S.Qr;return(0,r.jsx)(a.u,{content:(0,r.jsx)("div",{style:{maxWidth:"500px",wordBreak:"break-word"},children:x}),display:"flex",children:(0,r.jsx)(d.zx,{disabled:u||!h,onClick:()=>{c({variables:{sensorSelector:l}})},children:"Reset sensor status"})})};var w=t(60918),k=t(16336),T=t(24427),E=t(88257),R=t(79059),I=t(86269),P=t(73235),A=t(92506),_=t(34147),z=t(89891),N=t(39013),O=t(79106),q=t(74159),D=t(37483),F=t(49035),$=t(1747);function M(e){let{includeTitle:n=!0,requests:t}=e,s=(0,x.useMemo)(()=>{if(!t.length)return[];let e=[];return t.forEach(n=>{let{partitionKeys:t,partitionsDefName:r,type:s}=n;null==t||t.forEach(n=>{e.push({key:n,def:r,type:s})})}),e},[t]);return s.length?(0,r.jsxs)(l.x,{flex:{direction:"column",gap:12,grow:1},children:[n?(0,r.jsxs)(l.x,{flex:{direction:"row",alignItems:"center",gap:8},children:[(0,r.jsx)(h.JO,{name:"partition"}),(0,r.jsx)(i.pm,{children:"Dynamic Partition Requests"})]}):null,(0,r.jsxs)($.i,{style:{borderRight:"1px solid ".concat(N.wL())},children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{children:"Partition"}),(0,r.jsx)("th",{children:"Partition definition"}),(0,r.jsx)("th",{children:"Requested change"})]})}),(0,r.jsx)("tbody",{children:s.map((e,n)=>{let{key:t,def:s,type:i}=e;return(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:t}),(0,r.jsx)("td",{children:s}),(0,r.jsx)("td",{children:i===E.Dq2.ADD_PARTITIONS?(0,r.jsx)(o.V,{intent:"success",children:(0,r.jsx)("span",{children:"Add Partition"})}):(0,r.jsx)(o.V,{intent:"danger",children:(0,r.jsx)("span",{children:"Delete Partition"})})})]},n)})})]})]}):null}var U=t(76562),L=t(8068),K=t(50309),Z=t(78491),B=t(99590),Y=t(71406),V=t(77851);function H(){let e=(0,P._)(["\n  mutation SensorDryRunMutation($selectorData: SensorSelector!, $cursor: String) {\n    sensorDryRun(selectorData: $selectorData, cursor: $cursor) {\n      ... on DryRunInstigationTick {\n        timestamp\n        evaluationResult {\n          cursor\n          runRequests {\n            ...RunRequestFragment\n          }\n          skipReason\n          error {\n            ...PythonErrorFragment\n          }\n          dynamicPartitionsRequests {\n            ...DynamicPartitionRequestFragment\n          }\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  fragment DynamicPartitionRequestFragment on DynamicPartitionRequest {\n    partitionKeys\n    partitionsDefName\n    type\n  }\n\n  ","\n  ","\n"]);return H=function(){return e},e}let J=e=>{let{isOpen:n,onClose:t,name:s}=e;return(0,r.jsx)(A.Vq,{isOpen:n,onClose:t,style:{width:"70vw",display:"flex"},icon:"sensors",title:s,children:(0,r.jsx)(Q,{...e})})},Q=e=>{var n;let{repoAddress:t,name:s,currentCursor:a,onClose:c,jobName:u}=e,[p]=(0,y.Db)(X),[m,j]=(0,x.useState)(a),[v,f]=(0,x.useState)(!1),[S,C]=(0,x.useState)(null),[b,w]=(0,x.useState)(null),k=(0,x.useMemo)(()=>({sensorName:s,repositoryLocationName:t.location,repositoryName:t.name}),[t,s]),T=(0,x.useCallback)(async()=>{var e,n;f(!0);let t=null===(e=(await p({variables:{selectorData:k,cursor:m}})).data)||void 0===e?void 0:e.sensorDryRun;t?(null==t?void 0:t.__typename)==="DryRunInstigationTick"?(null===(n=t.evaluationResult)||void 0===n?void 0:n.error)?C(t.evaluationResult.error):w(t):(null==t?void 0:t.__typename)==="SensorNotFoundError"?(0,L._K)({title:"Sensor not found",body:"Could not find a sensor named: ".concat(s)}):C(t):(0,Y.UT)("sensorDryRun Mutation returned no data??"),f(!1)},[p,k,m,s]),E=(0,x.useMemo)(()=>b||S?(0,r.jsxs)(l.x,{flex:{direction:"row",gap:8},children:[(0,r.jsx)(d.zx,{"data-testid":(0,V.N)("test-again"),onClick:()=>{w(null),C(null)},children:"Test again"}),(0,r.jsx)(d.zx,{intent:"primary",onClick:c,children:"Close"})]}):v?(0,r.jsx)(l.x,{flex:{direction:"row",gap:8},children:(0,r.jsx)(d.zx,{onClick:c,children:"Cancel"})}):(0,r.jsxs)(l.x,{flex:{direction:"row",gap:8},children:[(0,r.jsx)(d.zx,{onClick:c,children:"Cancel"}),(0,r.jsx)(d.zx,{onClick:T,intent:"primary","data-testid":(0,V.N)("evaluate"),children:"Evaluate"})]}),[b,S,v,c,T]),[R,I]=(0,x.useState)("Unpersisted"),[P]=(0,y.Db)(g.T),$=(0,x.useCallback)(async()=>{var e;let n=null==b?void 0:null===(e=b.evaluationResult)||void 0===e?void 0:e.cursor;n||(0,Y.UT)("Did not expect to get here"),I("Persisting");let{data:t}=await P({variables:{sensorSelector:k,cursor:n}});if((null==t?void 0:t.setSensorCursor.__typename)==="Sensor")await (0,K.B7)({message:"Cursor value updated",intent:"success"}),I("Persisted");else if(null==t?void 0:t.setSensorCursor){let e=t.setSensorCursor;await (0,K.B7)({intent:"danger",message:(0,r.jsxs)(_.Z,{direction:"row",spacing:8,children:[(0,r.jsx)("div",{children:"Could not set cursor value."}),(0,r.jsx)(z.Z,{color:N.KH(),underline:"always",onClick:()=>{(0,L._K)({title:"Python Error",body:"PythonError"===e.__typename?(0,r.jsx)(B.T9,{error:e}):"Sensor not found"})},children:"View error"})]})})}},[null==b?void 0:null===(n=b.evaluationResult)||void 0===n?void 0:n.cursor,k,P]),U=(0,x.useMemo)(()=>{if(b||S){var e,n,c,x,p,g,f;let j=null==b?void 0:null===(e=b.evaluationResult)||void 0===e?void 0:e.runRequests,v=(null==j?void 0:j.length)||0,y=!S&&0===v,C=null==b?void 0:null===(n=b.evaluationResult)||void 0===n?void 0:n.dynamicPartitionsRequests;return(0,r.jsx)(l.x,{flex:{direction:"column",gap:8},children:(0,r.jsxs)(l.x,{children:[(0,r.jsxs)(W,{children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(i.pm,{children:"Result"}),(0,r.jsx)(l.x,{flex:{grow:1,alignItems:"center"},children:(0,r.jsx)("div",{children:S?(0,r.jsx)(o.V,{intent:"danger",children:"Failed"}):v?(0,r.jsxs)(o.V,{intent:"success",children:[v," run requests"]}):(0,r.jsx)(o.V,{intent:"warning",children:"Skipped"})})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(i.pm,{children:"Used cursor value"}),(0,r.jsx)("pre",{children:(null==m?void 0:m.length)?m:"None"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(i.pm,{children:"Computed cursor value"}),(0,r.jsx)("pre",{children:(null==b?void 0:null===(x=b.evaluationResult)||void 0===x?void 0:null===(c=x.cursor)||void 0===c?void 0:c.length)?null==b?void 0:b.evaluationResult.cursor:S?"Error":"None"}),S||(null!=a?a:"")===(null!==(f=null==b?void 0:null===(p=b.evaluationResult)||void 0===p?void 0:p.cursor)&&void 0!==f?f:"")?null:(0,r.jsxs)(l.x,{flex:{direction:"row",gap:8,alignItems:"center"},children:[(0,r.jsx)(d.zx,{disabled:["Persisting","Persisted"].includes(R),loading:"Persisting"===R,onClick:$,children:(0,r.jsx)("span",{"data-testid":(0,V.N)("persist-cursor"),children:"Persisting"===R?"Persisting":"Persisted"===R?"Persisted":"Persist computed cursor value"})}),"Persisted"===R?(0,r.jsx)(h.JO,{name:"check_circle",color:N.fA()}):null]})]})]}),S?(0,r.jsx)("div",{children:(0,r.jsx)(B.T9,{error:S})}):null,y?(0,r.jsxs)("div",{children:[(0,r.jsx)(i.pm,{children:"Skip reason"}),(0,r.jsx)("div",{children:(null==b?void 0:null===(g=b.evaluationResult)||void 0===g?void 0:g.skipReason)||"No skip reason was output"})]}):null,v&&j?(0,r.jsx)(F.k,{runRequests:j,name:s,jobName:u,isJob:!0,repoAddress:t}):null,(null==C?void 0:C.length)?(0,r.jsx)("div",{style:{marginTop:"24px"},children:(0,r.jsx)(M,{requests:C})}):null]})})}return v?(0,r.jsxs)(l.x,{flex:{direction:"row",gap:8,justifyContent:"center",alignItems:"center"},children:[(0,r.jsx)(O.$,{purpose:"body-text"}),(0,r.jsx)("div",{children:"Evaluating sensor"})]}):(0,r.jsxs)(l.x,{flex:{direction:"column",gap:8},children:[(0,r.jsx)("div",{children:"Cursor"}),(0,r.jsx)(q.oi,{value:m,onChange:e=>j(e.target.value),"data-testid":(0,V.N)("cursor-input")}),""!==a&&a?null:(0,r.jsx)(l.x,{padding:{top:16,bottom:32},flex:{justifyContent:"center"},children:(0,r.jsx)(D.t,{icon:"no-results",title:"You're not using a cursor",description:(0,r.jsxs)("span",{children:["Check our"," ",(0,r.jsx)("a",{href:"https://docs.dagster.io/concepts/partitions-schedules-sensors/sensors#idempotence-and-cursors",children:"sensor documentation"})," ","to learn how to use cursors"]})})})]})},[b,S,v,a,R,$,s,u,t,m]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(A.a7,{children:(0,r.jsx)("div",{style:{minHeight:"300px"},children:U})}),(0,r.jsx)(A.cN,{topBorder:!0,children:E})]})},X=(0,y.Ps)(H(),U.s,Z.B),W=m.ZP.div.withConfig({componentId:"sc-c9698952-0"})(["display:grid;grid-template-columns:repeat(3,1fr);padding-bottom:12px;border-bottom:1px solid ",";margin-bottom:12px;","{padding-bottom:4px;display:block;}pre{margin:0;}button{margin-top:4px;}"],N.wL(),i.pm);var G=t(58905);let ee={showSeconds:!0,showTimezone:!1},en=e=>(e||(e=30),e<60||e%60)?"~".concat(e," sec"):3600===e?"~1 hour":e<3600||e%3600?"~".concat(e/60," min"):86400===e?"~1 day":e<86400||e%86400?"~".concat(e/3600," hours"):"~".concat(e/86400," days"),et=e=>{var n,t;let{sensor:m,repoAddress:j,daemonHealth:f,refreshState:y,assetSelection:C}=e,{name:P,sensorState:{status:A,ticks:_},metadata:z}=m,{permissions:N,disabledReasons:O,loading:q}=(0,S.xz)(j.location),{canUpdateSensorCursor:D}=N,[F,$]=(0,x.useState)(!1),M={sensorName:m.name,repositoryName:j.name,repositoryLocationName:j.location},U=_.length?_[0]:null,L=m.sensorState.typeSpecificData&&"SensorData"===m.sensorState.typeSpecificData.__typename&&m.sensorState.typeSpecificData.lastCursor,[K,Z]=(0,x.useState)(!1),B=A===E.ynu.RUNNING;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.m,{title:(0,r.jsxs)(i.X6,{style:{display:"flex",flexDirection:"row",gap:4},children:[(0,r.jsx)(p.rU,{to:"/automation",children:"Automation"}),(0,r.jsx)("span",{children:"/"}),P]}),icon:"sensors",tags:(0,r.jsxs)(o.V,{icon:"sensors",children:["Sensor in ",(0,r.jsx)(R.b,{repoAddress:j})]}),right:(0,r.jsxs)(l.x,{margin:{top:4},flex:{direction:"row",alignItems:"center",gap:8},children:[(0,r.jsx)(k.xi,{refreshState:y}),(0,r.jsx)(a.u,{canShow:m.sensorType!==E.dEY.STANDARD,content:"Testing not available for this sensor type",placement:"top-end",children:(0,r.jsx)(d.zx,{disabled:m.sensorType!==E.dEY.STANDARD,onClick:()=>{Z(!0)},children:"Test sensor"})})]})}),(0,r.jsx)(J,{isOpen:K,onClose:()=>{Z(!1)},currentCursor:L||"",name:m.name,repoAddress:j,jobName:(null===(t=m.targets)||void 0===t?void 0:null===(n=t[0])||void 0===n?void 0:n.pipelineName)||""}),(0,r.jsx)(c.fJ,{children:(0,r.jsxs)("tbody",{children:[m.description?(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"Description"}),(0,r.jsx)("td",{children:m.description})]}):null,(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"Latest tick"}),(0,r.jsx)("td",{children:U?(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(l.x,{flex:{direction:"row",gap:8,alignItems:"center"},style:{marginTop:"-2px"},children:[(0,r.jsx)(I.v,{timestamp:U.timestamp,timeFormat:ee}),(0,r.jsx)(G.a,{tick:U,tickResultType:"runs"})]})}):"Sensor has never run"})]}),m.nextTick&&f&&B&&(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"Next tick"}),(0,r.jsx)("td",{children:(0,r.jsx)(I.v,{timestamp:m.nextTick.timestamp,timeFormat:ee})})]}),m.targets&&m.targets.length||C?(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"Target"}),(0,r.jsx)(er,{children:(0,r.jsx)(T.p,{targets:m.targets,repoAddress:j,assetSelection:C||null,automationType:m.sensorType})})]}):null,(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:(0,r.jsx)(l.x,{flex:{alignItems:"center"},style:{height:"32px"},children:"Running"})}),(0,r.jsx)("td",{children:(0,r.jsxs)(l.x,{flex:{direction:"row",gap:12,alignItems:"center"},style:{height:"32px"},children:[(0,r.jsx)(w.c,{repoAddress:j,sensor:m}),m.canReset&&(0,r.jsx)(b,{repoAddress:j,sensor:m})]})})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"Frequency"}),(0,r.jsx)("td",{children:en(m.minIntervalSeconds)})]}),z.assetKeys&&z.assetKeys.length?(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"Monitored assets"}),(0,r.jsx)("td",{children:(0,r.jsx)(v,{metadata:z})})]}):null,m.sensorType!==E.dEY.AUTO_MATERIALIZE&&m.sensorType!==E.dEY.AUTOMATION?(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:(0,r.jsx)(l.x,{flex:{alignItems:"center"},style:{height:"32px"},children:"Cursor"})}),(0,r.jsxs)("td",{children:[(0,r.jsxs)(l.x,{flex:{direction:"row",gap:12,alignItems:"center"},children:[(0,r.jsx)("span",{style:{fontFamily:u.b.monospace,fontSize:"14px"},children:L||"None"}),(0,r.jsx)(a.u,{canShow:!D,content:O.canUpdateSensorCursor,children:(0,r.jsx)(d.zx,{icon:(0,r.jsx)(h.JO,{name:"edit"}),disabled:!D||q,onClick:()=>$(!0),children:"Edit"})})]}),(0,r.jsx)(g.x,{isOpen:F,sensorSelector:M,cursor:L||"",onClose:()=>$(!1)})]})]}):null]})})]})},er=m.ZP.td.withConfig({componentId:"sc-54ea1369-0"})(["button{line-height:20px;}"])},68856:function(e,n,t){t.d(n,{Z:function(){return Z},A:function(){return L}});var r=t(73235),s=t(52322),i=t(51484),o=t(14934),l=t(79106),a=t(39013),d=t(37483),c=t(49308),u=t(2784),h=t(7267),x=t(55546),p=t(20958),m=t(581);function g(){let e=(0,r._)(["\n  fragment SensorFragment on Sensor {\n    id\n    name\n    description\n    minIntervalSeconds\n    sensorType\n    nextTick {\n      timestamp\n    }\n    defaultStatus\n    canReset\n    sensorState {\n      id\n      ...InstigationStateFragment\n    }\n    targets {\n      pipelineName\n      solidSelection\n      mode\n    }\n    metadata {\n      assetKeys {\n        path\n      }\n    }\n  }\n\n  ","\n"]);return g=function(){return e},e}let j=(0,p.Ps)(g(),m.ai);var v=t(16629);let f=e=>{let{sensorDaemonStatus:n,assetDaemonStatus:t,...r}=e,i=n&&!1===n.healthy&&n.required,l=t&&!1==!t.healthy&&t.required;return l||i?(0,s.jsx)(o.x,{...r,children:(0,s.jsx)(v.b,{intent:"warning",title:i?l?"The sensor and asset daemons are not running":"The sensor daemon is not running":"The asset daemon is not running",description:(0,s.jsxs)("div",{children:["See the"," ",(0,s.jsx)("a",{href:"https://docs.dagster.io/deployment/dagster-daemon",target:"_blank",rel:"noreferrer",children:"dagster-daemon documentation"})," ","for more information on how to deploy the dagster-daemon process."]})})}):null};var y=t(80122),S=t(16336),C=t(71902),b=t(30916),w=t(43984),k=t(15332),T=t(22563);function E(){let e=(0,r._)(["\n  query PreviousRunsForSensorQuery($filter: RunsFilter, $cursor: String, $limit: Int) {\n    pipelineRunsOrError(filter: $filter, limit: $limit, cursor: $cursor) {\n      ... on Runs {\n        results {\n          id\n          ... on PipelineRun {\n            ...RunTableRunFragment\n          }\n        }\n      }\n    }\n  }\n\n  ","\n"]);return E=function(){return e},e}let R=e=>{let{sensor:n,repoAddress:t,highlightedIds:r,tabs:i}=e,{queryResult:o,paginationProps:l}=(0,k.l)({query:I,variables:{filter:{tags:[{key:w.H.SensorName,value:n.name},{key:w.H.RepositoryLabelTag,value:(0,T.Wg)(t)}]}},nextCursorForResult:e=>{var n;if("Runs"===e.pipelineRunsOrError.__typename)return null===(n=e.pipelineRunsOrError.results[19])||void 0===n?void 0:n.id},getResultArray:e=>(null==e?void 0:e.pipelineRunsOrError.__typename)!=="Runs"?[]:e.pipelineRunsOrError.results,pageSize:20});(0,S.C4)(o,l.hasPrevCursor?36e5:1e4);let a=o.data;if(a&&(null==a?void 0:a.pipelineRunsOrError.__typename)==="Runs"||(a=o.previousData),!a||(null==a?void 0:a.pipelineRunsOrError.__typename)!=="Runs")return null;let d=a.pipelineRunsOrError.results;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(C.A,{actionBarComponents:i,runs:d,highlightedIds:r,hideCreatedBy:!0}),(0,s.jsx)("div",{style:{paddingBottom:"16px"},children:(0,s.jsx)(y.pI,{...l})})]})},I=(0,p.Ps)(E(),b.Z);var P=t(78491),A=t(99590),_=t(69737),z=t(48502),N=t(88257),O=t(20171),q=t(4378),D=t(40782),F=t(9790),$=t(20718);function M(){let e=(0,r._)(['\n  query SensorRootQuery($sensorSelector: SensorSelector!) {\n    sensorOrError(sensorSelector: $sensorSelector) {\n      ... on Sensor {\n        id\n        ...SensorFragment\n      }\n      ...PythonErrorFragment\n    }\n    instance {\n      id\n      daemonHealth {\n        id\n        sensorDaemonStatus: daemonStatus(daemonType: "SENSOR") {\n          id\n          healthy\n          required\n        }\n        ampDaemonStatus: daemonStatus(daemonType: "ASSET") {\n          id\n          healthy\n          required\n        }\n      }\n      ...InstanceHealthFragment\n    }\n  }\n\n  ',"\n  ","\n  ","\n"]);return M=function(){return e},e}function U(){let e=(0,r._)(["\n  query SensorAssetSelectionQuery($sensorSelector: SensorSelector!) {\n    sensorOrError(sensorSelector: $sensorSelector) {\n      ... on Sensor {\n        id\n        assetSelection {\n          ...AutomationAssetSelectionFragment\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n"]);return U=function(){return e},e}let L=e=>{var n;let{repoAddress:t}=e;(0,_.Px)();let{sensorName:r}=(0,h.UO)();(0,O.j)("Sensor: ".concat(r));let m={...(0,$.$)(t),sensorName:r},[g,j]=(0,u.useState)(void 0),[v,y]=(0,u.useState)(void 0),C=(0,u.useMemo)(()=>v||g?{afterTimestamp:null==v?void 0:v[0],beforeTimestamp:null==v?void 0:v[1],statuses:g}:{},[g,v]),[b,w]=(0,q.q)((0,u.useMemo)(()=>({queryKey:"view",decode:e=>{let{view:n}=e;return"runs"===n?"runs":"evaluations"},encode:e=>({view:e,cursor:void 0,statuses:void 0})}),[])),k=(0,p.aM)(K,{variables:{sensorSelector:m},notifyOnNetworkStatusChange:!0}),T=(0,p.aM)(Z,{variables:{sensorSelector:m},notifyOnNetworkStatusChange:!0}),E=(0,S.C4)(k,S.dT),I=(0,S.C4)(T,S.dT),P=(0,S.V5)(E,I),{data:z,loading:D}=k,M=(0,s.jsx)(i.h,{activeItems:new Set([b]),buttons:[{id:"evaluations",label:"Evaluations"},{id:"runs",label:"Runs"}],onClick:e=>{w(e)}});if(!z&&D)return(0,s.jsxs)(o.x,{margin:{top:32},flex:{direction:"row",alignItems:"center",justifyContent:"center",gap:16},children:[(0,s.jsx)(l.$,{purpose:"body-text"}),(0,s.jsx)("div",{style:{color:a.$()},children:"Loading sensor…"})]});if(!z||"SensorNotFoundError"===z.sensorOrError.__typename)return(0,s.jsx)(o.x,{padding:{vertical:32},children:(0,s.jsx)(d.t,{icon:"error",title:"Could not find sensor `".concat(r,"` in definitions for `").concat(t.name,"`")})});let{sensorOrError:U}=z;if("PythonError"===U.__typename)return(0,s.jsx)(A.T9,{error:U});if("UnauthorizedError"===U.__typename)return(0,s.jsx)(h.l_,{to:"/overview/sensors"});let{instance:L}=z,B=(null===(n=T.data)||void 0===n?void 0:n.sensorOrError.__typename)==="Sensor"?T.data.sensorOrError.assetSelection:null,Y=U.sensorType===N.dEY.AUTO_MATERIALIZE||U.sensorType===N.dEY.AUTOMATION,V=L.daemonHealth.sensorDaemonStatus,H=Y?"materializations":"runs";return(0,s.jsxs)(c.T,{children:[(0,s.jsx)(x.e,{repoAddress:t,sensor:U,daemonHealth:V.healthy,refreshState:P,assetSelection:B||null}),(0,s.jsx)(f,{sensorDaemonStatus:V,padding:{vertical:16,horizontal:24}}),(0,s.jsx)(F.C,{tickResultType:H,repoAddress:t,name:U.name,...C}),(0,s.jsx)(o.x,{margin:{top:32},border:"top",children:"evaluations"===b?(0,s.jsx)(F.H,{tabs:M,tickResultType:H,repoAddress:t,name:U.name,setParentStatuses:j,setTimerange:y}):(0,s.jsx)(R,{repoAddress:t,sensor:U,tabs:M})})]})},K=(0,p.Ps)(M(),j,P.B,D.O),Z=(0,p.Ps)(U(),z.z,P.B)},49035:function(e,n,t){t.d(n,{k:function(){return g}});var r=t(52322),s=t(14934),i=t(43212),o=t(1747),l=t(39013),a=t(38491),d=t(72330),c=t(1040),u=t(81535),h=t(33847),x=t(77851),p=t(92199),m=t(10539);let g=e=>{let{runRequests:n,isJob:t,repoAddress:a,mode:d,jobName:c}=e,u=(0,p.Ux)(a),m=(0,r.jsx)("tbody",{"data-testid":(0,x.N)("table-body"),children:n.map((e,n)=>{var o;return(0,r.jsxs)("tr",{"data-testid":(0,x.N)(e.runKey||""),children:[(0,r.jsx)("td",{children:(0,r.jsx)(s.x,{flex:{alignItems:"center",gap:8},children:(0,r.jsx)(h.h,{pipelineName:null!==(o=e.jobName)&&void 0!==o?o:c,pipelineHrefContext:a,isJob:!!u&&t,showIcon:!0,size:"small"})})}),(0,r.jsx)("td",{children:(0,r.jsx)(s.x,{flex:{direction:"row",gap:8,wrap:"wrap"},children:e.tags.filter(e=>{let{key:n}=e;return!["dagster/schedule_name"].includes(n)}).map(e=>{let{key:n,value:t}=e;return(0,r.jsx)(i.V,{children:"".concat(n,": ").concat(t)},n)})})}),(0,r.jsx)("td",{children:(0,r.jsx)(j,{request:e,mode:d,jobName:c,repoAddress:a,isJob:t})})]},n)})});return(0,r.jsx)("div",{children:(0,r.jsxs)(o.i,{style:{borderRight:"1px solid ".concat(l.wL()),tableLayout:"fixed"},children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsxs)("th",{children:[t?"Job":"Pipeline"," name"]}),(0,r.jsx)("th",{children:"Tags"}),(0,r.jsx)("th",{children:"Configuration"})]})}),m]})})};function j(e){var n;let{mode:t,request:s,jobName:i,isJob:o,repoAddress:l}=e,h=(0,u.Q)(),x=null!==(n=s.jobName)&&void 0!==n?n:i,[p,g]=(0,c.aC)(l,x);return(0,r.jsx)(a.zx,{icon:(0,r.jsx)(d.JO,{name:"edit"}),onClick:()=>{g(e=>{var n;return(0,c.f0)(e,{mode:t,runConfigYaml:s.runConfigYaml,tags:s.tags,assetSelection:null===(n=s.assetSelection)||void 0===n?void 0:n.map(e=>{let{path:n}=e;return{assetKey:{path:n}}})})}),h((0,m.$U)(l,"/".concat(o?"jobs":"pipelines","/").concat(x,"/playground")))},children:"Open in Launchpad"})}},76562:function(e,n,t){t.d(n,{s:function(){return i}});var r=t(73235);function s(){let e=(0,r._)(["\n  fragment RunRequestFragment on RunRequest {\n    runConfigYaml\n    tags {\n      key\n      value\n    }\n    runKey\n    jobName\n    assetSelection {\n      path\n    }\n  }\n"]);return s=function(){return e},e}let i=(0,t(20958).Ps)(s())},58905:function(e,n,t){t.d(n,{a:function(){return g}});var r=t(52322),s=t(43212),i=t(75561),o=t(39013),l=t(35002),a=t(14934),d=t(89891),c=t(40191),u=t(92506),h=t(38491),x=t(2784),p=t(99590),m=t(88257);let g=e=>{let{tick:n,tickResultType:t,isStuckStarted:g}=e,[j,v]=(0,x.useState)(!1),f=(0,x.useMemo)(()=>{let e="materializations"===t?"materialization":"run";switch(n.status){case m.izS.STARTED:return(0,r.jsx)(s.V,{intent:"primary",icon:g?void 0:"spinner",children:g?"In progress":"Evaluating"});case m.izS.SKIPPED:let u=(0,r.jsx)(i.m,{fillColor:o.fk(),label:"materializations"===t?"0 materializations requested":"0 runs requested"});if("runKeys"in n&&n.runKeys.length){let e="".concat(n.runKeys.length," runs requested, but skipped because the runs already exist for the requested keys.");return(0,r.jsx)(l.u,{position:"right",content:e,children:u})}if("skipReason"in n&&n.skipReason)return(0,r.jsx)(l.u,{position:"right",content:n.skipReason,targetTagName:"div",children:u});return u;case m.izS.FAILURE:return(0,r.jsxs)(a.x,{flex:{direction:"row",alignItems:"center",gap:6},children:[(0,r.jsx)(s.V,{intent:"danger",children:"Failure"}),n.error?(0,r.jsx)(d.Z,{onClick:()=>{v(!0)},children:"View"}):null]});case m.izS.SUCCESS:let h="materializations"===t?n.requestedAssetMaterializationCount:n.runIds.length,x=(0,r.jsxs)(s.V,{intent:"success",children:[h," ",e,(0,c.I)(h,"","s")," requested"]});if("runKeys"in n&&n.runKeys.length>n.runIds.length){let e="".concat(n.runKeys.length," runs requested, but ").concat(n.runKeys.length-n.runIds.length," skipped because the runs already exist for those requested keys.");return(0,r.jsx)(l.u,{position:"right",content:e,children:x})}return x}},[g,n,t]);return(0,r.jsxs)(r.Fragment,{children:[f,n.error?(0,r.jsxs)(u.Vq,{isOpen:j,title:"Error",style:{width:"80vw"},children:[(0,r.jsx)(u.a7,{children:(0,r.jsx)(p.T9,{error:n.error})}),(0,r.jsx)(u.cN,{topBorder:!0,children:(0,r.jsx)(h.zx,{intent:"primary",onClick:()=>{v(!1)},children:"Close"})})]}):null]})}}}]);
//# sourceMappingURL=1445.97575c0df50a8d93.js.map