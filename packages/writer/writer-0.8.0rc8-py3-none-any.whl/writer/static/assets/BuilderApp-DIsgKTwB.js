function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["./BuilderEmbeddedCodeEditor-C6SqfeCg.js","./toggleHighContrast-Ckx2vIIx.js","./index-9bD4GQJ-.js","./index-DUchNlcU.css","./toggleHighContrast-DZe_BnT2.css","./BuilderEmbeddedCodeEditor-DfQG1Jha.css","./BuilderSettings-9SIeoB4B.js","./marked.esm-273vDTCT.js","./instancePath-BsbOTTI8.js","./BuilderSettings-DnoXTBMR.css","./BuilderSidebar-DIM7oDlx.js","./BuilderSidebar-BbAeoz17.css","./ComponentRenderer-Dpj1FkGO.js","./ComponentRenderer-DkWSlX3q.css","./BuilderInstanceTracker-BkJ7CK5U.js","./BuilderInstanceTracker-BMktodl2.css","./BuilderInsertionOverlay-BYjDajZV.js","./BuilderInsertionOverlay-C2m7KHIN.css","./BuilderInsertionLabel-BhAPuFA-.js","./BuilderInsertionLabel-BQrPp9vH.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
import{d as V,i as A,a as T,c as U,r as R,o as n,e as p,f as e,q as B,x as S,J as h,y as j,z as Z,_ as O,K as Pe,b as P,L as o,t as C,C as ye,F,s as ue,T as Me,m as I,M as ge,n as D,W as ce,N as be,k as Ee,O as Re,l as xe,v as He,D as Ke,P as Ce,w as Se,Q as te,R as Ue,S as Ve,U as oe,I as ne,V as Oe,X as Ne,Y as ze,Z as Fe}from"./index-9bD4GQJ-.js";import{marked as Ge}from"./marked.esm-273vDTCT.js";const We="data:image/svg+xml,%3csvg%20width='48'%20height='48'%20viewBox='0%200%2048%2048'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20width='48'%20height='48'%20rx='24'%20fill='black'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M34.0187%2028.9434L37.2255%2015.7128H32.7659L30.812%2015.7128L34.0187%2028.9434Z'%20fill='white'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M25.4266%2015.7128H20.967L25.4266%2034.1126L27.4085%2034.1126H31.8681L27.4085%2015.7128H25.4266L25.4266%2015.7128Z'%20fill='white'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M17.5635%2015.7129H13.1038L13.1039%2015.7132H11.1219L15.5816%2034.113H20.0413L20.0412%2034.1126H22.0231L17.5635%2015.7129Z'%20fill='white'/%3e%3c/svg%3e",Be=a=>(j("data-v-5e82af99"),a=a(),Z(),a),je={class:"BuilderSwitcher"},Ze=Be(()=>e("i",{class:"icon material-symbols-outlined"}," brush ",-1)),Xe=Be(()=>e("i",{class:"icon material-symbols-outlined"}," linked_services ",-1)),qe=Be(()=>e("i",{class:"icon material-symbols-outlined"}," preview ",-1)),Ye=V({__name:"BuilderSwitcher",setup(a){const _=A(T.core),d=A(T.builderManager),v=U(()=>_.featureFlags.value.includes("workflows"));let s=R(null);const c=u=>{const l=d.getMode();l!=u&&(s.value=u,d.setMode(u),u=="preview"&&d.openPanels.clear(),(u=="preview"||l=="workflows"||u=="workflows")&&d.setSelection(null))},r=U(()=>d.getMode());return(u,l)=>(n(),p("div",je,[e("div",{"data-automation-action":"set-mode-ui",class:S({active:r.value=="ui"}),onClick:l[0]||(l[0]=f=>c("ui"))},[Ze,B(" UI ")],2),v.value?(n(),p("div",{key:0,"data-automation-action":"set-mode-workflows",class:S({active:r.value=="workflows"}),onClick:l[1]||(l[1]=f=>c("workflows"))},[Xe,B(" Workflows ")],2)):h("",!0),e("div",{class:S({active:r.value=="preview"}),"data-automation-action":"set-mode-preview",onClick:l[2]||(l[2]=f=>c("preview"))},[qe,B(" Preview ")],2)]))}}),Je=O(Ye,[["__scopeId","data-v-5e82af99"]]),Qe=a=>(j("data-v-018fe22b"),a=a(),Z(),a),et={class:"main"},tt={class:"titleContainer"},ot={key:0,class:"material-symbols-outlined"},nt=["title"],st=Qe(()=>e("i",{class:"material-symbols-outlined"},"close",-1)),at=[st],lt={class:"slotContainer"},it={key:0,class:"actionContainer"},rt=["onClick"],dt=V({__name:"BuilderModal",props:{modalTitle:{},icon:{},closeAction:{},menuActions:{}},setup(a){const _=a,{modalTitle:d,icon:v,closeAction:s,menuActions:c}=Pe(_),r=u=>{u.key=="Escape"&&s.value.fn()};return(u,l)=>{var f,k;return n(),P(Me,{to:"#modal"},[e("div",{class:"BuilderModal",tabindex:"-1",onKeydown:r},[e("div",et,[e("div",tt,[o(v)?(n(),p("i",ot,C(o(v)),1)):h("",!0),e("h2",null,C(o(d)),1),e("button",{title:((f=o(s))==null?void 0:f.desc)??"Close",onClick:l[0]||(l[0]=(...E)=>o(s).fn&&o(s).fn(...E))},at,8,nt)]),e("div",lt,[ye(u.$slots,"default",{},void 0,!0)]),((k=o(c))==null?void 0:k.length)>0?(n(),p("div",it,[(n(!0),p(F,null,ue(o(c),(E,i)=>(n(),p("button",{key:i,onClick:E.fn},C(E.desc),9,rt))),128))])):h("",!0)])],32)])}}}),De=O(dt,[["__scopeId","data-v-018fe22b"]]),ct={class:"BuilderStateExplorer"},ut=V({__name:"BuilderStateExplorer",setup(a){const _=A(T.core);return(d,v)=>(n(),p("div",ct,[I(ge,{data:o(_).userState.value,"enable-copy-to-json":!0,"initial-depth":1},null,8,["data"])]))}}),pt=O(ut,[["__scopeId","data-v-0f05b6aa"]]),Ae=a=>(j("data-v-829d74a0"),a=a(),Z(),a),_t={class:"BuilderLogIndicator"},vt={key:0,class:"number error"},mt=Ae(()=>e("div",{class:"icon"},[e("i",{class:"material-symbols-outlined"},"error")],-1)),ft={key:1,class:"number info"},ht=Ae(()=>e("div",{class:"icon"},[e("i",{class:"material-symbols-outlined"},"info")],-1)),yt=V({__name:"BuilderLogIndicator",setup(a){const _=A(T.builderManager),d=U(()=>_.getLogEntries().reduce((v,s)=>(s.type in v||(v[s.type]=0),v[s.type]++,v),{}));return(v,s)=>(n(),p("div",_t,[d.value.error>0?(n(),p("div",vt,[mt,B(" "+C(d.value.error??0),1)])):h("",!0),d.value.info>0?(n(),p("div",ft,[ht,B(" "+C(d.value.info??0),1)])):h("",!0)]))}}),Te=O(yt,[["__scopeId","data-v-829d74a0"]]),ie=a=>(j("data-v-2fa93d66"),a=a(),Z(),a),gt={class:"BuilderHeader"},bt=ie(()=>e("img",{src:We,alt:"Writer Framework logo"},null,-1)),wt={class:"undoRedo"},kt=["title","disabled"],$t=ie(()=>e("i",{class:"material-symbols-outlined"}," undo ",-1)),Ct=["title","disabled"],St=ie(()=>e("i",{class:"material-symbols-outlined"}," redo ",-1)),Et=ie(()=>e("i",{class:"material-symbols-outlined"}," mystery ",-1)),Bt=ie(()=>e("div",{class:"gap"},null,-1)),It=ie(()=>e("i",{class:"material-symbols-outlined"}," code ",-1)),Pt=["title"],xt={key:0},Dt=V({__name:"BuilderHeader",setup(a){const _=R(null),d=A(T.core),v=A(T.builderManager),{undo:s,redo:c,getUndoRedoSnapshot:r}=be(d,v),u=R(!1),l=U(()=>r()),f=()=>{let m="";switch(d.syncHealth.value){case"offline":m+="Offline. Not syncing.";break;case"connected":m+="Online. Syncing...";break;case"idle":m+="Sync not initialised.";break;case"suspended":m+="Sync suspended.";break}return d.featureFlags.value.length>0&&(m+=` Feature flags: ${d.featureFlags.value.join(", ")}`),m};function k(){u.value=!0}function E(m){if(v.openPanels.has(m)){v.openPanels.delete(m);return}v.openPanels.add(m)}const i={desc:"Close",fn:()=>{u.value=!1}};return(m,y)=>(n(),p("div",gt,[bt,I(Je),e("div",wt,[e("button",{class:"undo",title:l.value.isUndoAvailable?`Undo ${l.value.undoDesc}`:"Nothing to undo",disabled:!l.value.isUndoAvailable,onClick:y[0]||(y[0]=L=>o(s)())},[$t,B(" Undo ")],8,kt),e("button",{class:"redo",title:l.value.isRedoAvailable?`Redo ${l.value.redoDesc}`:"Nothing to redo",disabled:!l.value.isRedoAvailable,onClick:y[1]||(y[1]=L=>o(c)())},[St,B(" Redo ")],8,Ct)]),e("div",null,[e("button",{onClick:k},[Et,B(" State Explorer ")]),u.value?(n(),P(De,{key:0,"close-action":i,icon:"mystery","modal-title":"State Explorer"},{default:D(()=>[I(pt)]),_:1})):h("",!0)]),Bt,I(ce,{variant:"primary",size:"small",class:S(["panelToggler",{active:o(v).openPanels.has("code")}]),"data-automation-action":"toggle-code-panel",onClick:y[2]||(y[2]=L=>E("code"))},{default:D(()=>[It,B(" Code ")]),_:1},8,["class"]),I(ce,{variant:"primary",size:"small",class:S(["panelToggler",{active:o(v).openPanels.has("log")}]),"data-automation-action":"toggle-log-panel",title:"Toggle Log panel",onClick:y[3]||(y[3]=L=>E("log"))},{default:D(()=>[B(" Log "),I(Te,{class:"indicator"})]),_:1},8,["class"]),e("div",{class:S(["syncHealth",o(d).syncHealth.value]),title:f()},[e("i",{ref_key:"syncHealthIcon",ref:_,class:"material-symbols-outlined icon"},"sync",512),o(d).syncHealth.value=="offline"?(n(),p("span",xt,"Offline")):h("",!0)],10,Pt)]))}}),At=O(Dt,[["__scopeId","data-v-2fa93d66"]]),Tt={class:"text"},Lt=200,Mt=4,Rt=V({__name:"BuilderTooltip",setup(a){const _=R(null),d=R(!1),v=R(null);let s=null,c=null;const r=R("top"),u=R({top:0,left:0});async function l(){v.value=s.dataset.writerTooltip;const i=s.dataset.writerTooltipGap?parseInt(s.dataset.writerTooltipGap):Mt;d.value=!0,await Ce();const{x:m,y,width:L,height:X}=s.getBoundingClientRect(),{width:Y,height:J}=_.value.getBoundingClientRect();switch(r.value){case"top":u.value.top=y-J-i,u.value.left=m+L/2-Y/2;break;case"right":u.value.top=y+X/2-J/2,u.value.left=m+L+i;break;case"left":u.value.left=m-Y-i,u.value.top=y+X/2-J/2;break;case"bottom":u.value.top=y+X+i,u.value.left=m+L/2-Y/2;break}}function f(i){const y=i.target.closest("[data-writer-tooltip]");if(y)s!==y&&(d.value=!1);else{d.value=!1,s=null;return}s=y,r.value=s.dataset.writerTooltipPlacement??"top",setTimeout(()=>k(y),Lt)}async function k(i){i===s&&(c==null||c.disconnect(),c=new MutationObserver(l),c.observe(s,{attributes:!0,attributeFilter:["data-writer-tooltip","data-writer-tooltip-placement"]}),l())}const E=U(()=>{const{top:i,left:m}=u.value;return{top:`${i}px`,left:`${m}px`}});return Ee(()=>{document.documentElement.addEventListener("mouseover",f)}),Re(()=>{document.documentElement.removeEventListener("mouseover",f),c==null||c.disconnect()}),(i,m)=>xe((n(),p("div",{ref_key:"rootEl",ref:_,class:"BuilderTooltip",style:Ke(E.value)},[e("div",{class:S(["arrow",r.value])},null,2),e("div",Tt,C(v.value),1)],4)),[[He,d.value]])}}),Ht=O(Rt,[["__scopeId","data-v-273d531a"]]),q=a=>(j("data-v-46d8a672"),a=a(),Z(),a),Kt=["draggable","data-writer-id"],Ut={key:0,class:"type"},Vt=q(()=>e("i",{class:"material-symbols-outlined"},"add",-1)),Ot=[Vt],Nt=["data-writer-tooltip"],zt=q(()=>e("i",{class:"material-symbols-outlined"},"arrow_upward",-1)),Ft=[zt],Gt=["data-writer-tooltip"],Wt=q(()=>e("i",{class:"material-symbols-outlined"},"arrow_downward",-1)),jt=[Wt],Zt=["data-writer-tooltip"],Xt=q(()=>e("i",{class:"material-symbols-outlined"},"cut",-1)),qt=[Xt],Yt=["data-writer-tooltip"],Jt=q(()=>e("i",{class:"material-symbols-outlined"},"content_copy",-1)),Qt=[Jt],eo=["data-writer-tooltip"],to=q(()=>e("i",{class:"material-symbols-outlined"},"content_paste",-1)),oo=[to],no=["data-writer-tooltip"],so=q(()=>e("i",{class:"material-symbols-outlined"},"move_up",-1)),ao=[so],lo=q(()=>e("i",{class:"material-symbols-outlined"},"delete",-1)),io=[lo],ro={key:2,class:"addDialog"},co={id:"validChildrenTypes"},uo=["value"],po=V({__name:"BuilderComponentShortcuts",props:{componentId:{},instancePath:{}},setup(a){const _=A(T.core),d=A(T.builderManager),{createAndInsertComponent:v,moveComponentUp:s,moveComponentDown:c,cutComponent:r,pasteComponent:u,copyComponent:l,isAddAllowed:f,isCopyAllowed:k,isCutAllowed:E,isGoToParentAllowed:i,isPasteAllowed:m,isDeleteAllowed:y,isDraggingAllowed:L,getEnabledMoves:X,removeComponentSubtree:Y,goToParent:J}=be(_,d),we=a,{componentId:w,instancePath:ke}=Pe(we),Q=R(!1),b=R(null),pe=U(()=>{const x=_.getContainableTypes(w.value),g={};return x.map(N=>{const z=_.getComponentDefinition(N);g[N]=z}),g});function $e(x){const g=x.target.value,N=Object.entries(pe.value).filter(([H,ee])=>ee.name==g);if(N.length==0)return;const z=N[0][0];Q.value=!1,v(z,w.value)}function _e(){var z,H;const x=_.getComponentById(w.value);if(!x)return;const{up:g,down:N}=X(w.value);b.value={isAddEnabled:f(w.value),componentTypeName:(z=_.getComponentDefinition(x.type))==null?void 0:z.name,toolkit:(H=_.getComponentDefinition(x.type))==null?void 0:H.toolkit,isMoveUpEnabled:g,isMoveDownEnabled:N,isCopyEnabled:k(w.value),isCutEnabled:E(w.value),isPasteEnabled:m(w.value),isGoToParentEnabled:i(w.value),isDeleteEnabled:y(w.value),isDraggable:L(w.value)}}return Se(()=>{var x;return(x=_.getComponentById(w.value))==null?void 0:x.position},async x=>{typeof x>"u"||x===null||_e()},{flush:"post"}),Ee(()=>{_e()}),(x,g)=>{var N,z,H,ee,ae,re,ve,me,fe,he,de;return b.value?(n(),p("div",{key:0,draggable:(N=b.value)==null?void 0:N.isDraggable,class:"BuilderComponentShortcuts","data-writer-id":o(w)},[((z=b.value)==null?void 0:z.toolkit)!=="workflows"?(n(),p("div",Ut,C((H=b.value)==null?void 0:H.componentTypeName),1)):h("",!0),Q.value?h("",!0):(n(),p(F,{key:1},[e("div",{class:S(["actionButton",{enabled:(ee=b.value)==null?void 0:ee.isAddEnabled}]),"data-writer-tooltip":"Add child","data-writer-tooltip-gap":"-4",onClick:g[0]||(g[0]=K=>{var t;return(t=b.value)!=null&&t.isAddEnabled?Q.value=!Q.value:void 0})},Ot,2),e("div",{class:S(["actionButton",{enabled:(ae=b.value)==null?void 0:ae.isMoveUpEnabled}]),"data-writer-tooltip-gap":"-4","data-writer-tooltip":`Move up (${o(te)()}↑)`,onClick:g[1]||(g[1]=K=>{var t;return(t=b.value)!=null&&t.isMoveUpEnabled?o(s)(o(w)):void 0})},Ft,10,Nt),e("div",{class:S(["actionButton",{enabled:(re=b.value)==null?void 0:re.isMoveDownEnabled}]),"data-writer-tooltip":`Move down (${o(te)()}↓)`,"data-writer-tooltip-gap":"-4",onClick:g[2]||(g[2]=K=>{var t;return(t=b.value)!=null&&t.isMoveDownEnabled?o(c)(o(w)):void 0})},jt,10,Gt),e("div",{class:S(["actionButton",{enabled:(ve=b.value)==null?void 0:ve.isCutEnabled}]),"data-writer-tooltip":`Cut (${o(te)()}X)`,"data-writer-tooltip-gap":"-4",onClick:g[3]||(g[3]=K=>{var t;return(t=b.value)!=null&&t.isCutEnabled?o(r)(o(w)):void 0})},qt,10,Zt),e("div",{class:S(["actionButton",{enabled:(me=b.value)==null?void 0:me.isCopyEnabled}]),"data-writer-tooltip":`Copy (${o(te)()}C)`,"data-writer-tooltip-gap":"-4",onClick:g[4]||(g[4]=K=>{var t;return(t=b.value)!=null&&t.isCopyEnabled?o(l)(o(w)):void 0})},Qt,10,Yt),e("div",{class:S(["actionButton",{enabled:(fe=b.value)==null?void 0:fe.isPasteEnabled}]),"data-writer-tooltip":`Paste (${o(te)()}V)`,"data-writer-tooltip-gap":"-4",onClick:g[5]||(g[5]=K=>{var t;return(t=b.value)!=null&&t.isPasteEnabled?o(u)(o(w)):void 0})},oo,10,eo),e("div",{class:S(["actionButton",{enabled:(he=b.value)==null?void 0:he.isGoToParentEnabled}]),"data-writer-tooltip":`Go to parent (${o(te)()}Shift ↑)`,"data-writer-tooltip-gap":"-4",onClick:g[6]||(g[6]=K=>{var t;return(t=b.value)!=null&&t.isGoToParentEnabled?o(J)(o(w),o(ke)):void 0})},ao,10,no),e("div",{class:S(["actionButton delete",{enabled:(de=b.value)==null?void 0:de.isDeleteEnabled}]),"data-automation-action":"delete","data-writer-tooltip":"Delete (Del)","data-writer-tooltip-gap":"-4",onClick:g[7]||(g[7]=K=>{var t;return(t=b.value)!=null&&t.isDeleteEnabled?o(Y)(o(w)):void 0})},io,2)],64)),Q.value?(n(),p("div",ro,[e("input",{type:"text",list:"validChildrenTypes",placeholder:"Component...",onChange:$e},null,32),e("datalist",co,[(n(!0),p(F,null,ue(pe.value,(K,t)=>(n(),p("option",{key:t,value:K.name},C(K.name),9,uo))),128))])])):h("",!0)],8,Kt)):h("",!0)}}}),_o=O(po,[["__scopeId","data-v-46d8a672"]]),vo={class:"BuilderAsyncLoader"},mo=V({__name:"BuilderAsyncLoader",setup(a){return(_,d)=>(n(),p("div",vo,[I(Ue)]))}}),se=O(mo,[["__scopeId","data-v-bb820549"]]),fo=a=>(j("data-v-b1705b51"),a=a(),Z(),a),ho={class:"header"},yo={class:"title"},go={class:"titleCompanion"},bo=fo(()=>e("div",{class:"gap"},null,-1)),wo={class:"actionsCompanion"},ko={class:"material-symbols-outlined"},$o={class:"content"},Co=V({__name:"BuilderPanel",props:{name:{},actions:{}},setup(a){const _=a;function d(s){const c=Ve(s);_.actions.forEach(r=>{if(!r.keyboardShortcut)return;const{key:u,modifierKey:l}=r.keyboardShortcut;u.toLowerCase()==s.key&&(!c&&l||(s.preventDefault(),r.callback()))})}function v(s){if(!s)return"";let c=" (";return s.modifierKey&&(c+=te()),c+=s.key,c+=")",c}return(s,c)=>(n(),p("div",{class:"BuilderPanel",onKeydown:d},[e("div",ho,[e("div",yo,C(s.name),1),e("div",go,[ye(s.$slots,"titleCompanion",{},void 0,!0)]),bo,e("div",wo,[ye(s.$slots,"actionsCompanion",{},void 0,!0)]),(n(!0),p(F,null,ue(s.actions,(r,u)=>(n(),P(ce,{key:u,"data-writer-tooltip":r.name+v(r.keyboardShortcut),"data-writer-tooltip-placement":"left",variant:"neutral",size:"unpadded",disabled:r.isDisabled,onClick:r.callback},{default:D(()=>[e("i",ko,C(r.icon),1)]),_:2},1032,["data-writer-tooltip","disabled","onClick"]))),128))]),e("div",$o,[ye(s.$slots,"default",{},void 0,!0)])],32))}}),Le=O(Co,[["__scopeId","data-v-b1705b51"]]),So=V({__name:"BuilderCodePanel",setup(a){const _=oe({loader:()=>ne(()=>import("./BuilderEmbeddedCodeEditor-C6SqfeCg.js"),__vite__mapDeps([0,1,2,3,4,5]),import.meta.url),loadingComponent:se}),d=A(T.core),v=A(T.builderManager),s=R(d.runCode.value),c=R(null),r=R(!1),u=U(()=>[{icon:"save",name:"Save and run",keyboardShortcut:{modifierKey:!0,key:"S"},callback:()=>{k()},isDisabled:r.value},{icon:"close",name:"Close",keyboardShortcut:{modifierKey:!1,key:"Escape"},callback:()=>{v.openPanels.delete("code")}}]);Se(d.runCode,E=>{s.value=E}),Se(d.sessionTimestamp,()=>{r.value=!1,!f()&&(c.value=null)});function l(){c.value=null}function f(){return d.runCode.value==s.value}async function k(){c.value={type:"neutral",message:"Processing..."};try{r.value=!0,await d.sendCodeSaveRequest(s.value)}catch{c.value={type:"error",message:"Code hasn't been saved."},r.value=!1;return}c.value={type:"success",message:"Saved."}}return(E,i)=>(n(),P(Le,{name:"Code",actions:u.value,class:"BuilderCodePanel"},{actionsCompanion:D(()=>[c.value?(n(),p("div",{key:0,class:S(["status",c.value.type])},C(c.value.message),3)):h("",!0)]),default:D(()=>[(n(),P(o(_),{key:Array.from(o(v).openPanels).join("-"),modelValue:s.value,"onUpdate:modelValue":[i[0]||(i[0]=m=>s.value=m),l],variant:"full",language:"python",disabled:r.value},null,8,["modelValue","disabled"]))]),_:1},8,["actions"]))}}),Eo=O(So,[["__scopeId","data-v-728194ca"]]),G=a=>(j("data-v-bde13b2b"),a=a(),Z(),a),Bo={class:"BuilderLogWorkflowExecution"},Io=G(()=>e("div",{class:"marker top"},null,-1)),Po=G(()=>e("div",{class:"marker bottom"},null,-1)),xo={class:"item"},Do={class:"name"},Ao=G(()=>e("i",{class:"material-symbols-outlined"},"jump_to_element",-1)),To={class:"outcome"},Lo={class:"result"},Mo={class:"detailsModalContent"},Ro=G(()=>e("h2",null,"Result",-1)),Ho=G(()=>e("p",null," The value resulting of the execution of this block. This value is added to the execution environment of the direct dependents of this block. There, it's accessible via @{result}. ",-1)),Ko={class:"data","data-automation-key":"result"},Uo={key:1,class:"nothing"},Vo=G(()=>e("h2",null,"Execution environment",-1)),Oo=G(()=>e("p",null," The following values were made available to this block during execution time. These values are accessible via the same template syntax i.e. @{my_var}, as state elements. ",-1)),No={class:"data"},zo={key:1,class:"nothing"},Fo=G(()=>e("h2",null,"Return value",-1)),Go=G(()=>e("p",null," The value being returned, which is used to determine the result of 'Run workflow' blocks and 'Chat completion' tool calls. ",-1)),Wo={class:"data","data-automation-key":"return-value"},jo=G(()=>e("i",{class:"material-symbols-outlined"},"find_in_page",-1)),Zo={class:"time"},Xo={key:0,class:"message markdown"},qo=V({__name:"BuilderLogWorkflowExecution",props:{executionLog:{}},setup(a){const _=A(T.core),d=A(T.builderManager),{goToComponentParentPage:v}=be(_,d),s=a,c=R(null),r=U(()=>({summary:[...s.executionLog.summary.map(k=>({...k,component:_.getComponentById(k.componentId),componentDef:_.getComponentById(k.componentId)?_.getComponentDefinition(_.getComponentById(k.componentId).type):void 0}))]}));async function u(f){d.setMode("workflows"),await Ce(),v(f),await Ce(),d.setSelection(f,void 0,"log")}function l(f){return f<0?"N/A":f<.1?"< 0.1s":`${f.toFixed(2)}s`}return(f,k)=>{const E=Oe("dompurify-html");return n(),p("div",Bo,[(n(!0),p(F,null,ue(r.value.summary,(i,m)=>{var y,L;return n(),p("div",{key:m,class:"row"},[Io,Po,e("div",xo,[e("div",Do,[B(C(i.componentDef.name)+" ",1),I(ce,{variant:"neutral",size:"unpadded",title:"Go to node",onClick:X=>u(i.componentId)},{default:D(()=>[Ao]),_:2},1032,["onClick"])]),e("div",To,[e("div",{class:S(["ball",(y=i.componentDef.outs[i.outcome])==null?void 0:y.style])},null,2),B(" "+C(((L=i.componentDef.outs[i.outcome])==null?void 0:L.name)??i.outcome),1)]),e("div",Lo,[c.value==m?(n(),P(De,{key:0,"close-action":{desc:"Close",fn:()=>c.value=null},icon:"find_in_page","modal-title":"Details"},{default:D(()=>[e("div",Mo,[e("div",null,[Ro,Ho,e("div",Ko,[i!=null&&i.result?(n(),P(ge,{key:0,data:i.result,"initial-depth":1,class:"data"},null,8,["data"])):(n(),p("div",Uo,"No result."))])]),e("div",null,[Vo,Oo,e("div",No,[i!=null&&i.executionEnvironment?(n(),P(ge,{key:0,data:i.executionEnvironment,"initial-depth":1,class:"data"},null,8,["data"])):(n(),p("div",zo," Empty execution environment. "))])]),e("div",null,[Fo,Go,e("div",Wo,[i!=null&&i.returnValue?(n(),P(ge,{key:0,data:i.returnValue,"initial-depth":1,class:"data"},null,8,["data"])):(n(),p(F,{key:1},[B(" No return value. ")],64))])])])]),_:2},1032,["close-action"])):h("",!0),i.result||i.returnValue||i.executionEnvironment?(n(),P(ce,{key:1,variant:"secondary",size:"small",onClick:()=>c.value=m},{default:D(()=>[jo,B(" Details ")]),_:2},1032,["onClick"])):h("",!0)]),e("div",Zo,C(l(i.executionTimeInSeconds)),1),i.message?xe((n(),p("div",Xo,null,512)),[[E,o(Ge).parse(i.message)]]):h("",!0)])])}),128))])}}}),Yo=O(qo,[["__scopeId","data-v-bde13b2b"]]),Jo=a=>(j("data-v-c3ff338e"),a=a(),Z(),a),Qo={key:0,class:"entries"},en={class:"icon"},tn={key:0,class:"material-symbols-outlined"},on={key:1,class:"material-symbols-outlined"},nn={class:"title"},sn={class:"time"},an={class:"content"},ln={key:0,class:"codeContainer"},rn={key:1,class:"emptyMessage"},dn=Jo(()=>e("div",null,[B(" Exceptions and other relevant messages will be shown here."),e("br"),B("Also, you can include print statements in event handlers to create log entries. ")],-1)),cn=[dn],un=V({__name:"BuilderLogPanel",setup(a){const _=A(T.builderManager),d=[{icon:"delete",name:"Clear log",callback:()=>{_.clearLogEntries()},keyboardShortcut:{modifierKey:!0,key:"L"}},{icon:"close",name:"Close",callback:()=>{_.openPanels.delete("log")},keyboardShortcut:{modifierKey:!1,key:"Escape"}}],v=U(()=>_.getLogEntries());return(s,c)=>(n(),P(Le,{name:"Log",actions:d,tabindex:"0",class:"BuilderLogPanel"},{titleCompanion:D(()=>[I(Te)]),default:D(()=>[v.value.length>0?(n(),p("div",Qo,[(n(!0),p(F,null,ue(v.value,(r,u)=>(n(),p(F,{key:u},[e("div",{class:S(["entry",r.type])},[e("div",en,[r.type=="error"?(n(),p("i",tn,"error")):(n(),p("i",on,"info"))]),e("div",nn,C(r.title)+C(r.repeated>0?` · Repeated ${r.repeated} times`:""),1),e("div",sn,C(r.timestampReceived.toLocaleTimeString()),1),e("div",an,[B(C(r.message)+" ",1),r.code?(n(),p("div",ln,[e("code",null,C(r.code),1)])):h("",!0)])],2),r.workflowExecution?(n(),P(Yo,{key:0,"execution-log":r.workflowExecution},null,8,["execution-log"])):h("",!0)],64))),128))])):h("",!0),v.value.length==0?(n(),p("div",rn,cn)):h("",!0)]),_:1}))}}),pn=O(un,[["__scopeId","data-v-c3ff338e"]]),_n=a=>(j("data-v-f5ef9638"),a=a(),Z(),a),vn={class:"BuilderApp",tabindex:"-1"},mn={class:"mainGrid"},fn={key:0,class:"sidebar"},hn={class:"builderMain"},yn={class:"rendererWrapper"},gn={class:"builderPanels"},bn=_n(()=>e("div",{id:"modal"},null,-1)),wn=V({__name:"BuilderApp",setup(a){Ne(t=>({"66c5ae26":o(l).getMode()!=="preview"?"var(--builderSidebarWidth)":"0px","0b666a70":re.value>0?"var(--builderPanelHeight)":"0px",c8a416c6:o(l).getMode()=="workflows"?"72px":"20px","0d940afd":re.value}));const _=oe({loader:()=>ne(()=>import("./BuilderSettings-9SIeoB4B.js"),__vite__mapDeps([6,2,3,7,8,9]),import.meta.url),loadingComponent:se}),d=oe({loader:()=>ne(()=>import("./BuilderSidebar-DIM7oDlx.js"),__vite__mapDeps([10,2,3,11]),import.meta.url),loadingComponent:se}),v=oe({loader:()=>ne(()=>import("./ComponentRenderer-Dpj1FkGO.js"),__vite__mapDeps([12,2,3,8,13]),import.meta.url),loadingComponent:se}),s=oe({loader:()=>ne(()=>import("./BuilderInstanceTracker-BkJ7CK5U.js"),__vite__mapDeps([14,2,3,15]),import.meta.url),loadingComponent:se}),c=oe({loader:()=>ne(()=>import("./BuilderInsertionOverlay-BYjDajZV.js"),__vite__mapDeps([16,2,3,17]),import.meta.url),loadingComponent:se}),r=oe({loader:()=>ne(()=>import("./BuilderInsertionLabel-BhAPuFA-.js"),__vite__mapDeps([18,2,3,19]),import.meta.url),loadingComponent:se}),u=A(T.core),l=A(T.builderManager),{candidateId:f,candidateInstancePath:k,isCandidacyConfirmed:E,dropComponent:i,assignInsertionCandidacy:m,removeInsertionCandidacy:y}=ze(u),{createAndInsertComponent:L,undo:X,redo:Y,moveComponent:J,moveComponentUp:we,moveComponentDown:w,cutComponent:ke,isPasteAllowed:Q,isCopyAllowed:b,isCutAllowed:pe,isDeleteAllowed:$e,isGoToParentAllowed:_e,pasteComponent:x,copyComponent:g,removeComponentSubtree:N,goToParent:z}=be(u,l),H=U(()=>l.getMode()),ee=U(()=>{var t;return(t=l.getSelection())==null?void 0:t.componentId}),ae=U(()=>{var t;return(t=l.getSelection())==null?void 0:t.instancePath}),re=U(()=>l.openPanels.size);function ve(t){if(t.key=="Escape"){l.setSelection(null);return}const M=Fe()?t.metaKey:t.ctrlKey;if(t.target.closest("textarea, input, select"))return;if(t.key=="z"&&M){t.preventDefault(),X();return}if(t.key=="y"&&M){t.preventDefault(),Y();return}if(!l.isSelectionActive())return;const{componentId:$,instancePath:le}=l.getSelection();if(t.key=="Delete"){if(!$e($))return;N($);return}if(t.key=="ArrowUp"&&M&&t.shiftKey){if(!_e($))return;z($,le);return}if(t.key=="ArrowUp"&&M){we($);return}if(t.key=="ArrowDown"&&M){w($);return}if(t.key=="v"&&M){if(!Q($))return;x($);return}if(t.key=="c"&&M){if(!b($))return;g($);return}if(t.key=="x"&&M){if(!pe($))return;ke($);return}}function me(t){H.value!=="preview"&&m(t)}function fe(t){if(H.value==="preview")return;l.setSelection(null);const M=i(t);if(!M)return;const{draggedType:W,draggedId:$,parentId:le,position:Ie}=M;$?J($,le,Ie):L(W,le,Ie)}function he(t){if(H.value==="preview"||t.target.closest("[data-writer-unselectable]"))return;const W=t.target.closest("[data-writer-id]");if(!W)return;const $=W.dataset.writerId,le=W.dataset.writerInstancePath;$!==l.getSelectedId()&&(t.preventDefault(),t.stopPropagation(),l.setSelection($,le,"click"))}const de=t=>{if(H.value==="preview")return;const W=t.target.closest("[data-writer-id]").dataset.writerId,{type:$}=u.getComponentById(W);t.dataTransfer.setData(`application/json;writer=${$},${W}`,"{}")};function K(t){l.setSelection(null),y(t)}return Ee(()=>{document.addEventListener("keydown",ve)}),(t,M)=>(n(),p("div",vn,[e("div",mn,[I(At,{class:"builderHeader"}),H.value!=="preview"?(n(),p("div",fn,[I(o(d))])):h("",!0),e("div",hn,[e("div",yn,[I(o(v),{class:S(["componentRenderer",{settingsOpen:o(l).isSelectionActive()}]),onDragover:me,onDragstart:de,onDragend:K,onDrop:fe,onClickCapture:he},null,8,["class"])]),o(l).isSelectionActive()?(n(),p("div",{key:ee.value??"noneSelected",class:"settingsBar"},[e("div",null,[I(o(_))])])):h("",!0)]),e("div",gn,[o(l).openPanels.has("code")?(n(),P(Eo,{key:0})):h("",!0),o(l).openPanels.has("log")?(n(),P(pn,{key:1})):h("",!0)])]),H.value!=="preview"?(n(),p(F,{key:0},[o(l).isSelectionActive()?(n(),P(o(s),{key:ae.value,class:"shortcutsTracker","prevent-settings-bar-overlap":!0,"instance-path":ae.value,"vertical-offset-pixels":-48,"data-writer-cage":"",onDragstart:de,onDragend:K},{default:D(()=>[I(_o,{"component-id":ee.value,"instance-path":ae.value},null,8,["component-id","instance-path"])]),_:1},8,["instance-path"])):h("",!0),o(f)&&!o(E)?(n(),p(F,{key:1},[(n(),P(o(s),{key:o(k),class:"insertionOverlayTracker","is-off-bounds-allowed":!0,"instance-path":o(k),"match-size":!0},{default:D(()=>[I(o(c))]),_:1},8,["instance-path"])),(n(),P(o(s),{key:o(k),class:"insertionLabelTracker","instance-path":o(k),"vertical-offset-pixels":-48},{default:D(()=>[I(o(r),null,{default:D(()=>[B(C(o(u).getComponentDefinition(o(u).getComponentById(o(f)).type).name),1)]),_:1})]),_:1},8,["instance-path"]))],64)):h("",!0)],64)):h("",!0),bn,I(Ht,{id:"tooltip"})]))}}),kn=O(wn,[["__scopeId","data-v-f5ef9638"]]),Sn=Object.freeze(Object.defineProperty({__proto__:null,default:kn},Symbol.toStringTag,{value:"Module"}));export{De as B,se as a,Sn as b};
