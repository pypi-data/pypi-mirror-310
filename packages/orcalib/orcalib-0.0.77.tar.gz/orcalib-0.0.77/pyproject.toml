[tool.poetry]
name = "orcalib"
version = "0.0.77"                              # will be set by CI before building the wheel from the git tag
description = "client library for Orca DB"
license = "Apache-2.0"
authors = ["Orca DB Inc. <dev-rel@orcadb.ai>"]
readme = "README.md"
packages = [{ include = "orcalib" }]

[tool.poetry.dependencies]
python = "^3.10,<3.13"
orca_common = "0.1.4"
datasets = "^3.1.0"
lancedb = "^0.15.0"
matplotlib = "^3.9.2"
more-itertools = "^10.5.0"
msgpack-python = "^0.5.6"
orjson = "^3.10.11"
peewee = "^3.17.7"
pillow = "^11.0.0"
plotly = "^5.24.1"
prettytable = "^3.12.0"
pymilvus = "^2.4.9"
scikit-learn = "^1.5.2"
# These versions are pinned to resolve an issue with SentenceTransformerTrainer.compute_loss
# https://discuss.huggingface.co/t/typeerror-sentencetransformertrainer-compute-loss-got-an-unexpected-keyword-argument-num-items-in-batch/114298
sentence-transformers = "3.1.1"
transformers = { extras = ["torch"], version = "4.45.2" }
einops = "^0.8.0"

[tool.poetry.group.dev]
optional = true

[tool.poetry.group.dev.dependencies]
orca_common = { path = "../orca_common", develop = true }
ipython = "^8.29.0"
pyright = "^1.1.0"
pytest = "^7.4.2"
pytest-env = "^1.0.1"

[build-system]
requires = ["poetry-core"]
build-backend = "poetry.core.masonry.api"

[tool.black]
line-length = 120
target-version = ['py310']

[tool.isort]
profile = "black"
known_first_party = ["orcalib", "orca_common"]

[tool.pytest]
testpaths = ["orcalib/rac/**test.py", "tests/"]

[tool.pytest.ini_options]
log_cli = true
log_cli_level = "INFO"
log_cli_format = "%(asctime)s [%(levelname)s] %(message)s"
log_cli_date_format = "%Y-%m-%d %H:%M:%S"
filterwarnings = ["ignore::DeprecationWarning"]
