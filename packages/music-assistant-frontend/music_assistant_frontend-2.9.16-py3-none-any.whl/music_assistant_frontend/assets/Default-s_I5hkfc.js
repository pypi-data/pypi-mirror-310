import{_ as da,g as ca,V as ma}from"./DrawerNavigation.vue_vue_type_style_index_0_scoped_42f910eb_lang-Cb1MuTPH.js";import{_ as x}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{M as fe,_ as va,i as Ae,a as It,b as pa,V as ya,g as _t}from"./VCheckbox-09hulYIT.js";import{e as ce,_ as Ue}from"./eventbus-B1FqU8Ma.js";import{d as z,r as M,o as Le,a as Xe,b as g,M as ae,P as gt,c as u,e as $,w as y,f as m,u as e,$ as ke,g as Q,h as _,i as Z,t as P,j as C,F as U,s as t,A as fa,p as le,k as ie,l as ha,m as _a,n as We,q as St,v as X,x as I,y as Ge,z as Qt,B as Ce,C as Tt,D as H,E as Bt,G as je,H as Mt,I as ga,J as Be,K as ne,L as ba,N as qt,O as wa,Q as zt,R as ka,S as Pa,T as Ca,U as Me,V as L,W as E,X as Te,Y as Fe,Z as De,_ as qe,a0 as R,a1 as he,a2 as W,a3 as ze,a4 as te,a5 as J,a6 as ge,a7 as Va,a8 as Et,a9 as $a,aa as Ee,ab as Re,ac as Ia,ad as bt,ae as At,af as Sa,ag as Qa,ah as Ta,ai as wt,aj as Ba,ak as Ma,al as qa,am as za}from"./index-daC-2ZJk.js";import{T as Ea,V as Ne}from"./Toolbar-Dhk3Ksr9.js";import{V as Oe,a as Ve,u as xe}from"./VList-8n21ZlQT.js";import{V as se,m as be,a as Aa,b as Qe,u as La,c as oe,d as Lt,e as Wt,f as Rt,g as Ht,h as Wa,i as Ut,j as Ke,k as Ft,l as Dt,n as Nt,o as Ot,p as Ra,q as Ha,r as Ua,s as $e,t as Fa,v as Da,M as Na,w as A,x as Je,y as Oa,z as Ya}from"./VListItem-pK5S0aIW.js";import{V as Ie}from"./VCard-mAz7Y-VQ.js";import{V as Yt}from"./VDialog-BINLdENu.js";import{V as Xa,a as Ga}from"./VInfiniteScroll-BkimMVps.js";import{u as ja,m as Xt,a as Gt,b as xa,c as Ka}from"./layout-Duih1ET2.js";import{f as Ja,a as Za,s as el,m as tl,u as al,b as ll,V as Ze,c as jt}from"./VMenu-DVqF3YlC.js";import{m as il,V as kt,a as ol}from"./VCheckboxBtn-jt6ftUKR.js";import{V as xt,a as sl,b as nl,c as rl}from"./VExpansionPanels-DLFDVb_x.js";import{B as ee}from"./Button-3km1d1Og.js";import{L as ul}from"./ListItem-CGGJfPGv.js";import{V as dl}from"./VToolbar-Cf2te3zf.js";import{V as Pe,a as ye}from"./VCardText-Ci9lya7y.js";import{V as cl}from"./VVirtualScroll-DtUUxTLt.js";const ml=x(da,[["__scopeId","data-v-42f910eb"]]),vl={class:"media-thumb"},pl={style:{"margin-left":"-10px","padding-right":"5px"}},yl=z({__name:"AddToPlaylistDialog",setup(l){const a=M(!1),s=M([]),o=M([]),n=M(),i=M([]);Le(()=>{ce.on("playlistdialog",async h=>{a.value=!0,i.value=h.items,n.value=h.parentItem,await d()}),Xe(()=>{ce.off("playlistdialog")})});const d=async function(){s.value=[],o.value=[];const h=await g.getLibraryPlaylists(),p=i.value.length?i.value[0]:void 0;for(const v of h){if(!v.provider_mappings.filter(w=>w.available).length||!v.is_editable||n.value&&n.value.media_type===ae.PLAYLIST&&v.item_id===n.value.item_id)continue;const V=g.providers[v.provider_mappings[0].provider_instance];V&&(V.domain=="builtin"||V.is_streaming_provider||p!=null&&p.provider_mappings.filter(w=>w.provider_instance==V.instance_id).length)&&s.value.push(v)}for(const v of Object.values(g.providers))v.supported_features.includes(gt.PLAYLIST_CREATE)&&v.supported_features.includes(gt.PLAYLIST_TRACKS_EDIT)&&(v.domain=="builtin"||v.is_streaming_provider||p!=null&&p.provider_mappings.filter(V=>V.provider_instance==v.instance_id).length)&&o.value.push(v.instance_id)},c=async function(h){if(i.value[0].media_type===ae.TRACK)g.addPlaylistTracks(h.item_id,i.value.map(v=>v.uri));else if(i.value[0].media_type===ae.ALBUM){var p=await g.getAlbumTracks(i.value[0].item_id,i.value[0].provider);g.addPlaylistTracks(h.item_id,p.map(v=>v.uri))}r(),t.activeAlert={type:fa.INFO,message:ke("background_task_added"),persistent:!1}},f=async function(h){const p=prompt(ke("new_playlist_name"));if(!p)return;const v=await g.createPlaylist(p,h);c(v)},r=function(){a.value=!1};return(h,p)=>(u(),$(Yt,{modelValue:a.value,"onUpdate:modelValue":[p[0]||(p[0]=v=>a.value=v),p[1]||(p[1]=v=>{e(t).dialogActive=v})],fullscreen:"",transition:"dialog-bottom-transition"},{default:y(()=>[m(Ie,null,{default:y(()=>[m(Ea,{icon:"mdi-playlist-plus",title:e(ke)("add_playlist"),"menu-items":[{label:"close",icon:"mdi-close",action:r}]},null,8,["title","menu-items"]),m(Oe),p[4]||(p[4]=Q("br",null,null,-1)),m(Ve,null,{default:y(()=>[(u(!0),_(U,null,Z(s.value,v=>(u(),_("div",{key:v.item_id},[m(se,{onClick:V=>c(v)},{prepend:y(()=>[Q("div",vl,[m(fe,{item:v,size:50},null,8,["item"])])]),title:y(()=>[Q("div",null,P(v.name),1)]),subtitle:y(()=>[Q("div",null,P(v.owner),1)]),append:y(()=>[v.provider_mappings?(u(),$(Ue,{key:0,domain:v.provider_mappings[0].provider_domain,size:20},null,8,["domain"])):C("",!0)]),_:2},1032,["onClick"])]))),128)),p[2]||(p[2]=Q("div",{style:{height:"30px"}},null,-1)),m(Oe),p[3]||(p[3]=Q("div",{style:{height:"30px"}},null,-1)),(u(!0),_(U,null,Z(o.value,v=>(u(),_("div",{key:v},[m(se,{onClick:V=>f(v)},{prepend:y(()=>[Q("div",pl,[m(Ue,{domain:e(g).providers[v].domain,size:50},null,8,["domain"])])]),title:y(()=>[Q("div",null,P(e(ke)("new_playlist")),1)]),subtitle:y(()=>[Q("div",null,P(e(ke)("create_playlist_on",[e(g).providers[v].name])),1)]),append:y(()=>[m(Ue,{domain:e(g).providers[v].domain,size:20},null,8,["domain"])]),_:2},1032,["onClick"])]))),128))]),_:1})]),_:1})]),_:1},8,["modelValue"]))}}),fl=x(yl,[["__scopeId","data-v-a7c53a67"]]),hl=x(va,[["__scopeId","data-v-85c6bb69"]]),_l=le({scrollable:Boolean,...be(),...Aa(),...Qe({tag:"main"})},"VMain"),gl=ie()({name:"VMain",props:_l(),setup(l,a){let{slots:s}=a;const{dimensionStyles:o}=La(l),{mainStyles:n}=ja(),{ssrBootStyles:i}=xe();return oe(()=>m(l.tag,{class:["v-main",{"v-main--scrollable":l.scrollable},l.class],style:[n.value,i.value,o.value,l.style]},{default:()=>{var d,c;return[l.scrollable?m("div",{class:"v-main__scroller"},[(d=s.default)==null?void 0:d.call(s)]):(c=s.default)==null?void 0:c.call(s)]}})),{}}}),bl=z({__name:"View",setup(l){return(a,s)=>{const o=ha("router-view");return u(),$(gl,{id:"cont",class:"overflow-y-auto",style:{height:"0px"}},{default:y(()=>{var n,i,d;return[e(t).navigationMenuStyle=="vertical"?(u(),$(ml,{key:0})):C("",!0),m(o,null,{default:y(({Component:c})=>[(u(),$(_a(c)))]),_:1}),m(fl),m(hl),m(Xa,{"model-value":e(t).activeAlert!==void 0,color:((n=e(t).activeAlert)==null?void 0:n.type)||"grey",text:(i=e(t).activeAlert)==null?void 0:i.message,"close-on-content-click":"",position:"sticky",timeout:(d=e(t).activeAlert)!=null&&d.persistent?-1:5e3,"z-index":"999999",style:{"z-index":"999999"},"onUpdate:modelValue":s[0]||(s[0]=()=>e(t).activeAlert=void 0)},null,8,["model-value","color","text","timeout"])]}),_:1})}}}),wl=le({baseColor:String,bgColor:String,color:String,grow:Boolean,mode:{type:String,validator:l=>!l||["horizontal","shift"].includes(l)},height:{type:[Number,String],default:56},active:{type:Boolean,default:!0},...Lt(),...be(),...Wt(),...Rt(),...Ht(),...Xt({name:"bottom-navigation"}),...Qe({tag:"header"}),...Wa({selectedClass:"v-btn--selected"}),...We()},"VBottomNavigation"),kl=ie()({name:"VBottomNavigation",props:wl(),emits:{"update:active":l=>!0,"update:modelValue":l=>!0},setup(l,a){let{slots:s}=a;const{themeClasses:o}=St(),{borderClasses:n}=Ut(l),{backgroundColorClasses:i,backgroundColorStyles:d}=Ke(X(l,"bgColor")),{densityClasses:c}=Ft(l),{elevationClasses:f}=Dt(l),{roundedClasses:r}=Nt(l),{ssrBootStyles:h}=xe(),p=I(()=>Number(l.height)-(l.density==="comfortable"?8:0)-(l.density==="compact"?16:0)),v=Ge(l,"active",l.active),{layoutItemStyles:V}=Gt({id:l.name,order:I(()=>parseInt(l.order,10)),position:I(()=>"bottom"),layoutSize:I(()=>v.value?p.value:0),elementSize:p,active:v,absolute:X(l,"absolute")});return Ot(l,Ra),Qt({VBtn:{baseColor:X(l,"baseColor"),color:X(l,"color"),density:X(l,"density"),stacked:I(()=>l.mode!=="horizontal"),variant:"text"}},{scoped:!0}),oe(()=>m(l.tag,{class:["v-bottom-navigation",{"v-bottom-navigation--active":v.value,"v-bottom-navigation--grow":l.grow,"v-bottom-navigation--shift":l.mode==="shift"},o.value,i.value,n.value,c.value,f.value,r.value,l.class],style:[d.value,V.value,{height:Ce(p.value)},h.value,l.style]},{default:()=>[s.default&&m("div",{class:"v-bottom-navigation__content"},[s.default()])]})),{}}}),et=Symbol.for("vuetify:v-tabs"),Pl=le({fixed:Boolean,sliderColor:String,hideSlider:Boolean,direction:{type:String,default:"horizontal"},...Tt(Ha({selectedClass:"v-tab--selected",variant:"text"}),["active","block","flat","location","position","symbol"])},"VTab"),_e=ie()({name:"VTab",props:Pl(),setup(l,a){let{slots:s,attrs:o}=a;const{textColorClasses:n,textColorStyles:i}=Ua(l,"sliderColor"),d=M(),c=M(),f=I(()=>l.direction==="horizontal"),r=I(()=>{var p,v;return((v=(p=d.value)==null?void 0:p.group)==null?void 0:v.isSelected.value)??!1});function h(p){var V,w;let{value:v}=p;if(v){const B=(w=(V=d.value)==null?void 0:V.$el.parentElement)==null?void 0:w.querySelector(".v-tab--selected .v-tab__slider"),D=c.value;if(!B||!D)return;const K=getComputedStyle(B).color,O=B.getBoundingClientRect(),G=D.getBoundingClientRect(),b=f.value?"x":"y",k=f.value?"X":"Y",T=f.value?"right":"bottom",q=f.value?"width":"height",F=O[b],j=G[b],N=F>j?O[T]-G[T]:O[b]-G[b],re=Math.sign(N)>0?f.value?"right":"bottom":Math.sign(N)<0?f.value?"left":"top":"center",ue=(Math.abs(N)+(Math.sign(N)<0?O[q]:G[q]))/Math.max(O[q],G[q])||0,de=O[q]/G[q]||0,we=1.5;Za(D,{backgroundColor:[K,"currentcolor"],transform:[`translate${k}(${N}px) scale${k}(${de})`,`translate${k}(${N/we}px) scale${k}(${(ue-1)/we+1})`,"none"],transformOrigin:Array(3).fill(re)},{duration:225,easing:el})}}return oe(()=>{const p=$e.filterProps(l);return m($e,H({symbol:et,ref:d,class:["v-tab",l.class],style:l.style,tabindex:r.value?0:-1,role:"tab","aria-selected":String(r.value),active:!1},p,o,{block:l.fixed,maxWidth:l.fixed?300:void 0,"onGroup:selected":h}),{...s,default:()=>{var v;return m(U,null,[((v=s.default)==null?void 0:v.call(s))??l.text,!l.hideSlider&&m("div",{ref:c,class:["v-tab__slider",n.value],style:i.value},null)])}})}),Ja({},d)}}),Cl=l=>{const{touchstartX:a,touchendX:s,touchstartY:o,touchendY:n}=l,i=.5,d=16;l.offsetX=s-a,l.offsetY=n-o,Math.abs(l.offsetY)<i*Math.abs(l.offsetX)&&(l.left&&s<a-d&&l.left(l),l.right&&s>a+d&&l.right(l)),Math.abs(l.offsetX)<i*Math.abs(l.offsetY)&&(l.up&&n<o-d&&l.up(l),l.down&&n>o+d&&l.down(l))};function Vl(l,a){var o;const s=l.changedTouches[0];a.touchstartX=s.clientX,a.touchstartY=s.clientY,(o=a.start)==null||o.call(a,{originalEvent:l,...a})}function $l(l,a){var o;const s=l.changedTouches[0];a.touchendX=s.clientX,a.touchendY=s.clientY,(o=a.end)==null||o.call(a,{originalEvent:l,...a}),Cl(a)}function Il(l,a){var o;const s=l.changedTouches[0];a.touchmoveX=s.clientX,a.touchmoveY=s.clientY,(o=a.move)==null||o.call(a,{originalEvent:l,...a})}function Sl(){let l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const a={touchstartX:0,touchstartY:0,touchendX:0,touchendY:0,touchmoveX:0,touchmoveY:0,offsetX:0,offsetY:0,left:l.left,right:l.right,up:l.up,down:l.down,start:l.start,move:l.move,end:l.end};return{touchstart:s=>Vl(s,a),touchend:s=>$l(s,a),touchmove:s=>Il(s,a)}}function Ql(l,a){var c;const s=a.value,o=s!=null&&s.parent?l.parentElement:l,n=(s==null?void 0:s.options)??{passive:!0},i=(c=a.instance)==null?void 0:c.$.uid;if(!o||!i)return;const d=Sl(a.value);o._touchHandlers=o._touchHandlers??Object.create(null),o._touchHandlers[i]=d,Bt(d).forEach(f=>{o.addEventListener(f,d[f],n)})}function Tl(l,a){var i,d;const s=(i=a.value)!=null&&i.parent?l.parentElement:l,o=(d=a.instance)==null?void 0:d.$.uid;if(!(s!=null&&s._touchHandlers)||!o)return;const n=s._touchHandlers[o];Bt(n).forEach(c=>{s.removeEventListener(c,n[c])}),delete s._touchHandlers[o]}const Kt={mounted:Ql,unmounted:Tl},Jt=Symbol.for("vuetify:v-window"),Zt=Symbol.for("vuetify:v-window-group"),ea=le({continuous:Boolean,nextIcon:{type:[Boolean,String,Function,Object],default:"$next"},prevIcon:{type:[Boolean,String,Function,Object],default:"$prev"},reverse:Boolean,showArrows:{type:[Boolean,String],validator:l=>typeof l=="boolean"||l==="hover"},touch:{type:[Object,Boolean],default:void 0},direction:{type:String,default:"horizontal"},modelValue:null,disabled:Boolean,selectedClass:{type:String,default:"v-window-item--active"},mandatory:{type:[Boolean,String],default:"force"},...be(),...Qe(),...We()},"VWindow"),Pt=ie()({name:"VWindow",directives:{Touch:Kt},props:ea(),emits:{"update:modelValue":l=>!0},setup(l,a){let{slots:s}=a;const{themeClasses:o}=je(l),{isRtl:n}=Mt(),{t:i}=ga(),d=Ot(l,Zt),c=M(),f=I(()=>n.value?!l.reverse:l.reverse),r=Be(!1),h=I(()=>{const b=l.direction==="vertical"?"y":"x",T=(f.value?!r.value:r.value)?"-reverse":"";return`v-window-${b}${T}-transition`}),p=Be(0),v=M(void 0),V=I(()=>d.items.value.findIndex(b=>d.selected.value.includes(b.id)));ne(V,(b,k)=>{const T=d.items.value.length,q=T-1;T<=2?r.value=b<k:b===q&&k===0?r.value=!0:b===0&&k===q?r.value=!1:r.value=b<k}),ba(Jt,{transition:h,isReversed:r,transitionCount:p,transitionHeight:v,rootRef:c});const w=I(()=>l.continuous||V.value!==0),B=I(()=>l.continuous||V.value!==d.items.value.length-1);function D(){w.value&&d.prev()}function K(){B.value&&d.next()}const O=I(()=>{const b=[],k={icon:n.value?l.nextIcon:l.prevIcon,class:`v-window__${f.value?"right":"left"}`,onClick:d.prev,"aria-label":i("$vuetify.carousel.prev")};b.push(w.value?s.prev?s.prev({props:k}):m($e,k,null):m("div",null,null));const T={icon:n.value?l.prevIcon:l.nextIcon,class:`v-window__${f.value?"left":"right"}`,onClick:d.next,"aria-label":i("$vuetify.carousel.next")};return b.push(B.value?s.next?s.next({props:T}):m($e,T,null):m("div",null,null)),b}),G=I(()=>l.touch===!1?l.touch:{...{left:()=>{f.value?D():K()},right:()=>{f.value?K():D()},start:k=>{let{originalEvent:T}=k;T.stopPropagation()}},...l.touch===!0?{}:l.touch});return oe(()=>qt(m(l.tag,{ref:c,class:["v-window",{"v-window--show-arrows-on-hover":l.showArrows==="hover"},o.value,l.class],style:l.style},{default:()=>{var b,k;return[m("div",{class:"v-window__container",style:{height:v.value}},[(b=s.default)==null?void 0:b.call(s,{group:d}),l.showArrows!==!1&&m("div",{class:"v-window__controls"},[O.value])]),(k=s.additional)==null?void 0:k.call(s,{group:d})]}}),[[wa("touch"),G.value]])),{group:d}}}),Bl=le({...Tt(ea(),["continuous","nextIcon","prevIcon","showArrows","touch","mandatory"])},"VTabsWindow"),Ml=ie()({name:"VTabsWindow",props:Bl(),emits:{"update:modelValue":l=>!0},setup(l,a){let{slots:s}=a;const o=zt(et,null),n=Ge(l,"modelValue"),i=I({get(){var d;return n.value!=null||!o?n.value:(d=o.items.value.find(c=>o.selected.value.includes(c.id)))==null?void 0:d.value},set(d){n.value=d}});return oe(()=>{const d=Pt.filterProps(l);return m(Pt,H({_as:"VTabsWindow"},d,{modelValue:i.value,"onUpdate:modelValue":c=>i.value=c,class:["v-tabs-window",l.class],style:l.style,mandatory:!1,touch:!1}),s)}),{}}}),ta=le({reverseTransition:{type:[Boolean,String],default:void 0},transition:{type:[Boolean,String],default:void 0},...be(),...Fa(),...tl()},"VWindowItem"),Ct=ie()({name:"VWindowItem",directives:{Touch:Kt},props:ta(),emits:{"group:selected":l=>!0},setup(l,a){let{slots:s}=a;const o=zt(Jt),n=Da(l,Zt),{isBooted:i}=xe();if(!o||!n)throw new Error("[Vuetify] VWindowItem must be used inside VWindow");const d=Be(!1),c=I(()=>i.value&&(o.isReversed.value?l.reverseTransition!==!1:l.transition!==!1));function f(){!d.value||!o||(d.value=!1,o.transitionCount.value>0&&(o.transitionCount.value-=1,o.transitionCount.value===0&&(o.transitionHeight.value=void 0)))}function r(){var w;d.value||!o||(d.value=!0,o.transitionCount.value===0&&(o.transitionHeight.value=Ce((w=o.rootRef.value)==null?void 0:w.clientHeight)),o.transitionCount.value+=1)}function h(){f()}function p(w){d.value&&Pa(()=>{!c.value||!d.value||!o||(o.transitionHeight.value=Ce(w.clientHeight))})}const v=I(()=>{const w=o.isReversed.value?l.reverseTransition:l.transition;return c.value?{name:typeof w!="string"?o.transition.value:w,onBeforeEnter:r,onAfterEnter:f,onEnterCancelled:h,onBeforeLeave:r,onAfterLeave:f,onLeaveCancelled:h,onEnter:p}:!1}),{hasContent:V}=al(l,n.isSelected);return oe(()=>m(Na,{transition:v.value,disabled:!i.value},{default:()=>{var w;return[qt(m("div",{class:["v-window-item",n.selectedClass.value,l.class],style:l.style},[V.value&&((w=s.default)==null?void 0:w.call(s))]),[[ka,n.isSelected.value]])]}})),{groupItem:n}}}),ql=le({...ta()},"VTabsWindowItem"),zl=ie()({name:"VTabsWindowItem",props:ql(),setup(l,a){let{slots:s}=a;return oe(()=>{const o=Ct.filterProps(l);return m(Ct,H({_as:"VTabsWindowItem"},o,{class:["v-tabs-window-item",l.class],style:l.style}),s)}),{}}});function El(l){return l?l.map(a=>Ca(a)?a:{text:a,value:a}):[]}const Al=le({alignTabs:{type:String,default:"start"},color:String,fixedTabs:Boolean,items:{type:Array,default:()=>[]},stacked:Boolean,bgColor:String,grow:Boolean,height:{type:[Number,String],default:void 0},hideSlider:Boolean,sliderColor:String,...il({mandatory:"force",selectedClass:"v-tab-item--selected"}),...Wt(),...Qe()},"VTabs"),Ye=ie()({name:"VTabs",props:Al(),emits:{"update:modelValue":l=>!0},setup(l,a){let{attrs:s,slots:o}=a;const n=Ge(l,"modelValue"),i=I(()=>El(l.items)),{densityClasses:d}=Ft(l),{backgroundColorClasses:c,backgroundColorStyles:f}=Ke(X(l,"bgColor")),{scopeId:r}=ll();return Qt({VTab:{color:X(l,"color"),direction:X(l,"direction"),stacked:X(l,"stacked"),fixed:X(l,"fixedTabs"),sliderColor:X(l,"sliderColor"),hideSlider:X(l,"hideSlider")}}),oe(()=>{const h=kt.filterProps(l),p=!!(o.window||l.items.length>0);return m(U,null,[m(kt,H(h,{modelValue:n.value,"onUpdate:modelValue":v=>n.value=v,class:["v-tabs",`v-tabs--${l.direction}`,`v-tabs--align-tabs-${l.alignTabs}`,{"v-tabs--fixed-tabs":l.fixedTabs,"v-tabs--grow":l.grow,"v-tabs--stacked":l.stacked},d.value,c.value,l.class],style:[{"--v-tabs-height":Ce(l.height)},f.value,l.style],role:"tablist",symbol:et},r,s),{default:()=>{var v;return[((v=o.default)==null?void 0:v.call(o))??i.value.map(V=>{var w;return((w=o.tab)==null?void 0:w.call(o,{item:V}))??m(_e,H(V,{key:V.text,value:V.value}),{default:o[`tab.${V.value}`]?()=>{var B;return(B=o[`tab.${V.value}`])==null?void 0:B.call(o,{item:V})}:void 0})})]}}),p&&m(Ml,H({modelValue:n.value,"onUpdate:modelValue":v=>n.value=v,key:"tabs-window"},r),{default:()=>{var v;return[i.value.map(V=>{var w;return((w=o.item)==null?void 0:w.call(o,{item:V}))??m(zl,{value:V.value},{default:()=>{var B;return(B=o[`item.${V.value}`])==null?void 0:B.call(o,{item:V})}})}),(v=o.window)==null?void 0:v.call(o)]}})])}),{}}}),Ll={class:"menuButton"},Wl={class:"menuButton"},Rl={class:"menuButton"},Hl=z({__name:"BottomNavigation",props:{height:{}},setup(l){const a=ca(),s=I(()=>{for(const o of a)if(Me.currentRoute.value.path.startsWith(o.path))return!L("tablet")&&o.isLibraryNode?"library":o.label;return""});return(o,n)=>(u(),$(kl,{height:o.height,grow:"",elevation:"15",style:{"border-top":"1px solid #20202035"}},{default:y(()=>[e(L)("tablet")?(u(),$(Ye,{key:0,stacked:"",grow:"","show-arrows":!1,"model-value":s.value,color:"accent","center-active":""},{default:y(()=>[(u(!0),_(U,null,Z(e(a),i=>(u(),$(_e,{key:i.label,to:i.path,value:i.label},{default:y(()=>[m(A,{size:"xx-large"},{default:y(()=>[E(P(i.icon),1)]),_:2},1024),Q("span",Ll,P(o.$t(i.label)),1)]),_:2},1032,["to","value"]))),128))]),_:1},8,["model-value"])):(u(),$(Ye,{key:1,stacked:"",grow:"","show-arrows":!1,"model-value":s.value,color:"accent"},{default:y(()=>[(u(!0),_(U,null,Z(e(a).filter(i=>!i.isLibraryNode),i=>(u(),$(_e,{key:i.label,to:i.path,value:i.label},{default:y(()=>[m(A,{size:"xx-large"},{default:y(()=>[E(P(i.icon),1)]),_:2},1024),Q("span",Wl,P(o.$t(i.label)),1)]),_:2},1032,["to","value"]))),128)),m(Ze,null,{activator:y(({props:i})=>[m(_e,H({key:"library"},i,{value:"library"}),{default:y(()=>[m(A,{size:"xx-large"},{default:y(()=>n[0]||(n[0]=[E("mdi-bookshelf")])),_:1}),Q("span",Rl,P(o.$t("library")),1)]),_:2},1040)]),default:y(()=>[m(Ve,null,{default:y(()=>[(u(!0),_(U,null,Z(e(a).filter(i=>i.isLibraryNode),i=>(u(),$(se,{key:i.label,title:o.$t(i.label),"prepend-icon":i.icon,to:i.path},null,8,["title","prepend-icon","to"]))),128))]),_:1})]),_:1})]),_:1},8,["model-value"]))]),_:1},8,["height"]))}}),Ul={style:{width:"auto"}},Fl={key:0,style:{width:"100%"}},Dl={key:0,class:"time-text-row"},Nl={class:"text-caption time-text-right"},Ol=z({__name:"PlayerTimeline",props:{showLabels:{type:Boolean,default:!1}},setup(l){const a=M(!1),s=M(!0),o=M(!1),n=M(0),i=M(0),d=I(()=>t.curQueueItem?a.value?`-${Te(t.curQueueItem.duration-f.value)}`:`${Te(f.value)}`:"0:00"),c=I(()=>{var v;if(!t.curQueueItem||!t.curQueueItem.duration||((v=t.curQueueItem.media_item)==null?void 0:v.media_type)==ae.RADIO)return"";const p=t.curQueueItem.duration;return Te(p)}),f=I(()=>o.value?(i.value=n.value,n.value):t.activePlayerQueue?t.activePlayerQueue.elapsed_time:0);ne(f,p=>{o.value||(n.value=p)});const r=function(){o.value=!0},h=()=>{o.value=!1,!o.value&&t.activePlayer&&g.playerCommandSeek(t.activePlayer.player_id,Math.round(i.value))};return(p,v)=>{var V;return u(),_("div",Ul,[e(t).activePlayerQueue?(u(),_("div",Fl,[m(xt,{modelValue:n.value,"onUpdate:modelValue":v[0]||(v[0]=w=>n.value=w),disabled:!e(t).curQueueItem||!e(t).curQueueItem.media_item||((V=e(t).curQueueItem.media_item)==null?void 0:V.media_type)!=e(ae).TRACK,style:{width:"100%"},min:0,max:e(t).curQueueItem&&e(t).curQueueItem.duration,"hide-details":"","track-size":2,"thumb-size":s.value?0:10,onTouchstart:v[1]||(v[1]=w=>s.value=!1),onTouchend:v[2]||(v[2]=w=>s.value=!0),onMouseenter:v[3]||(v[3]=w=>s.value=!1),onMouseleave:v[4]||(v[4]=w=>s.value=!0),onStart:r,onEnd:h},null,8,["modelValue","disabled","max","thumb-size"]),p.showLabels?(u(),_("div",Dl,[Q("div",{class:"text-caption time-text-left",onClick:v[5]||(v[5]=w=>a.value?a.value=!1:a.value=!0)},P(d.value),1),Q("div",Nl,P(c.value),1)])):C("",!0)])):C("",!0)])}}}),aa=x(Ol,[["__scopeId","data-v-e32beba8"]]),Yl=z({__name:"ResponsiveIcon",props:{width:{default:void 0},height:{default:void 0},staticWidth:{default:void 0},staticHeight:{default:void 0},maxWidth:{default:void 0},maxHeight:{default:void 0},minWidth:{default:"24px"},minHeight:{default:"24px"},icon:{default:void 0},type:{default:"icon"},color:{default:void 0},disabled:{type:Boolean},badge:{type:Boolean,default:void 0}},emits:["click"],setup(l,{emit:a}){const s=()=>{if(o.value){const i=o.value.offsetWidth,d=o.value.offsetHeight,c=Math.min(i,d);n.value.$el.style.fontSize=`${c}px`}},o=M(),n=M();return Le(()=>{s(),window.addEventListener("resize",s)}),Xe(()=>{window.removeEventListener("resize",s)}),(i,d)=>(u(),_("div",{ref_key:"responsiveIconHolder",ref:o,class:qe([i.type=="btn"&&!i.disabled?"responsive-icon-holder-btn":"responsive-icon-holder"]),style:R({width:i.staticWidth?i.staticWidth:i.width,height:i.staticWidth?i.staticWidth:i.height,maxHeight:i.staticHeight?i.staticHeight:i.maxHeight,maxWidth:i.staticWidth?i.staticWidth:i.maxWidth,minHeight:i.staticHeight?i.staticHeight:i.minHeight,minWidth:i.staticWidth?i.staticWidth:i.minWidth}),onClick:d[0]||(d[0]=c=>i.disabled?c.preventDefault():i.$emit("click",c))},[m(Ne,{"model-value":i.badge==!0,color:"error",dot:""},{default:y(()=>[i.type==="icon"?(u(),$(A,{key:0,ref_key:"responsiveIcon",ref:n,class:"responsive-icon",color:i.color?i.color:"",icon:i.icon?i.icon:"mdi-check",width:i.staticWidth?i.staticWidth:null,height:i.staticHeight?i.staticHeight:null,disabled:i.disabled},Fe({_:2},[Z(i.$slots,(c,f)=>({name:f,fn:y(()=>[De(i.$slots,f,{},void 0,!0)])}))]),1032,["color","icon","width","height","disabled"])):i.type==="btn"?(u(),$(A,{key:1,ref_key:"responsiveIcon",ref:n,class:"responsive-icon",style:{cursor:"pointer"},color:i.color?i.color:"",icon:i.icon?i.icon:"mdi-check",width:i.staticWidth?i.staticWidth:null,height:i.staticHeight?i.staticHeight:null,disabled:i.disabled},Fe({_:2},[Z(i.$slots,(c,f)=>({name:f,fn:y(()=>[De(i.$slots,f,{},void 0,!0)])}))]),1032,["color","icon","width","height","disabled"])):C("",!0)]),_:3},8,["model-value"])],6))}}),me=x(Yl,[["__scopeId","data-v-8f009710"]]),la=z({__name:"RepeatBtn",props:{playerQueue:{},isVisible:{type:Boolean,default:!0},icon:{default:void 0}},setup(l){return(a,s)=>{var o,n;return a.isVisible&&a.playerQueue?(u(),$(me,H({key:0},a.icon,{disabled:!a.playerQueue.active||a.playerQueue.items==0,color:e(he)((o=a.icon)==null?void 0:o.color,[[a.playerQueue.repeat_mode==e(W).OFF,null],[a.playerQueue.repeat_mode==e(W).ALL,"primary"],[a.playerQueue.repeat_mode==e(W).ONE,"primary"]]),icon:e(he)((n=a.icon)==null?void 0:n.icon,[[a.playerQueue.repeat_mode==e(W).OFF,"mdi-repeat-off"],[a.playerQueue.repeat_mode==e(W).ALL,"mdi-repeat"],[a.playerQueue.repeat_mode==e(W).ONE,"mdi-repeat-once"],[!0,"mdi-repeat-off"]]),type:"btn",onClick:s[0]||(s[0]=i=>e(g).queueCommandRepeat(a.playerQueue.queue_id||"",e(he)(null,[[a.playerQueue.repeat_mode==e(W).OFF,e(W).ONE],[a.playerQueue.repeat_mode==e(W).ALL,e(W).OFF],[a.playerQueue.repeat_mode==e(W).ONE,e(W).ALL]])))}),null,16,["disabled","color","icon"])):C("",!0)}}}),ia=z({__name:"ShuffleBtn",props:{playerQueue:{},isVisible:{type:Boolean,default:!0},icon:{default:void 0}},setup(l){return(a,s)=>{var o,n;return a.isVisible&&a.playerQueue?(u(),$(me,H({key:0},a.icon,{disabled:!a.playerQueue.active||a.playerQueue.items==0,color:e(he)((o=a.icon)==null?void 0:o.color,[[a.playerQueue.shuffle_enabled,"primary",""]]),icon:e(he)((n=a.icon)==null?void 0:n.icon,[[a.playerQueue.shuffle_enabled,"mdi-shuffle"],[a.playerQueue.shuffle_enabled==!1,"mdi-shuffle-disabled"],[!0,"mdi-shuffle"]]),type:"btn",onClick:s[0]||(s[0]=i=>e(g).queueCommandShuffle(a.playerQueue.queue_id,!a.playerQueue.shuffle_enabled))}),null,16,["disabled","color","icon"])):C("",!0)}}}),tt=z({__name:"PlayBtn",props:{player:{},playerQueue:{default:void 0},isVisible:{type:Boolean,default:!0},withCircle:{type:Boolean,default:!0},icon:{default:void 0},iconStyle:{default:"circle"}},setup(l){const a=l,s=I(()=>a.playerQueue?a.playerQueue.items>0:!1),o=I(()=>{var i;return!(!a.player||(i=a.playerQueue)!=null&&i.active||!a.player.current_media)}),n=I(()=>{var i;return((i=a.player)==null?void 0:i.state)==ze.PLAYING?"mdi-pause":"mdi-play"});return(i,d)=>i.isVisible&&i.player?(u(),$(me,H({key:0},i.icon,{disabled:!s.value&&!o.value,icon:i.iconStyle?`${n.value}-${i.iconStyle}`:n.value,type:"btn",onClick:d[0]||(d[0]=c=>e(g).playerCommandPlayPause(i.player.player_id))}),null,16,["disabled","icon"])):C("",!0)}}),oa=z({__name:"PreviousBtn",props:{player:{},playerQueue:{default:void 0},isVisible:{type:Boolean,default:!0},icon:{default:void 0}},setup(l){const a=l,s=I(()=>{var n,i;return!((n=a.playerQueue)!=null&&n.active)||!((i=a.playerQueue)!=null&&i.items)||!a.playerQueue.current_index?!1:a.playerQueue.current_index>0}),o=I(()=>{var n;return!a.player||(n=a.playerQueue)!=null&&n.active||!a.player.current_media?!1:a.player.supported_features.includes(te.NEXT_PREVIOUS)});return(n,i)=>n.isVisible&&n.player?(u(),$(me,H({key:0},n.icon,{disabled:!s.value&&!o.value,icon:"mdi-skip-previous-outline",type:"btn",onClick:i[0]||(i[0]=d=>e(g).playerCommandPrevious(n.player.player_id))}),null,16,["disabled"])):C("",!0)}}),sa=z({__name:"NextBtn",props:{player:{},playerQueue:{default:void 0},isVisible:{type:Boolean,default:!0},icon:{default:void 0}},setup(l){const a=l,s=I(()=>{var n;return(n=a.playerQueue)!=null&&n.active?(a.playerQueue.current_index||0)<a.playerQueue.items-1:!1}),o=I(()=>{var n;return!a.player||(n=a.playerQueue)!=null&&n.active||!a.player.current_media?!1:a.player.supported_features.includes(te.NEXT_PREVIOUS)});return(n,i)=>n.isVisible&&n.player?(u(),$(me,H({key:0},n.icon,{disabled:!s.value&&!o.value,icon:"mdi-skip-next-outline",type:"btn",onClick:i[0]||(i[0]=d=>e(g).playerCommandNext(n.player.player_id))}),null,16,["disabled"])):C("",!0)}}),Xl={key:0,class:"player-controls"},Gl={key:0,class:"player-controls-elements"},jl={key:1,class:"player-controls-elements"},xl={key:2},Kl={key:3,class:"player-controls-elements"},Jl={key:4,class:"player-controls-elements"},Vt=z({__name:"PlayerControls",props:{visibleComponents:{default:()=>({repeat:{isVisible:!0},shuffle:{isVisible:!0},play:{isVisible:!0},previous:{isVisible:!0},next:{isVisible:!0}})}},setup(l){return(a,s)=>{var o,n,i,d,c;return a.visibleComponents?(u(),_("div",Xl,[a.visibleComponents&&((o=a.visibleComponents.shuffle)!=null&&o.isVisible)?(u(),_("div",Gl,[m(ia,{"player-queue":e(t).activePlayerQueue,class:"media-controls-item",icon:a.visibleComponents.shuffle.icon},null,8,["player-queue","icon"])])):C("",!0),a.visibleComponents&&((n=a.visibleComponents.previous)!=null&&n.isVisible)?(u(),_("div",jl,[m(oa,{player:e(t).activePlayer,"player-queue":e(t).activePlayerQueue,class:"media-controls-item",icon:a.visibleComponents.previous.icon},null,8,["player","player-queue","icon"])])):C("",!0),a.visibleComponents&&((i=a.visibleComponents.play)!=null&&i.isVisible)?(u(),_("div",xl,[m(tt,{player:e(t).activePlayer,"player-queue":e(t).activePlayerQueue,class:"media-controls-item","icon-style":a.visibleComponents.play.withCircle?"circle":"",icon:a.visibleComponents.play.icon},null,8,["player","player-queue","icon-style","icon"])])):C("",!0),a.visibleComponents&&((d=a.visibleComponents.next)!=null&&d.isVisible)?(u(),_("div",Kl,[m(sa,{player:e(t).activePlayer,"player-queue":e(t).activePlayerQueue,icon:a.visibleComponents.next.icon,"static-height":"24px","static-width":"24px"},null,8,["player","player-queue","icon"])])):C("",!0),a.visibleComponents&&((c=a.visibleComponents.repeat)!=null&&c.isVisible)?(u(),_("div",Jl,[m(la,{"player-queue":e(t).activePlayerQueue,icon:a.visibleComponents.repeat.icon,"static-height":"24px","static-width":"24px"},null,8,["player-queue","icon"])])):C("",!0)])):C("",!0)}}}),Zl={props:{width:String,height:String,style:String,isPowered:Boolean,allowWheel:Boolean},emits:["update:model-value"],setup(l,a){const s=M(!0),o=I(()=>({class:"player-volume",hideDetails:!0,trackSize:2,thumbSize:s.value?0:10,step:2,elevation:0,style:`width: ${l.width}; height:${l.height}; display: inline-grid; ${l.style}`,disabled:!l.isPowered})),n=I(()=>({...o.value,...a}));return{isThumbHidden:s,playerVolumeProps:n,onWheel:({deltaY:d})=>{if(!l.allowWheel)return;const c=n.value.step,f=a.attrs["model-value"],r=d<0?c:-c;a.emit("update:model-value",f+r)}}}};function ei(l,a,s,o,n,i){return u(),$(xt,H(o.playerVolumeProps,{onTouchstart:a[0]||(a[0]=d=>o.isThumbHidden=!1),onTouchend:a[1]||(a[1]=d=>o.isThumbHidden=!0),onMouseenter:a[2]||(a[2]=d=>o.isThumbHidden=!1),onMouseleave:a[3]||(a[3]=d=>o.isThumbHidden=!0),onWheel:J(o.onWheel,["prevent"]),onEnd:a[4]||(a[4]=d=>l.$emit("update:model-value",d))}),Fe({_:2},[Z(l.$slots,(d,c)=>({name:c,fn:y(()=>[De(l.$slots,c,{},void 0,!0)])}))]),1040,["onWheel"])}const Se=x(Zl,[["render",ei],["__scopeId","data-v-dce2c4f7"]]),na=z({__name:"QueueBtn",props:{isVisible:{type:Boolean,default:!0},icon:{default:void 0}},setup(l){const a=function(){t.showFullscreenPlayer&&t.showQueueItems?t.showQueueItems=!1:t.showFullscreenPlayer&&!t.showQueueItems?t.showQueueItems=!0:(t.showQueueItems=!0,t.showFullscreenPlayer=!0)};return(s,o)=>{var n;return s.isVisible?(u(),$(me,H({key:0},s.icon,{disabled:!e(t).activePlayerId||e(t).showFullscreenPlayer&&!e(t).curQueueItem&&!e(t).showQueueItems,icon:"mdi-playlist-play",color:e(he)((n=s.icon)==null?void 0:n.color,[[e(t).showFullscreenPlayer&&e(t).showQueueItems,"primary",""]]),type:"btn",onClick:a}),null,16,["disabled","color"])):C("",!0)}}}),ra=(l,a)=>{const s=[{label:l.powered?"power_off_player":"power_on_player",labelArgs:[],action:()=>{g.playerCommandPowerToggle(l.player_id)},icon:"mdi-power"}],o=Object.values(g.players).filter(n=>n.player_id!=l.player_id&&n.available&&n.enabled&&n.provider==l.provider&&n.supported_features.includes(te.SET_MEMBERS)&&!n.synced_to);return l.supported_features.includes(te.SET_MEMBERS)&&!l.synced_to&&l.type==ge.PLAYER&&l.group_childs.length==0&&o.length>0&&s.push({label:"sync_player_with",labelArgs:[],icon:"mdi-link-variant",subItems:o.map(n=>({label:n.display_name,labelArgs:[],action:()=>{g.playerCommandGroup(l.player_id,n.player_id)}})).sort((n,i)=>{var d;return n.label.toUpperCase()>((d=i.label)==null?void 0:d.toUpperCase())?1:-1})}),a&&s.push({label:a.shuffle_enabled?"shuffle_disable":"shuffle_enable",labelArgs:[],action:()=>{g.queueCommandShuffleToggle(a.queue_id)},icon:a.shuffle_enabled?"mdi-shuffle-disabled":"mdi-shuffle"}),a&&s.push({label:"select_repeat_mode",labelArgs:[],subItems:[{label:"repeat_mode.off",labelArgs:[],action:()=>{g.queueCommandRepeat(a.queue_id,W.OFF)},selected:a.repeat_mode==W.OFF},{label:"repeat_mode.all",labelArgs:[],action:()=>{g.queueCommandRepeat(a.queue_id,W.ALL)},selected:a.repeat_mode==W.ALL},{label:"repeat_mode.one",labelArgs:[],action:()=>{g.queueCommandRepeat(a.queue_id,W.ONE)},selected:a.repeat_mode==W.ONE}],icon:"mdi-repeat"}),a!=null&&a.items&&s.push({label:"transfer_queue",icon:"mdi-swap-horizontal",subItems:Object.values(g.players).filter(n=>n.player_id!=a.queue_id&&n.player_id!=l.player_id&&n.available&&n.enabled&&!n.synced_to).map(n=>({label:n.display_name,labelArgs:[],action:()=>{g.queueCommandTransfer(a.queue_id,n.player_id),t.activePlayerId=n.player_id}})).sort((n,i)=>{var d;return n.label.toUpperCase()>((d=i.label)==null?void 0:d.toUpperCase())?1:-1})}),a!=null&&a.items&&s.push({label:"queue_clear",labelArgs:[],action:()=>{g.queueCommandClear(a.queue_id)},icon:"mdi-cancel"}),a&&"dont_stop_the_music_enabled"in a&&s.push({label:a.dont_stop_the_music_enabled?"dont_stop_the_music_disable":"dont_stop_the_music_enable",labelArgs:[],action:()=>{g.queueCommandDontStopTheMusicToggle(a.queue_id)},icon:"mdi-all-inclusive"}),s.push({label:"open_player_settings",labelArgs:[],action:()=>{t.showFullscreenPlayer=!1,t.showPlayersMenu=!1,Me.push(`/settings/editplayer/${l.player_id}`)},icon:"mdi-cog-outline"}),s},ti=["onClick"],ai={class:"main"},li={key:0,class:"main-media-details"},ii={key:0,class:"main-media-details-image"},oi={class:"main-media-details-track-info"},si={key:0},ni={key:0},ri={style:{margin:"auto","padding-top":"20px"}},ui={key:1,class:"main-queue-items"},di={class:"queue-items-scroll-box"},ci={class:"media-thumb listitem-media-thumb"},mi={key:0},vi={key:2,class:"main-queue-items"},pi={class:"main-media-details-image main-media-details-image-alt"},yi={class:"player-bottom"},fi={class:"row",style:{"margin-left":"5%","margin-right":"5%"}},hi={class:"media-controls"},_i={key:0,class:"row",style:{"margin-left":"5%","margin-right":"5%"}},gi={key:1,class:"row",style:{height:"70px",display:"flex","justify-content":"center","align-items":"center","padding-bottom":"15px","padding-top":"15px"}},bi=z({__name:"PlayerFullscreen",props:{colorPalette:{}},setup(l){Va();const{name:a}=Et(),s=l,o=M([]),n=M(""),i=M(0),d=M(!1),c=I(()=>t.activePlayerQueue?o.value.slice(t.activePlayerQueue.current_index):[]),f=I(()=>t.activePlayerQueue?o.value.slice(0,t.activePlayerQueue.current_index):[]),r=I(()=>{switch(a.value){case"xs":return"1.2em";case"sm":return"1.6em";case"md":return"2em";case"lg":return t.showQueueItems?"1.5em":"2.5em";case"xl":return t.showQueueItems?"1.6em":"3em";case"xxl":return t.showQueueItems?"1.7em":"3.2em";default:return"1.0em."}}),h=I(()=>{switch(a.value){case"xs":return"1.0em";case"sm":return"1.2em";case"md":return"1.7em";case"lg":return t.showQueueItems?"1.0em":"1.6em";case"xl":return t.showQueueItems?"1.2em":"2em";case"xxl":return t.showQueueItems?"1.2em":"2em";default:return"1.0em."}}),p=function(b){t.showFullscreenPlayer=!1,Me.push({name:b.media_type,params:{itemId:b.item_id,provider:b.provider}})},v=function(b){t.globalSearchTerm=b,Me.push({name:"search"}),t.showFullscreenPlayer=!1},V=function(b,k){var F,j,N,re,ve,ue,de;const T=o.value.indexOf(k),q=[{label:"play_now",labelArgs:[],action:()=>{B(k,"play_now")},icon:"mdi-play-circle-outline",disabled:T===((F=t.activePlayerQueue)==null?void 0:F.current_index)||T===((j=t.activePlayerQueue)==null?void 0:j.index_in_buffer)},{label:"play_next",labelArgs:[],action:()=>{B(k,"move_next")},icon:"mdi-skip-next-circle-outline",disabled:T<=(((N=t.activePlayerQueue)==null?void 0:N.index_in_buffer)||0)},{label:"queue_move_up",labelArgs:[],action:()=>{B(k,"up")},icon:"mdi-arrow-up",disabled:T<=(((re=t.activePlayerQueue)==null?void 0:re.index_in_buffer)||0)},{label:"queue_move_down",labelArgs:[],action:()=>{B(k,"down")},icon:"mdi-arrow-down",disabled:T<=(((ve=t.activePlayerQueue)==null?void 0:ve.index_in_buffer)||0)},{label:"queue_delete",labelArgs:[],action:()=>{B(k,"delete")},icon:"mdi-delete",disabled:T<=(((ue=t.activePlayerQueue)==null?void 0:ue.index_in_buffer)||0)}];((de=k==null?void 0:k.media_item)==null?void 0:de.media_type)==ae.TRACK&&q.push({label:"show_info",labelArgs:[],action:()=>{p(k.media_item)},icon:"mdi-information-outline",disabled:!1}),ce.emit("contextmenu",{items:q,posX:b.clientX,posY:b.clientY})},w=function(b){t.activePlayer&&ce.emit("contextmenu",{items:ra(t.activePlayer,t.activePlayerQueue),posX:b.clientX,posY:b.clientY})},B=function(b,k){var T,q,F,j,N;!b||!t.activePlayerQueue||(k=="play_now"?g.queueCommandPlayIndex((T=t.activePlayerQueue)==null?void 0:T.queue_id,b.queue_item_id):k=="move_next"?g.queueCommandMoveNext((q=t.activePlayerQueue)==null?void 0:q.queue_id,b.queue_item_id):k=="up"?g.queueCommandMoveUp((F=t.activePlayerQueue)==null?void 0:F.queue_id,b.queue_item_id):k=="down"?g.queueCommandMoveDown((j=t.activePlayerQueue)==null?void 0:j.queue_id,b.queue_item_id):k=="delete"&&g.queueCommandDelete((N=t.activePlayerQueue)==null?void 0:N.queue_id,b.queue_item_id))},D=async function(){d.value=!0,o.value=[],await bt(100),d.value=!1},K=async function({done:b}){var F;if(!t.activePlayerQueue||t.activePlayerQueue.items==0){b("empty");return}if(o.value.length>=((F=t.activePlayerQueue)==null?void 0:F.items)){b("empty");return}const k=o.value.length,T=(t.activePlayerQueue.current_index||0)+50,q=await g.getPlayerQueueItems(t.activePlayerQueue.queue_id,T,k);o.value.push(...q),q.length<50?b("empty"):b("ok")};Le(()=>{const b=g.subscribe($a.QUEUE_ITEMS_UPDATED,k=>{var T;k.object_id==((T=t.activePlayerQueue)==null?void 0:T.queue_id)&&(k.data,D())});Xe(b)});const O=function(b){var T;if(!((T=t.curQueueItem)!=null&&T.media_item))return;if(!t.curQueueItem.media_item.favorite){g.toggleFavorite(t.curQueueItem.media_item);return}const k=[{label:"favorites_remove",labelArgs:[],action:()=>{g.toggleFavorite(t.curQueueItem.media_item)},icon:"mdi-heart"},{label:"add_playlist",labelArgs:[],action:()=>{ce.emit("playlistdialog",{items:[t.curQueueItem.media_item]})},icon:"mdi-plus-circle-outline"}];ce.emit("contextmenu",{items:k,posX:b.clientX,posY:b.clientY})},G=function(){d.value=!0,bt(100).then(()=>{d.value=!1})};return ne(()=>t.activePlayerId,b=>{D()},{immediate:!0}),ne(()=>s.colorPalette,b=>{!b.darkColor||!b.lightColor?n.value=Ee.theme.current.value.dark?"#000":"#fff":n.value=Ee.theme.current.value.dark?b.darkColor:b.lightColor}),(b,k)=>(u(),$(Yt,{modelValue:e(t).showFullscreenPlayer,"onUpdate:modelValue":k[11]||(k[11]=T=>e(t).showFullscreenPlayer=T),fullscreen:"",scrim:!1,transition:"dialog-bottom-transition","z-index":"9999"},{default:y(()=>[m(Ie,{color:e(Ia)(n.value,70,80)},{default:y(()=>{var T,q,F,j,N,re,ve,ue,de,we,at,lt,it,ot,st,nt,rt,ut,dt,ct,mt,vt;return[m(dl,{class:"v-toolbar-default",color:"transparent"},{prepend:y(()=>[m(ee,{icon:"",onClick:k[0]||(k[0]=S=>e(t).showFullscreenPlayer=!1)},{default:y(()=>[m(A,{icon:"mdi-chevron-down"})]),_:1})]),append:y(()=>{var S;return[(S=e(t).activePlayerQueue)!=null&&S.radio_source.length?(u(),$(Ze,{key:0,scrim:""},{activator:y(({props:Y})=>[m(ee,H(Y,{icon:""}),{default:y(()=>[m(A,{color:"accent",icon:"mdi-radio-tower"})]),_:2},1040)]),default:y(()=>[m(Ie,{title:b.$t("queue_radio_enabled"),subtitle:b.$t("queue_radio_based_on")},{text:y(()=>{var Y;return[(u(!0),_(U,null,Z((Y=e(t).activePlayerQueue)==null?void 0:Y.radio_source,pe=>(u(),_("div",{key:pe.uri},[Q("a",{onClick:He=>p(pe)},P(pe.name),9,ti)]))),128))]}),_:1},8,["title","subtitle"])]),_:1})):C("",!0),m(ee,{icon:"",onClick:J(w,["stop"])},{default:y(()=>[m(A,{icon:"mdi-dots-vertical"})]),_:1})]}),_:1}),Q("div",ai,[e(L)("bp7")||!e(t).showQueueItems?(u(),_("div",li,[b.$vuetify.display.height>600?(u(),_("div",ii,[!((T=e(t).curQueueItem)!=null&&T.image)&&((F=(q=e(t).activePlayer)==null?void 0:q.current_media)!=null&&F.image_url)?(u(),$(Je,{key:0,style:{"max-width":"100%",width:"auto","border-radius":"4px"},src:e(t).activePlayer.current_media.image_url},null,8,["src"])):(u(),$(fe,{key:1,item:e(t).curQueueItem,thumbnail:!1,style:{"max-width":"100%",width:"auto"},fallback:b.$vuetify.theme.current.dark?e(Ae):e(It)},null,8,["item","fallback"]))])):C("",!0),Q("div",oi,[((j=e(t).activePlayer)==null?void 0:j.powered)==!1?(u(),$(Pe,{key:0,style:R(`font-size: ${r.value};`)},{default:y(()=>{var S;return[E(P((S=e(t).activePlayer)==null?void 0:S.display_name),1)]}),_:1},8,["style"])):(N=e(t).curQueueItem)!=null&&N.media_item?(u(),$(Pe,{key:1,style:R(`font-size: ${r.value};cursor:pointer;`),onClick:k[1]||(k[1]=S=>p(e(t).curQueueItem.media_item))},{default:y(()=>[E(P(e(t).curQueueItem.media_item.name)+" ",1),"version"in e(t).curQueueItem.media_item&&e(t).curQueueItem.media_item.version?(u(),_("span",si,"("+P(e(t).curQueueItem.media_item.version)+")",1)):C("",!0)]),_:1},8,["style"])):(ve=(re=e(t).activePlayer)==null?void 0:re.current_media)!=null&&ve.title?(u(),$(Pe,{key:2},{default:y(()=>{var S,Y,pe,He,pt,yt,ft,ht;return[(Y=(S=e(t).activePlayer)==null?void 0:S.current_media)!=null&&Y.artist?(u(),_("div",ni,P((He=(pe=e(t).activePlayer)==null?void 0:pe.current_media)==null?void 0:He.artist),1)):C("",!0),(yt=(pt=e(t).activePlayer)==null?void 0:pt.current_media)!=null&&yt.title?(u(),_("div",{key:1,style:R(`font-size: ${h.value};`)},P((ht=(ft=e(t).activePlayer)==null?void 0:ft.current_media)==null?void 0:ht.title),5)):C("",!0)]}),_:1})):(u(),$(Pe,{key:3,style:R(`font-size: ${r.value};cursor:pointer;`),onClick:k[2]||(k[2]=S=>e(t).showPlayersMenu=!0)},{default:y(()=>{var S;return[E(P(((S=e(t).activePlayer)==null?void 0:S.display_name)||b.$t("no_player")),1)]}),_:1},8,["style"])),(ue=e(t).activePlayer)!=null&&ue.powered?C("",!0):(u(),$(ye,{key:4,class:"text-h6 text-md-h5 text-lg-h4"},{default:y(()=>[E(P(b.$t("off")),1)]),_:1})),((we=(de=e(t).curQueueItem)==null?void 0:de.media_item)==null?void 0:we.media_type)==e(ae).RADIO&&((lt=(at=e(t).curQueueItem)==null?void 0:at.streamdetails)!=null&&lt.stream_title)?(u(),$(ye,{key:5,class:"text-h6 text-md-h5 text-lg-h4",onClick:k[3]||(k[3]=S=>v(e(t).curQueueItem.streamdetails.stream_title))},{default:y(()=>[E(P(e(t).curQueueItem.streamdetails.stream_title),1)]),_:1})):C("",!0),(it=e(t).curQueueItem)!=null&&it.media_item&&"album"in e(t).curQueueItem.media_item&&e(t).curQueueItem.media_item.album?(u(),$(ye,{key:6,style:R(`font-size: ${h.value};cursor:pointer;`),onClick:k[4]||(k[4]=S=>p(e(t).curQueueItem.media_item.album))},{default:y(()=>[E(P(e(t).curQueueItem.media_item.album.name),1)]),_:1},8,["style"])):C("",!0),(ot=e(t).curQueueItem)!=null&&ot.media_item&&"artists"in e(t).curQueueItem.media_item&&e(t).curQueueItem.media_item.artists.length?(u(),$(ye,{key:7,style:R(`font-size: ${h.value};cursor:pointer;`),onClick:k[5]||(k[5]=S=>p(e(t).curQueueItem.media_item.artists[0]))},{default:y(()=>[E(P(e(t).curQueueItem.media_item.artists[0].name),1)]),_:1},8,["style"])):((st=e(t).activePlayer)==null?void 0:st.active_source)!=((nt=e(t).activePlayer)==null?void 0:nt.player_id)?(u(),$(ye,{key:8},{default:y(()=>{var S;return[E(P(b.$t("external_source_active",[(S=e(t).activePlayer)==null?void 0:S.active_source])),1)]}),_:1})):e(t).activePlayerQueue&&e(t).activePlayerQueue.items==0?(u(),$(ye,{key:9,style:R(`font-size: ${h.value}`)},{default:y(()=>[E(P(b.$t("queue_empty")),1)]),_:1},8,["style"])):C("",!0),Q("div",ri,[m(pa)])])])):C("",!0),e(t).showQueueItems?(u(),_("div",ui,[m(Ye,{modelValue:i.value,"onUpdate:modelValue":k[6]||(k[6]=S=>i.value=S),"hide-slider":"",density:"compact",onClick:G},{default:y(()=>[m(_e,{value:0},{default:y(()=>{var S,Y;return[E(P(b.$t("queue"))+" ",1),m(Ne,{color:"grey",content:(((S=e(t).activePlayerQueue)==null?void 0:S.items)||0)-(((Y=e(t).activePlayerQueue)==null?void 0:Y.current_index)||0),inline:""},null,8,["content"])]}),_:1}),m(_e,{value:1},{default:y(()=>{var S;return[E(P(b.$t("played"))+" ",1),m(Ne,{color:"grey",content:(S=e(t).activePlayerQueue)==null?void 0:S.current_index,inline:""},null,8,["content"])]}),_:1})]),_:1},8,["modelValue"]),Q("div",di,[d.value?C("",!0):(u(),$(Ga,{key:0,onLoad:K,"empty-text":"",height:"100%"},{default:y(()=>[m(cl,{"item-height":70,"max-height":"90%",items:i.value==0?c.value:f.value},{default:y(({item:S})=>[m(ul,{link:"","show-menu-btn":!0,onClick:J(Y=>V(Y,S),["stop"]),onMenu:J(Y=>V(Y,S),["stop"])},{prepend:y(()=>[Q("div",ci,[m(fe,{size:"50",item:S},null,8,["item"])])]),title:y(()=>[E(P(S.name),1)]),subtitle:y(()=>[E(P(e(Te)(S.duration))+" ",1),S.media_item&&"album"in S.media_item&&S.media_item.album?(u(),_("span",mi," | "+P(S.media_item.album.name),1)):C("",!0)]),_:2},1032,["onClick","onMenu"])]),_:1},8,["items"])]),_:1}))])])):C("",!0),!e(t).showQueueItems&&b.$vuetify.display.height<=600?(u(),_("div",vi,[Q("div",pi,[m(fe,{item:e(t).curQueueItem,thumbnail:!1,style:{"max-width":"100%",width:"auto"}},null,8,["item"])])])):C("",!0)]),Q("div",yi,[Q("div",fi,[m(aa,{"show-labels":!0})]),Q("div",hi,[e(t).activePlayerQueue?(u(),$(me,{key:0,disabled:!((rt=e(t).curQueueItem)!=null&&rt.media_item),icon:(dt=(ut=e(t).curQueueItem)==null?void 0:ut.media_item)!=null&&dt.favorite?"mdi-heart":"mdi-heart-outline",title:b.$t("tooltip.favorite"),type:"btn",class:"media-controls-item","max-height":"30px",onClick:O},null,8,["disabled","icon","title"])):C("",!0),b.$vuetify.display.mdAndUp?(u(),$(ia,{key:1,"player-queue":e(t).activePlayerQueue,class:"media-controls-item","max-height":"30px"},null,8,["player-queue"])):C("",!0),m(oa,{player:e(t).activePlayer,"player-queue":e(t).activePlayerQueue,class:"media-controls-item","max-height":"45px"},null,8,["player","player-queue"]),m(tt,{player:e(t).activePlayer,"player-queue":e(t).activePlayerQueue,class:"media-controls-item","max-height":"100px"},null,8,["player","player-queue"]),m(sa,{player:e(t).activePlayer,"player-queue":e(t).activePlayerQueue,class:"media-controls-item","max-height":"45px"},null,8,["player","player-queue"]),b.$vuetify.display.mdAndUp?(u(),$(la,{key:2,"player-queue":e(t).activePlayerQueue,class:"media-controls-item","max-height":"35px"},null,8,["player-queue"])):C("",!0),e(t).activePlayerQueue?(u(),$(na,{key:3,class:"media-controls-item","max-height":"30px"})):C("",!0)]),e(t).activePlayer?(u(),_("div",_i,[m(Se,{width:"100%","is-powered":(ct=e(t).activePlayer)==null?void 0:ct.powered,disabled:!e(t).activePlayer||!((mt=e(t).activePlayer)!=null&&mt.powered),"model-value":Math.round(((vt=e(t).activePlayer)==null?void 0:vt.group_volume)||0),"prepend-icon":"mdi-volume-minus","append-icon":"mdi-volume-plus","allow-wheel":!0,"onUpdate:modelValue":k[7]||(k[7]=S=>e(t).activePlayer.group_childs.length>0?e(g).playerCommandGroupVolume(e(t).activePlayerId,S):e(g).playerCommandVolumeSet(e(t).activePlayerId,S)),"onClick:prepend":k[8]||(k[8]=S=>e(t).activePlayer.group_childs.length>0?e(g).playerCommandGroupVolumeDown(e(t).activePlayerId):e(g).playerCommandVolumeDown(e(t).activePlayerId)),"onClick:append":k[9]||(k[9]=S=>e(t).activePlayer.group_childs.length>0?e(g).playerCommandGroupVolumeUp(e(t).activePlayerId):e(g).playerCommandVolumeUp(e(t).activePlayerId))},null,8,["is-powered","disabled","model-value"])])):C("",!0),b.$vuetify.display.height>800?(u(),_("div",gi,[m($e,{class:"responsive-icon-holder-btn",variant:"outlined",onClick:k[10]||(k[10]=S=>e(t).showPlayersMenu=!0)},{default:y(()=>{var S;return[m(A,{icon:((S=e(t).activePlayer)==null?void 0:S.icon)||"mdi-speaker"},null,8,["icon"]),E(" "+P(e(t).activePlayer?e(Re)(e(t).activePlayer):""),1)]}),_:1})])):C("",!0)])]}),_:1},8,["color"])]),_:1},8,["modelValue"]))}}),wi=x(bi,[["__scopeId","data-v-f28f4479"]]),ki={key:1},Pi={key:2,class:"icon-thumb"},Ci={key:0},Vi={key:2},$i={key:3},Ii={key:5,class:"line-clamp-1"},Si={class:"d-flex justify-center",style:{width:"100%"}},Qi={key:0},Ti={key:1},Bi={key:2},Mi={key:3,class:"line-clamp-1"},qi={key:4,class:"line-clamp-1"},zi={key:5},Ei={key:6,class:"line-clamp-1"},Ai={key:7},Li=z({__name:"PlayerTrackDetails",props:{showOnlyArtist:{type:Boolean,default:!1},showQualityDetailsBtn:{type:Boolean,default:!0},colorPalette:{},primaryColor:{default:""}},setup(l){const a=l,s=I(()=>{var o,n;return(n=(o=t.activePlayerQueue)==null?void 0:o.current_item)==null?void 0:n.streamdetails});return(o,n)=>(u(),_(U,null,[m(se,{style:{height:"auto",width:"fit-content",margin:"0px",padding:"0px"},lines:"two"},{prepend:y(()=>{var i,d,c,f,r,h,p,v,V;return[Q("div",{class:"media-thumb player-media-thumb",style:R(`cursor: pointer;height: ${e(L)({breakpoint:"phone"})?50:64}px; width: ${e(L)({breakpoint:"phone"})?50:64}px; `),onClick:n[0]||(n[0]=w=>e(t).showFullscreenPlayer=!0)},[(i=e(t).curQueueItem)!=null&&i.media_item||(d=e(t).curQueueItem)!=null&&d.image?(u(),$(fe,{key:0,item:((c=e(t).curQueueItem)==null?void 0:c.media_item)||e(t).curQueueItem,fallback:e(Ae)},null,8,["item","fallback"])):(f=e(t).activePlayer)!=null&&f.powered&&((h=(r=e(t).activePlayer)==null?void 0:r.current_media)!=null&&h.image_url)?(u(),_("div",ki,[m(Je,{class:"media-thumb",style:{"border-radius":"4px"},size:"55",src:e(t).activePlayer.current_media.image_url},null,8,["src"])])):(u(),_("div",Pi,[m(A,{size:"35",icon:((p=e(t).activePlayer)==null?void 0:p.type)==e(ge).PLAYER&&((v=e(t).activePlayer)!=null&&v.group_childs.length)?"mdi-speaker-multiple":((V=e(t).activePlayer)==null?void 0:V.icon)||"mdi-speaker",style:{display:"table-cell",opacity:"0.8"}},null,8,["icon"])]))],4)]}),title:y(()=>{var i,d,c,f,r;return[Q("div",{style:R({cursor:"pointer",color:o.primaryColor})},[((i=e(t).activePlayer)==null?void 0:i.powered)==!1?(u(),_("div",{key:0,onClick:n[1]||(n[1]=h=>e(t).showPlayersMenu=!0)},P((d=e(t).activePlayer)==null?void 0:d.display_name),1)):(c=e(t).curQueueItem)!=null&&c.media_item?(u(),_("div",{key:1,onClick:n[2]||(n[2]=h=>e(t).showFullscreenPlayer=!0)},[E(P(e(t).curQueueItem.media_item.name)+" ",1),"version"in e(t).curQueueItem.media_item&&e(t).curQueueItem.media_item.version?(u(),_("span",Ci,"("+P(e(t).curQueueItem.media_item.version)+")",1)):C("",!0)])):e(t).curQueueItem?(u(),_("div",Vi,P(e(t).curQueueItem.name),1)):(r=(f=e(t).activePlayer)==null?void 0:f.current_media)!=null&&r.title?(u(),_("div",$i,P(e(t).activePlayer.current_media.title),1)):e(t).activePlayer?e(t).activePlayerQueue&&e(t).activePlayerQueue.items==0?(u(),_("div",Ii,P(o.$t("queue_empty")),1)):C("",!0):(u(),_("div",{key:4,onClick:n[3]||(n[3]=h=>e(t).showPlayersMenu=!0)},P(o.$t("no_player")),1))],4)]}),append:y(()=>{var i,d,c;return[(i=s.value)!=null&&i.audio_format.content_type&&!e(L)({breakpoint:"phone"})&&o.showQualityDetailsBtn?(u(),$(ol,H({key:0,disabled:!e(t).activePlayerQueue||!((d=e(t).activePlayerQueue)!=null&&d.active)||((c=e(t).activePlayerQueue)==null?void 0:c.items)==0,class:"player-track-content-type",style:o.$vuetify.theme.current.dark?"color: #000; background: #fff; margin-left: 15px;":"color: #fff; background: #000; margin-left: 15px;",label:"",ripple:!1},a),{default:y(()=>[Q("div",Si,P(s.value.audio_format.content_type.toUpperCase()),1)]),_:1},16,["disabled","style"])):C("",!0)]}),subtitle:y(()=>{var i,d,c,f,r,h,p,v,V,w,B,D,K;return[Q("div",{style:R({cursor:"pointer",color:o.primaryColor}),class:"line-clamp-1",onClick:n[4]||(n[4]=O=>e(t).showFullscreenPlayer=!0)},[(i=e(t).activePlayer)!=null&&i.powered?e(t).curQueueItem&&((d=e(t).curQueueItem.media_item)==null?void 0:d.media_type)==e(ae).TRACK&&"album"in e(t).curQueueItem.media_item&&e(t).curQueueItem.media_item.album&&!a.showOnlyArtist?(u(),_("div",Ti,P(e(At)(e(t).curQueueItem.media_item.artists))+" • "+P(e(t).curQueueItem.media_item.album.name),1)):e(t).curQueueItem&&e(t).curQueueItem.media_item&&"artists"in e(t).curQueueItem.media_item&&e(t).curQueueItem.media_item.artists.length>0?(u(),_("div",Bi,P(e(t).curQueueItem.media_item.artists[0].name),1)):(f=(c=e(t).curQueueItem)==null?void 0:c.streamdetails)!=null&&f.stream_title?(u(),_("div",Mi,P((h=(r=e(t).curQueueItem)==null?void 0:r.streamdetails)==null?void 0:h.stream_title),1)):e(t).curQueueItem&&((p=e(t).curQueueItem.media_item)!=null&&p.metadata.description)?(u(),_("div",qi,P(e(t).curQueueItem.media_item.metadata.description),1)):(V=(v=e(t).activePlayer)==null?void 0:v.current_media)!=null&&V.artist?(u(),_("div",zi,P(e(t).activePlayer.current_media.artist),1)):((w=e(t).activePlayer)==null?void 0:w.active_source)!=((B=e(t).activePlayer)==null?void 0:B.player_id)?(u(),_("div",Ei,P(o.$t("external_source_active",[(D=e(t).activePlayer)==null?void 0:D.active_source])),1)):C("",!0):(u(),_("div",Qi,P(o.$t("off")),1)),e(t).activePlayer&&((K=e(t).activePlayer)!=null&&K.powered)?(u(),_("div",Ai,P(e(Re)(e(t).activePlayer)),1)):C("",!0)],4)]}),_:1}),m(wi,{"show-fullscreen":e(t).showFullscreenPlayer,"color-palette":o.colorPalette},null,8,["show-fullscreen","color-palette"])],64))}}),Wi=z({__name:"SpeakerBtn",props:{color:{}},setup(l){return(a,s)=>(u(),$(ee,{variant:"icon",ripple:!1,icon:"",onClick:s[0]||(s[0]=o=>e(t).showPlayersMenu=!0)},{default:y(()=>{var o;return[m(A,{color:a.color?a.color:"",size:24,icon:(o=e(t).activePlayer)!=null&&o.group_childs.length?"mdi-speaker-multiple":"mdi-speaker"},null,8,["color","icon"])]}),_:1}))}}),Ri={key:1,class:"text-caption volumecaption"},Hi={key:0,class:"text-caption volumecaption"},Ui=z({__name:"VolumeControl",props:{player:{},showSyncControls:{type:Boolean},showSubPlayers:{type:Boolean},hideHeadingRow:{type:Boolean},allowWheel:{type:Boolean}},setup(l){const a=l,s=M([]),o=M([]),n=M(void 0),i=I(()=>a.player.group_childs.length>0),d=function(r,h=!0){var v,V;const p=[];h&&r.type!=ge.GROUP&&p.push(r);for(const w of r.group_childs){const B=(v=g)==null?void 0:v.players[w];B&&B.available&&!p.includes(B)&&p.push(B)}if(a.showSyncControls&&r.supported_features.includes(te.SET_MEMBERS))for(const w of Object.values((V=g)==null?void 0:V.players))w.player_id!=r.player_id&&(!r.can_group_with.includes(w.player_id)&&!r.can_group_with.includes(w.provider)||w.available&&(w.active_group&&w.active_group!=r.player_id||w.active_source&&w.state==ze.PLAYING&&![r.player_id,w.player_id].includes(w.active_source)||p.includes(w)||p.push(w)));return p.sort((w,B)=>w.display_name.toUpperCase()>B.display_name.toUpperCase()?1:-1),p},c=async function(r){for(const h of r)g.players[h].powered&&!g.players[h].active_group?await g.playerCommandPower(h,!1):await g.playerCommandUnGroup(h)},f=async function(r,h){const p=a.player.player_id;h?(o.value.includes(r)&&(o.value=o.value.filter(v=>v!=r)),s.value.includes(r)||s.value.push(r),g.players[p].group_childs.push(r)):(s.value.includes(r)&&(s.value=s.value.filter(v=>v!=r)),o.value.includes(r)||o.value.push(r),g.players[p].group_childs=g.players[p].group_childs.filter(v=>v!=r)),n.value!=null&&clearTimeout(n.value),n.value=setTimeout(async()=>{o.value.length>0&&c(o.value).catch(async()=>{g.players[p]=await g.getPlayer(p)}).finally(()=>{o.value=[]}),s.value.length>0&&g.playerCommandGroupMany(p,s.value).catch(async()=>{g.players[p]=await g.getPlayer(p)}).finally(()=>{s.value=[]})},1e3)};return(r,h)=>(u(),$(Ve,{style:{overflow:"hidden",padding:"0"},lines:"two"},{default:y(()=>[r.hideHeadingRow?C("",!0):(u(),$(se,{key:0,class:"volumesliderrow heading",link:!1,style:R(r.player.powered?"opacity: 1":"opacity: 0.6")},{prepend:y(()=>[m(A,{size:25,icon:r.player.icon,style:{"margin-left":"6px",opacity:"0.6"}},null,8,["icon"])]),default:y(()=>[Q("h5",null,P(e(Re)(r.player,27)),1)]),append:y(()=>[m(ee,{class:"powerbtn",variant:"icon",onClick:h[0]||(h[0]=J(p=>e(g).playerCommandPowerToggle(r.player.player_id),["stop"]))},{default:y(()=>[m(A,{size:25,icon:"mdi-power"})]),_:1})]),_:1},8,["style"])),m(se,{class:"volumesliderrow",link:!1,style:R(r.player.powered?"opacity: 0.75":"opacity: 0.35")},{prepend:y(()=>[m(ee,{icon:"",style:{height:"25px"},disabled:r.player.type==e(ge).GROUP||r.player.group_childs.length>0,onClick:h[1]||(h[1]=J(p=>e(g).playerCommandMuteToggle(r.player.player_id),["stop"]))},{default:y(()=>[m(A,{size:25,icon:r.player.volume_muted?"mdi-volume-mute":"mdi-volume-medium"},null,8,["icon"])]),_:1},8,["disabled"])]),default:y(()=>[m(Se,{color:"secondary",width:"100%","is-powered":r.player.powered,disabled:!r.player.available||!r.player.powered||!r.player.supported_features.includes(e(te).VOLUME_SET)&&!r.player.group_childs.length,"model-value":Math.round(r.player.group_childs.length?r.player.group_volume:r.player.volume_level),onClick:h[2]||(h[2]=J(()=>{},["stop"])),"onUpdate:modelValue":h[3]||(h[3]=p=>r.player.group_childs.length>0?e(g).playerCommandGroupVolume(r.player.player_id,p):e(g).playerCommandVolumeSet(r.player.player_id,p))},null,8,["is-powered","disabled","model-value"])]),append:y(()=>[i.value&&!r.showSubPlayers?(u(),$(A,{key:0,class:"expandbtn"},{default:y(()=>h[7]||(h[7]=[E(" mdi-chevron-down ")])),_:1})):(u(),_("div",Ri,P(Math.round(r.player.group_childs.length?r.player.group_volume:r.player.volume_level)),1))]),_:1},8,["style"]),r.showSubPlayers&&r.player.powered&&(r.player.group_childs.length>0||r.showSyncControls)?(u(),_("div",{key:1,onClick:h[6]||(h[6]=J(()=>{},["stop"]))},[m(Oe,{style:{"margin-top":"10px","margin-bottom":"15px"}}),(u(!0),_(U,null,Z(d(r.player,!r.showSyncControls),p=>(u(),_("div",{key:p.player_id},[m(se,{class:"volumesliderrow",link:!1,style:R(p.powered||r.showSyncControls?"opacity: 0.75":"opacity: 0.4"),onClick:h[4]||(h[4]=J(()=>{},["stop"]))},{prepend:y(()=>[m(A,{size:30,icon:p.icon,style:{"margin-left":"6px",opacity:"0.6"}},null,8,["icon"])]),default:y(()=>[Q("h6",null,P(e(Sa)(p.display_name,27)),1)]),append:y(()=>[r.showSyncControls?(u(),$(ya,{key:0,ripple:!1,disabled:p.player_id==r.player.player_id,"model-value":r.player.group_childs.includes(p.player_id)||p.player_id==r.player.player_id,size:"22",class:"checkbox","onUpdate:modelValue":v=>f(p.player_id,v)},null,8,["disabled","model-value","onUpdate:modelValue"])):C("",!0)]),_:2},1032,["style"]),m(se,{class:"volumesliderrow",link:!1,style:R(p.powered?"opacity: 0.75":"opacity: 0.4"),onClick:h[5]||(h[5]=J(()=>{},["stop"]))},{prepend:y(()=>[m(ee,{icon:"",disabled:!p.supported_features.includes(e(te).VOLUME_MUTE),style:{height:"25px"},onClick:v=>e(g).playerCommandMuteToggle(p.player_id)},{default:y(()=>[m(A,{size:25,icon:p.volume_muted?"mdi-volume-mute":"mdi-volume-medium"},null,8,["icon"])]),_:2},1032,["disabled","onClick"])]),default:y(()=>[m(Se,{color:"secondary",width:"100%","is-powered":p.powered,disabled:!p.available||!p.supported_features.includes(e(te).VOLUME_SET),"allow-wheel":r.allowWheel,"model-value":Math.round(p.volume_level),"onUpdate:modelValue":v=>e(g).playerCommandVolumeSet(p.player_id,v)},null,8,["is-powered","disabled","allow-wheel","model-value","onUpdate:modelValue"])]),append:y(()=>[p.supported_features.includes(e(te).VOLUME_SET)?(u(),_("div",Hi,P(p.volume_level),1)):C("",!0)]),_:2},1032,["style"]),h[8]||(h[8]=Q("div",{style:{height:"14px"}},null,-1))]))),128))])):C("",!0)]),_:1}))}}),ua=x(Ui,[["__scopeId","data-v-5404a26c"]]),Fi={key:0},Di={key:0},Ni={class:"text-caption"},Oi={key:1},Yi=z({__name:"VolumeBtn",props:{volumeSize:{default:"150px"},responsiveVolumeSize:{type:Boolean,default:!0},isVisible:{type:Boolean,default:!0},color:{default:""}},setup(l){const a=l,s=M(!1);return(o,n)=>a.isVisible&&e(t).activePlayer?(u(),_("div",Fi,[m(Ze,{modelValue:s.value,"onUpdate:modelValue":n[1]||(n[1]=i=>s.value=i),class:"volume-control-dialog","close-on-content-click":!1,location:"top",scrim:o.$vuetify.theme.current.dark?"rgba(0,0,0,.75)":"rgba(0,0,0,.85)"},{activator:y(({props:i})=>{var d,c;return[e(L)("bp6")||!o.responsiveVolumeSize?(u(),_("div",Di,[m(Se,{style:"margin-right: 0px; margin-left: 0px;",width:o.volumeSize,"is-powered":!0,"model-value":e(t).activePlayer.group_childs.length>0?Math.round(((d=e(t).activePlayer)==null?void 0:d.group_volume)||0):Math.round(((c=e(t).activePlayer)==null?void 0:c.volume_level)||0),"allow-wheel":!0,"onUpdate:modelValue":n[0]||(n[0]=f=>{var r,h;return e(t).activePlayer.group_childs.length>0?e(g).playerCommandGroupVolume(((r=e(t).activePlayer)==null?void 0:r.player_id)||"",f):e(g).playerCommandVolumeSet(((h=e(t).activePlayer)==null?void 0:h.player_id)||"",f)})},{prepend:y(()=>[m(ee,H({variant:"icon",size:"48",ripple:!1},{...i}),{default:y(()=>{var f,r;return[m(A,{color:a.color?o.color:"",size:24,icon:"mdi-volume-high"},null,8,["color"]),Q("div",Ni,P(e(t).activePlayer.group_childs.length>0?Math.round(((f=e(t).activePlayer)==null?void 0:f.group_volume)||0):Math.round(((r=e(t).activePlayer)==null?void 0:r.volume_level)||0)),1)]}),_:2},1040)]),_:2},1032,["width","model-value"])])):(u(),_("div",Oi,[m(ee,H({...i},{size:"48",variant:"icon"}),{default:y(()=>{var f,r;return[m(A,{color:a.color?o.color:"",icon:"mdi-volume-high"},null,8,["color"]),Q("div",{class:"text-caption",style:R({color:a.color?o.color:""})},P(e(t).activePlayer.group_childs.length>0?Math.round(((f=e(t).activePlayer)==null?void 0:f.group_volume)||0):Math.round(((r=e(t).activePlayer)==null?void 0:r.volume_level)||0)),5)]}),_:2},1040)]))]}),default:y(()=>[m(Ie,{"min-width":300,style:{overflow:"hidden","padding-top":"20px","padding-bottom":"20px","padding-right":"20px"}},{default:y(()=>[e(t).activePlayer?(u(),$(ua,{key:0,player:e(t).activePlayer,"show-sub-players":!0,"show-sync-controls":!1,"hide-heading-row":!1,"allow-wheel":!0,style:{"margin-left":"18px"}},null,8,["player"])):C("",!0)]),_:1})]),_:1},8,["modelValue","scrim"])])):C("",!0)}}),Xi=x(Yi,[["__scopeId","data-v-3b2ac5c4"]]),Gi=z({__name:"PlayerExtendedControls",props:{queue:{default:()=>({isVisible:!0,showQueueDialog:!1})},player:{default:()=>({isVisible:!0})},volume:{default:()=>({isVisible:!0,volumeSize:"150px",responsiveVolumeSize:!1})}},setup(l){return(a,s)=>(u(),_(U,null,[a.player&&a.player.isVisible?(u(),$(Wi,{key:0,color:a.player.color},null,8,["color"])):C("",!0),a.queue&&a.queue.isVisible?(u(),$(na,{key:1,color:a.player.color,style:{"padding-left":"15px","padding-right":"20px"}},null,8,["color"])):C("",!0),a.volume&&a.volume.isVisible?(u(),$(Xi,{key:2,color:a.volume.color,"volume-size":a.volume.volumeSize,"responsive-volume-size":a.volume.responsiveVolumeSize},null,8,["color","volume-size","responsive-volume-size"])):C("",!0)],64))}}),ji=["data-floating"],xi=["data-mobile"],Ki={class:"mediacontrols-left"},Ji={class:"mediacontrols-bottom-center"},Zi={class:"mediacontrols-bottom-right"},eo={key:0,class:"volume-slider"},to=z({__name:"Player",props:{useFloatingPlayer:{type:Boolean}},setup(l){Qa(i=>({"4e17711c":n.value})),St();const{mobile:a}=Et({mobileBreakpoint:576}),s=M({0:"",1:"",2:"",3:"",4:"",5:"",lightColor:"",darkColor:""}),o=new Image;o.src=Ee.theme.current.value.dark?Ae:It,o.crossOrigin="Anonymous",o.addEventListener("load",function(){s.value=Ta(o)});const n=I(()=>Ee.theme.current.value.dark?s.value&&s.value.darkColor?s.value.darkColor+"26":"CCCCCC26":s.value&&s.value.lightColor?s.value.lightColor+"26":"CCCCCC26");return ne(()=>{var i;return(i=t.curQueueItem)==null?void 0:i.queue_item_id},()=>{var i;(i=t.curQueueItem)!=null&&i.media_item?o.src=_t(t.curQueueItem.media_item,wt.THUMB)||"":t.curQueueItem?o.src=_t(t.curQueueItem,wt.THUMB)||"":o.src=""}),(i,d)=>{var c,f,r,h,p,v,V;return u(),_(U,null,[Q("div",{class:"mediacontrols-bg","data-floating":i.useFloatingPlayer},null,8,ji),Q("div",{class:"mediacontrols","data-mobile":e(a)},[Q("div",Ki,[m(Li,{"show-quality-details-btn":!!e(L)("bp8"),"show-only-artist":!e(L)("bp7"),"color-palette":s.value,"primary-color":i.$vuetify.theme.current.dark?"#fff":"#000"},null,8,["show-quality-details-btn","show-only-artist","color-palette","primary-color"])]),Q("div",Ji,[m(Vt,{"visible-components":{repeat:{isVisible:e(L)("bp3")},shuffle:{isVisible:e(L)("bp3")},play:{isVisible:!0,icon:{staticWidth:"50px",staticHeight:"50px"},withCircle:i.useFloatingPlayer},previous:{isVisible:e(L)("bp3")},next:{isVisible:e(L)("bp3")}}},null,8,["visible-components"]),e(L)("bp6")?(u(),$(aa,{key:0,color:i.$vuetify.theme.current.dark?s.value.lightColor||"#fff":s.value.darkColor||"#000","is-progress-bar":!1,disabled:!((c=e(t).activePlayerQueue)!=null&&c.active)||((h=(r=(f=e(t).activePlayerQueue)==null?void 0:f.current_item)==null?void 0:r.media_item)==null?void 0:h.media_type)!==e(ae).TRACK},null,8,["color","disabled"])):C("",!0)]),Q("div",Zi,[Q("div",null,[m(Gi,{queue:{isVisible:e(L)("bp3"),color:i.$vuetify.theme.current.dark?"#fff":"#000"},player:{isVisible:!0,color:i.$vuetify.theme.current.dark?"#fff":"#000"},volume:{isVisible:!e(a),color:i.$vuetify.theme.current.dark?"#fff":"#000"}},null,8,["queue","player","volume"]),m(Vt,{style:{"padding-right":"5px"},"visible-components":{repeat:{isVisible:!1},shuffle:{isVisible:!1},play:{isVisible:e(L)({breakpoint:"bp3",condition:"lt"}),withCircle:!1,icon:{staticWidth:"40px",staticHeight:"40px",color:i.$vuetify.theme.current.dark?"#fff":"#000"}},previous:{isVisible:!1},next:{isVisible:!1}}},null,8,["visible-components"])])])],8,xi),e(a)?(u(),_("div",eo,[m(Se,{width:"100%",color:"secondary","is-powered":(p=e(t).activePlayer)==null?void 0:p.powered,disabled:!e(t).activePlayer||!((v=e(t).activePlayer)!=null&&v.powered),"model-value":Math.round(((V=e(t).activePlayer)==null?void 0:V.group_volume)||0),"prepend-icon":"mdi-volume-minus","append-icon":"mdi-volume-plus","onUpdate:modelValue":d[0]||(d[0]=w=>e(t).activePlayer.group_childs.length>0?e(g).playerCommandGroupVolume(e(t).activePlayerId,w):e(g).playerCommandVolumeSet(e(t).activePlayerId,w)),"onClick:prepend":d[1]||(d[1]=w=>e(t).activePlayer.group_childs.length>0?e(g).playerCommandGroupVolume(e(t).activePlayerId,e(t).activePlayer.group_volume-5):e(g).playerCommandVolumeSet(e(t).activePlayerId,e(t).activePlayer.volume_level-5)),"onClick:append":d[2]||(d[2]=w=>e(t).activePlayer.group_childs.length>0?e(g).playerCommandGroupVolume(e(t).activePlayerId,e(t).activePlayer.group_volume+5):e(g).playerCommandVolumeSet(e(t).activePlayerId,e(t).activePlayer.volume_level+5))},null,8,["is-powered","disabled","model-value"])])):C("",!0)],64)}}}),ao=x(to,[["__scopeId","data-v-3edee708"]]),lo=le({app:Boolean,color:String,height:{type:[Number,String],default:"auto"},...Lt(),...be(),...Rt(),...Xt(),...Ht(),...Qe({tag:"footer"}),...We()},"VFooter"),io=ie()({name:"VFooter",props:lo(),setup(l,a){let{slots:s}=a;const o=M(),{themeClasses:n}=je(l),{backgroundColorClasses:i,backgroundColorStyles:d}=Ke(X(l,"color")),{borderClasses:c}=Ut(l),{elevationClasses:f}=Dt(l),{roundedClasses:r}=Nt(l),h=Be(32),{resizeRef:p}=Oa(V=>{V.length&&(h.value=V[0].target.clientHeight)}),v=I(()=>l.height==="auto"?h.value:parseInt(l.height,10));return Ba(()=>l.app,()=>{const V=Gt({id:l.name,order:I(()=>parseInt(l.order,10)),position:I(()=>"bottom"),layoutSize:v,elementSize:I(()=>l.height==="auto"?void 0:v.value),active:I(()=>l.app),absolute:X(l,"absolute")});Ma(()=>{o.value=V.layoutItemStyles.value})}),oe(()=>m(l.tag,{ref:p,class:["v-footer",n.value,i.value,c.value,f.value,r.value,l.class],style:[d.value,l.app?o.value:{height:Ce(l.height)},l.style]},s)),{}}}),oo=z({__name:"Footer",setup(l){const a=I(()=>t.navigationMenuStyle=="horizontal"),s=I(()=>t.navigationMenuStyle!="horizontal"?0:t.isInStandaloneMode?100:80),o=I(()=>a.value?s.value+5:0);return(n,i)=>(u(),_(U,null,[a.value?(u(),_("div",{key:0,class:qe(n.$vuetify.theme.current.dark?"gradient-dark":"gradient-light"),style:R(`
      position: fixed;
      width: 100%;
      height: ${s.value+(e(L)("bp3")?100:70)}px;
      bottom: 0px;
      z-index: 999;
    `)},null,6)):C("",!0),e(t).navigationMenuStyle=="horizontal"?(u(),$(Hl,{key:1,height:s.value},null,8,["height"])):C("",!0),m(io,{bottom:"",fixed:"",class:qe(`d-flex flex-column ${a.value?"mediacontrols-player-float":"mediacontrols-player-default"}`),style:R(`bottom: ${o.value}px;`),elevation:"10",app:""},{default:y(()=>[m(ao,{"use-floating-player":a.value},null,8,["use-floating-player"])]),_:1},8,["class","style"])],64))}}),so={class:"player-media-thumb"},no={key:1},ro={key:2,class:"icon-thumb"},uo={style:{"margin-bottom":"3px"}},co={key:0,style:{"font-size":"0.85rem","font-weight":"500","white-space":"nowrap"}},mo={key:0},vo={key:0},po={key:1},yo={key:2},fo={class:"v-list-item-subtitle",style:{"white-space":"nowrap"}},ho={key:0},_o={key:1},go={key:2},bo={key:3},wo={key:4},ko={key:5},Po={key:6},Co=z({__name:"PlayerCard",props:{player:{},showVolumeControl:{type:Boolean},showMenuButton:{type:Boolean},showSubPlayers:{type:Boolean},showSyncControls:{type:Boolean}},setup(l){const a=l,s=I(()=>{if(a.player&&a.player.active_source in g.queues)return g.queues[a.player.active_source];if(a.player&&!a.player.active_source&&a.player.player_id in g.queues)return g.queues[a.player.player_id]}),o=I(()=>{if(s.value&&s.value.active)return s.value.current_item}),n=function(i){ce.emit("contextmenu",{items:ra(a.player,s.value),posX:i.clientX,posY:i.clientY})};return(i,d)=>(u(),$(Ie,{flat:"",class:qe(["panel-item",{"panel-item-selected":i.player.player_id==e(t).activePlayerId,"panel-item-idle":i.player.state==e(ze).IDLE,"panel-item-off":!i.player.powered}]),ripple:!1},{default:y(()=>[m(se,{class:"panel-item-details",flat:"",ripple:!1},{prepend:y(()=>{var c,f,r,h;return[Q("div",so,[i.player.powered&&((c=o.value)!=null&&c.media_item)||(f=o.value)!=null&&f.image?(u(),$(fe,{key:0,class:"media-thumb",size:"55",item:((r=o.value)==null?void 0:r.media_item)||o.value,fallback:e(Ae)},null,8,["item","fallback"])):i.player.powered&&!s.value&&((h=i.player.current_media)!=null&&h.image_url)?(u(),_("div",no,[m(Je,{class:"media-thumb",size:"55",src:i.player.current_media.image_url},null,8,["src"])])):(u(),_("div",ro,[m(A,{size:"35",icon:i.player.type==e(ge).PLAYER&&i.player.group_childs.length?"mdi-speaker-multiple":i.player.icon,style:{display:"table-cell",opacity:"0.8"}},null,8,["icon"])]))])]}),title:y(()=>[Q("div",uo,P(e(Re)(i.player,27)),1)]),subtitle:y(()=>{var c,f,r,h,p,v,V;return[i.player.powered?(u(),_("div",co,[(c=o.value)!=null&&c.media_item?(u(),_("div",mo,[E(P((f=o.value)==null?void 0:f.media_item.name)+" ",1),"version"in((r=o.value)==null?void 0:r.media_item)&&((h=o.value)!=null&&h.media_item.version)?(u(),_("span",vo,"("+P((p=o.value)==null?void 0:p.media_item.version)+")",1)):C("",!0)])):o.value?(u(),_("div",po,P((v=o.value)==null?void 0:v.name),1)):(V=i.player.current_media)!=null&&V.title?(u(),_("div",yo,P(i.player.current_media.title),1)):C("",!0)])):C("",!0)]}),default:y(()=>{var c,f,r,h,p,v,V,w,B,D,K,O,G,b,k,T,q,F,j;return[Q("div",fo,[i.player.powered?(c=o.value)!=null&&c.media_item&&((r=(f=o.value)==null?void 0:f.media_item)==null?void 0:r.media_type)==e(ae).TRACK&&"album"in((h=o.value)==null?void 0:h.media_item)&&((p=o.value)!=null&&p.media_item.album)?(u(),_("div",_o,P(e(At)((v=o.value)==null?void 0:v.media_item.artists))+" • "+P((V=o.value)==null?void 0:V.media_item.album.name),1)):(w=o.value)!=null&&w.media_item&&"artists"in((B=o.value)==null?void 0:B.media_item)&&((D=o.value)==null?void 0:D.media_item.artists.length)>0?(u(),_("div",go,P((K=o.value)==null?void 0:K.media_item.artists[0].name),1)):(G=(O=o.value)==null?void 0:O.streamdetails)!=null&&G.stream_title?(u(),_("div",bo,P((k=(b=o.value)==null?void 0:b.streamdetails)==null?void 0:k.stream_title),1)):(q=(T=o.value)==null?void 0:T.media_item)!=null&&q.metadata.description?(u(),_("div",wo,P((F=o.value)==null?void 0:F.media_item.metadata.description),1)):i.player.active_source!=i.player.player_id?(u(),_("div",ko,P(i.$t("external_source_active",[i.player.active_source])),1)):((j=s.value)==null?void 0:j.items)==0?(u(),_("div",Po,P(i.$t("queue_empty")),1)):C("",!0):(u(),_("div",ho,P(i.$t("off")),1))])]}),append:y(()=>[i.player.powered?C("",!0):(u(),$(ee,{key:0,variant:"icon",class:"player-command-btn",onClick:d[0]||(d[0]=c=>{e(g).playerCommandPowerToggle(i.player.player_id),e(t).activePlayerId=i.player.player_id})},{default:y(()=>[m(A,{size:e(L)({breakpoint:"phone"})?"30":"32"},{default:y(()=>d[2]||(d[2]=[E("mdi-power")])),_:1},8,["size"])]),_:1})),i.player.powered?(u(),$(tt,{key:1,player:i.player,"player-queue":s.value,class:"player-command-btn",style:{height:"50px"},"icon-style":"circle-outline",onClick:d[1]||(d[1]=J(c=>{i.player.state!=e(ze).PLAYING&&(e(t).activePlayerId=i.player.player_id)},["stop"]))},null,8,["player","player-queue"])):C("",!0),i.showMenuButton?(u(),$(ee,{key:2,variant:"icon",class:"player-command-btn",style:{"margin-right":"-5px"},onClick:J(n,["stop"])},{default:y(()=>[m(A,{size:e(L)({breakpoint:"phone"})?"30":"32"},{default:y(()=>d[3]||(d[3]=[E("mdi-dots-vertical")])),_:1},8,["size"])]),_:1})):C("",!0)]),_:1}),i.showVolumeControl&&i.player.powered?(u(),$(ua,{key:0,player:i.player,"show-sync-controls":i.showSyncControls,"hide-heading-row":!0,"show-sub-players":i.showSubPlayers,"allow-wheel":!1},null,8,["player","show-sync-controls","show-sub-players"])):C("",!0)]),_:1},8,["class"]))}}),$t=x(Co,[["__scopeId","data-v-1ee32b53"]]),Vo=z({__name:"PlayerSelect",setup(l){const a=M(!1),s=I(()=>Object.values(g.players).filter(c=>n(c,!1,!1,!1)).sort((c,f)=>{var r;return c.display_name.toUpperCase()>((r=f.display_name)==null?void 0:r.toUpperCase())?1:-1}).sort((c,f)=>Number(f.powered)-Number(c.powered)));ne(()=>t.activePlayerId,c=>{c&&localStorage.setItem("mass.LastPlayerId",c)}),ne(()=>g.players,c=>{c&&!t.activePlayer&&i()},{deep:!0}),ne(()=>g.state,c=>{c.value!=qa.CONNECTED&&(t.activePlayerId=void 0)},{deep:!0});function o(c,f=!1){t.activePlayerId==c.player_id?a.value=!a.value:(a.value=!1,t.activePlayerId=c.player_id),f&&(t.showPlayersMenu=!1)}Le(()=>{i()});const n=function(c,f=!0,r=!1,h=!1){return!(!c.enabled||!h&&c.hidden||!f&&!c.available||c.synced_to&&!r||!r&&c.type==ge.PLAYER&&c.active_group)},i=function(){if(t.activePlayer&&n(t.activePlayer,!1,!1,!1))return;const c=d();c&&(t.activePlayerId=c.player_id)},d=function(){const c=localStorage.getItem("mass.LastPlayerId");if(c&&c in g.players&&n(g.players[c],!1,!1,!1))return g.players[c]};return(c,f)=>(u(),_(U,null,[m(jt,{modelValue:e(t).showPlayersMenu,"onUpdate:modelValue":f[0]||(f[0]=r=>e(t).showPlayersMenu=r)},null,8,["modelValue"]),m(ma,{modelValue:e(t).showPlayersMenu,"onUpdate:modelValue":f[2]||(f[2]=r=>e(t).showPlayersMenu=r),location:"right",app:"",clipped:"",temporary:"",touchless:"",width:500,style:{"z-index":"99999"},"z-index":"99999"},{default:y(()=>[Q("div",null,[m(Pe,{class:"title"},{default:y(()=>[Q("b",null,P(c.$t("players")),1)]),_:1}),m(ee,{variant:"icon",style:{float:"right",top:"-40px",height:"0"},onClick:f[1]||(f[1]=r=>e(t).showPlayersMenu=!1)},{default:y(()=>[m(A,{size:"30"},{default:y(()=>f[3]||(f[3]=[E("mdi-window-close")])),_:1})]),_:1}),m(Ve,{flat:"",style:{margin:"5px 5px"}},{default:y(()=>[(u(!0),_(U,null,Z(s.value.filter(r=>r.powered),r=>(u(),$($t,{id:r.player_id,key:r.player_id,player:r,"show-volume-control":!0,"show-menu-button":!0,"show-sub-players":a.value&&r.player_id==e(t).activePlayerId,"show-sync-controls":r.supported_features.includes(e(te).SET_MEMBERS),onClick:h=>o(r)},null,8,["id","player","show-sub-players","show-sync-controls","onClick"]))),128))]),_:1}),m(sl,{variant:"accordion",flat:"",class:"expansion"},{default:y(()=>[m(nl,{title:c.$t("powered_off_players"),style:{padding:"0"}},{default:y(()=>[m(rl,{style:{padding:"0"}},{default:y(()=>[m(Ve,{flat:""},{default:y(()=>[(u(!0),_(U,null,Z(s.value.filter(r=>!r.powered),r=>(u(),$($t,{id:r.player_id,key:r.player_id,player:r,"show-volume-control":!1,"show-menu-button":!0,"show-sub-players":!1,"show-sync-controls":!1,onClick:h=>o(r)},null,8,["id","player","onClick"]))),128))]),_:1})]),_:1})]),_:1},8,["title"])]),_:1})])]),_:1},8,["modelValue"])],64))}}),$o=x(Vo,[["__scopeId","data-v-51813f54"]]);function Io(l={}){const{immediate:a=!1,onNeedRefresh:s,onOfflineReady:o,onRegistered:n,onRegisteredSW:i,onRegisterError:d}=l;let c,f,r;const h=async(v=!0)=>{await f,await(r==null?void 0:r())};async function p(){if("serviceWorker"in navigator){if(c=await za(async()=>{const{Workbox:v}=await import("./workbox-window.prod.es5-D5gOYdM7.js");return{Workbox:v}},[],import.meta.url).then(({Workbox:v})=>new v("./sw.js",{scope:"./",type:"classic"})).catch(v=>{d==null||d(v)}),!c)return;r=async()=>{await(c==null?void 0:c.messageSkipWaiting())};{let v=!1;const V=()=>{v=!0,c==null||c.addEventListener("controlling",w=>{w.isUpdate&&window.location.reload()}),s==null||s()};c.addEventListener("installed",w=>{typeof w.isUpdate>"u"?typeof w.isExternal<"u"?w.isExternal?V():!v&&(o==null||o()):w.isExternal?window.location.reload():!v&&(o==null||o()):w.isUpdate||o==null||o()}),c.addEventListener("waiting",V),c.addEventListener("externalwaiting",V)}c.register({immediate:a}).then(v=>{i?i("./sw.js",v):n==null||n(v)}).catch(v=>{d==null||d(v)})}}return f=p(),h}function So(l={}){const{immediate:a=!0,onNeedRefresh:s,onOfflineReady:o,onRegistered:n,onRegisteredSW:i,onRegisterError:d}=l,c=M(!1),f=M(!1);return{updateServiceWorker:Io({immediate:a,onNeedRefresh(){c.value=!0,s==null||s()},onOfflineReady(){f.value=!0,o==null||o()},onRegistered:n,onRegisteredSW:i,onRegisterError:d}),offlineReady:f,needRefresh:c}}const Qo={key:0,class:"pwa-toast",role:"alert"},To={class:"message"},Bo={key:0},Mo={key:1},qo=z({__name:"ReloadPrompt",setup(l){const{offlineReady:a,needRefresh:s,updateServiceWorker:o}=So(),n=async()=>{a.value=!1,s.value=!1};return(i,d)=>e(a)||e(s)?(u(),_("div",Qo,[Q("div",To,[e(a)?(u(),_("span",Bo," App ready to work offline ")):(u(),_("span",Mo," New content available, click on reload button to update. "))]),e(s)?(u(),_("button",{key:0,onClick:d[0]||(d[0]=c=>e(o)())},"Reload")):C("",!0),Q("button",{onClick:n},"Close")])):C("",!0)}}),zo=le({...be(),...xa({fullHeight:!0}),...We()},"VApp"),Eo=ie()({name:"VApp",props:zo(),setup(l,a){let{slots:s}=a;const o=je(l),{layoutClasses:n,getLayoutItem:i,items:d,layoutRef:c}=Ka(l),{rtlClasses:f}=Mt();return oe(()=>{var r;return m("div",{ref:c,class:["v-application",o.themeClasses.value,n.value,f.value,l.class],style:[l.style]},[m("div",{class:"v-application__wrap"},[(r=s.default)==null?void 0:r.call(s)])])}),{getLayoutItem:i,items:d,theme:o}}}),Ao=z({__name:"Default",setup(l){return(a,s)=>(u(),_(U,null,[e(t).connected?(u(),$(Eo,{key:0},{default:y(()=>[m($o),m(bl),m(oo)]),_:1})):(u(),$(jt,{key:1,class:"centeredoverlay",persistent:"","model-value":!e(t).connected},{default:y(()=>[Q("div",null,[m(Ya,{color:"primary",indeterminate:"",size:"64"})])]),_:1},8,["model-value"])),e(t).isInStandaloneMode?(u(),$(qo,{key:2})):C("",!0)],64))}}),ls=x(Ao,[["__scopeId","data-v-b295b190"]]);export{ls as default};
