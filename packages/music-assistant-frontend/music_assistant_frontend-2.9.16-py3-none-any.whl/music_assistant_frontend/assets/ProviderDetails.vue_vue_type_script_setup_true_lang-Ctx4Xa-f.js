import{p as Q,k as ee,f as t,d as Y,r as U,c as a,h as m,w as i,D as X,a0 as N,Z as te,Y as ie,a8 as ae,au as oe,a7 as le,K as ne,x as P,M as F,ai as z,u,e as v,j as f,g as C,W as D,t as y,av as se,F as B,i as S,af as re,s as L,b as x,a5 as H,aw as me,_ as ue,V as de}from"./index-daC-2ZJk.js";import{_ as Z}from"./eventbus-B1FqU8Ma.js";import{g as A,e as pe,M as j,f as ce,h as fe}from"./VCheckbox-09hulYIT.js";import{m as ye,a as ve,u as ge,c as he,s as R,w as $,C as ke,x as q,D as W,V as E}from"./VListItem-pK5S0aIW.js";import{V as be}from"./VMenu-DVqF3YlC.js";import{T as J}from"./Toolbar-Dhk3Ksr9.js";import{V as O,a as we}from"./VCard-mAz7Y-VQ.js";import{V as Ce}from"./VDialog-BINLdENu.js";import{V as _e,a as I,b as $e}from"./VCardText-Ci9lya7y.js";import{b as Ve}from"./ItemsListing-Dl4AIHip.js";import{a as K,V as M}from"./VList-8n21ZlQT.js";import{a as Te}from"./VCheckboxBtn-jt6ftUKR.js";import{b as Le,c as Ie}from"./layout-Duih1ET2.js";import{_ as Pe}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{L as De}from"./ListItem-CGGJfPGv.js";import{C as xe}from"./Container-DzPH7nZE.js";const Re=Q({...ye(),...ve(),...Le()},"VLayout"),ze=ee()({name:"VLayout",props:Re(),setup(w,l){let{slots:p}=l;const{layoutClasses:g,layoutStyles:d,getLayoutItem:h,items:c,layoutRef:T}=Ie(w),{dimensionStyles:r}=ge(w);return he(()=>{var k;return t("div",{ref:T,class:[g.value,w.class],style:[r.value,d.value,w.style]},[(k=p.default)==null?void 0:k.call(p)])}),{getLayoutItem:h,items:c}}}),Ae=Y({__name:"MenuButton",props:{icon:{default:void 0},text:{default:void 0},disabled:{type:Boolean,default:!1},width:{default:200},openMenuOnClick:{type:Boolean,default:!1}},emits:["click"],setup(w,{emit:l}){const p=U(!1),g=l;return(d,h)=>(a(),m("div",{style:N(`width: ${d.width}px; height: 30px;`)},[t(be,{modelValue:p.value,"onUpdate:modelValue":h[0]||(h[0]=c=>p.value=c),"close-on-content-click":!0,"nudge-width":200,"offset-x":"",scrim:"!store.showPlayersMenu","z-index":"100"},{activator:i(({props:c})=>[t(R,X({variant:"tonal"},c,{style:`
            width: ${d.width}px;
            position: absolute;
            border: 1px solid #cccccc4d;
            height: 38px;
            margin-top: -1px;
            margin-left: -1px;
          `}),{default:i(()=>[t($,{icon:"mdi-menu-down",size:"xx-large",style:N(`width: 20px; margin-left: ${d.width-42}px`)},null,8,["style"])]),_:2},1040,["style"])]),default:i(()=>[te(d.$slots,"menu")]),_:3},8,["modelValue"]),t(R,{color:"primary",flat:"",disabled:d.disabled,style:N(`width: ${d.width-40}px; justify-content: left;`),text:d.text,onClick:h[1]||(h[1]=c=>d.openMenuOnClick?p.value=!p.value:g("click"))},ie({_:2},[d.icon&&d.text.length<12?{name:"prepend",fn:i(()=>[t($,{icon:d.icon,size:"x-large"},null,8,["icon"])]),key:"0"}:void 0]),1032,["disabled","style","text"])],4))}}),Be={key:0,xs5:"","pa-5":"",style:{height:"80%","min-width":"230px","margin-top":"25px","margin-bottom":"15px","margin-right":"24px","align-content":"center"}},Se={key:0},He={key:1},Ue={style:{width:"100%","text-align":"left"}},Fe=["src"],Ne={style:{"padding-bottom":"10px"}},je=["onClick"],Ee={style:{color:"primary"}},Oe={style:{display:"flex","margin-left":"14px","padding-bottom":"10px",cursor:"pointer !important"}},Ke=["innerHTML"],Ye={key:3,class:"justify-center",style:{"margin-left":"15px","padding-bottom":"20px"}},Ge=Y({__name:"InfoHeader",props:{item:{}},setup(w){const l=w,p=U(!1),g=U(),{mobile:d}=ae(),h=new URL(""+new URL("info_gradient-C5d1dalX.jpg",import.meta.url).href,import.meta.url).href,c=oe();le(),ne(()=>l.item,async e=>{e&&(g.value=A(l.item,z.FANART)||A(l.item,z.LANDSCAPE)||A(l.item,z.THUMB)||h)},{immediate:!0});const T=function(e){c.push({name:"album",params:{itemId:e.item_id,provider:e.provider}})},r=function(e){c.push({name:"artist",params:{itemId:e.item_id,provider:e.provider}})},k=function(){var s;if(L.prevRoute){c.back();return}const e=((s=c.currentRoute.value.name)==null?void 0:s.toString())||"";for(const o of["artist","album","track","playlist","radio"])if(e.includes(o)){c.push({name:`${o}s`});return}c.push({name:"home"})},b=P(()=>l.item?l.item.metadata&&l.item.metadata.description?l.item.metadata.description:l.item.metadata&&l.item.metadata.copyright?l.item.metadata.copyright:("artists"in l.item&&l.item.artists.forEach(function(e){if("metadata"in e&&e.metadata.description)return e.metadata.description}),""):""),n=P(()=>b.value.replace(/(\r\n|\n|\r)/gm,"<br /><br />")),_=P(()=>{const e=d.value?160:300;return b.value.length>e?b.value.replace(/(\r\n|\n|\r)/gm," ").substring(0,e)+"...":b.value.replace(/(\r\n|\n|\r)/gm," ")}),G=P(()=>{if(l.item&&l.item.media_type==F.ARTIST)return A(l.item,z.LOGO)});return(e,s)=>(a(),m("div",null,[t(O,{variant:"flat",img:u(h),style:{"z-index":"0","border-radius":"0px"},height:"25vh","max-height":"500px","min-height":"340px"},{default:i(()=>[e.item?f("",!0):(a(),v(ke,{key:0,indeterminate:""})),t(q,{width:"100%",height:"100%",cover:"",class:"background-image",src:g.value,gradient:e.$vuetify.theme.current.dark?"to bottom, rgba(0,0,0,.90), rgba(0,0,0,.75)":"to bottom, rgba(255,255,255,.90), rgba(255,255,255,.75)"},null,8,["src","gradient"]),t(J,{icon:"mdi-arrow-left",style:{position:"absolute"},"menu-items":e.item?u(pe)([e.item],e.item):[],"enforce-overflow-menu":!0,"show-loading":!0,onIconClicked:k},null,8,["menu-items"]),e.item?(a(),v(ze,{key:1,style:{margin:"0",top:"55%","-ms-transform":"translateY(-50%)",transform:"translateY(-50%)","padding-left":"15px","align-items":"center","padding-right":"15px"}},{default:i(()=>[e.$vuetify.display.mobile?f("",!0):(a(),m("div",Be,[e.item.media_type&&e.item.media_type==u(F).ARTIST?(a(),m("div",Se,[t(W,{size:"210",style:{"margin-bottom":"10%"}},{default:i(()=>[t(j,{item:e.item,size:"calc(100%)"},null,8,["item"])]),_:1})])):(a(),m("div",He,[t(j,{item:e.item,size:"calc(100%)",style:{"max-height":"256px"}},null,8,["item"])]))])),C("div",Ue,[G.value?(a(),m("img",{key:0,src:G.value,width:"auto",height:"80",style:{"padding-left":"10px"}},null,8,Fe)):(a(),v(_e,{key:1},{default:i(()=>[D(y(e.item.name),1)]),_:1})),C("div",Ne,["version"in e.item&&e.item.version?(a(),v(I,{key:0,class:"caption"},{default:i(()=>[D(y(e.item.version)+" ",1),t(Ve,{location:"bottom"},{activator:i(({props:o})=>[u(se)(e.item.metadata.explicit||!1)?(a(),v($,X({key:0},o,{icon:"mdi-alpha-e-box",width:"35"}),null,16)):f("",!0)]),default:i(()=>[C("span",null,y(e.$t("tooltip.explicit")),1)]),_:1})]),_:1})):f("",!0),"artists"in e.item&&e.item.artists?(a(),v(I,{key:1,class:"title accent--text"},{default:i(()=>[t($,{style:{"margin-left":"-3px","margin-right":"3px"},small:"",color:"primary",icon:"mdi-account-music"}),(a(!0),m(B,null,S(e.item.artists,(o,V)=>(a(),m("span",{key:o.item_id},[C("a",{style:{color:"accent"},onClick:Je=>r(o)},y(o.name),9,je),V+1<e.item.artists.length?(a(),m("span",{key:V,style:{color:"accent"}},y(" / "))):f("",!0)]))),128))]),_:1})):f("",!0),"owner"in e.item&&e.item.owner?(a(),v(I,{key:2,class:"title"},{default:i(()=>[t($,{color:"primary",style:{"margin-left":"-3px","margin-right":"3px"},small:"",icon:"mdi-account-music"}),C("a",Ee,y(e.item.owner),1)]),_:1})):f("",!0),"album"in e.item&&e.item.album?(a(),v(I,{key:3},{default:i(()=>[t($,{color:"primary",style:{"margin-left":"-3px","margin-right":"3px"},small:"",icon:"mdi-album"}),C("a",{style:{color:"secondary"},onClick:s[0]||(s[0]=o=>{var V;return T((V=e.item)==null?void 0:V.album)})},y(e.item.album.name),1)]),_:1})):f("",!0)]),C("div",Oe,[t(Ae,{width:220,icon:"mdi-play-circle-outline",text:u(re)(e.$t("play"),14),disabled:!e.item,"open-menu-on-click":!u(L).activePlayer,onClick:s[2]||(s[2]=o=>u(x).playMedia(e.item))},{menu:i(()=>[t(O,{width:"320"},{default:i(()=>[t(K,null,{default:i(()=>[t(E,{title:e.item.name,link:""},{prepend:i(()=>[t(W,null,{default:i(()=>[t(j,{item:e.item,size:"80"},null,8,["item"])]),_:1})]),title:i(()=>{var o;return[t(E,{variant:"text",title:e.$t("play_on"),subtitle:((o=u(L).activePlayer)==null?void 0:o.display_name)||e.$t("no_player"),onClick:s[1]||(s[1]=H(V=>u(L).showPlayersMenu=!0,["stop"]))},null,8,["title","subtitle"])]}),_:1},8,["title"])]),_:1}),t(M),t(K,{density:"compact",slim:"",tile:"",disabled:!u(L).activePlayer},{default:i(()=>[(a(!0),m(B,null,S(u(ce)([e.item],e.item),o=>(a(),m("div",{key:o.label},[t(E,{title:e.$t(o.label,o.labelArgs||[]),density:"compact",onClick:o.action},{prepend:i(()=>[t($,{style:{"padding-left":"15px"},icon:o.icon},null,8,["icon"])]),_:2},1032,["title","onClick"])]))),128))]),_:1},8,["disabled"])]),_:1})]),_:1},8,["text","disabled","open-menu-on-click"]),t(R,{variant:"plain",ripple:"",icon:e.item.favorite?"mdi-heart":"mdi-heart-outline",size:"x-large",style:{"margin-top":"-14px"},title:e.$t("tooltip.favorite"),onClick:[s[3]||(s[3]=o=>u(x).toggleFavorite(e.item)),s[4]||(s[4]=H(()=>{},["prevent"])),s[5]||(s[5]=H(()=>{},["stop"]))]},null,8,["icon","title"]),t(Z,{domain:e.item.provider,size:25,style:{"margin-top":"6px"}},null,8,["domain"])]),_.value?(a(),v(I,{key:2,class:"body-2 justify-left",style:{"padding-bottom":"10px","white-space":"pre-line",cursor:"pointer"},onClick:s[6]||(s[6]=o=>p.value=!p.value)},{default:i(()=>[C("div",{innerHTML:_.value},null,8,Ke)]),_:1})):f("",!0),e.item&&e.item.metadata.genres?(a(),m("div",Ye,[(a(!0),m(B,null,S(e.item.metadata.genres.slice(0,e.$vuetify.display.mobile?15:25),o=>(a(),v(Te,{key:o,color:"blue-grey lighten-1",style:{"margin-right":"5px","margin-bottom":"5px"},small:"",outlined:""},{default:i(()=>[D(y(o),1)]),_:2},1024))),128))])):f("",!0)])]),_:1})):f("",!0)]),_:1},8,["img"]),t(Ce,{modelValue:p.value,"onUpdate:modelValue":s[8]||(s[8]=o=>p.value=o),"max-width":"975",width:"auto"},{default:i(()=>[t(O,null,{default:i(()=>[t($e,{innerHTML:n.value},null,8,["innerHTML"]),t(we,null,{default:i(()=>[t(R,{color:"primary",block:"",onClick:s[7]||(s[7]=o=>p.value=!1)},{default:i(()=>[D(y(e.$t("close")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}}),ft=Pe(Ge,[["__scopeId","data-v-fddbe0fe"]]),We={style:{"margin-bottom":"10px"}},Xe={key:0},Ze=["title","onClick"],qe=["title"],yt=Y({__name:"ProviderDetails",props:{itemDetails:{}},setup(w){const l=U(!1),p=function(r){window.open(r,"_blank")},g=me({}),d=function(r){const k=`${r.provider_instance}.${r.item_id}`,b=g[k];if(b)b.load(),delete g[k];else{const n=new Audio(h(r.provider_instance,r.item_id));g[k]=n,n.play()}},h=function(r,k){return`${x.baseUrl}/preview?item_id=${encodeURIComponent(k)}&provider=${r}`},c=function(){l.value=!l.value},T=P(()=>[{label:"tooltip.collapse_expand",icon:l.value?"mdi-chevron-up":"mdi-chevron-down",action:c,overflowAllowed:!1}]);return(r,k)=>(a(),m("section",We,[t(J,{title:r.$t("mapped_providers"),"menu-items":T.value,onTitleClicked:c},null,8,["title","menu-items"]),t(M),l.value?(a(),v(xe,{key:0},{default:i(()=>[t(K,null,{default:i(()=>{var b;return[(a(!0),m(B,null,S((b=r.itemDetails)==null?void 0:b.provider_mappings,n=>(a(),v(De,{key:n.provider_instance,disabled:!n.available||!u(x).getProvider(n.provider_instance)},{prepend:i(()=>[t(Z,{domain:n.provider_domain,size:30},null,8,["domain"])]),title:i(()=>{var _;return[D(y((_=u(x).providerManifests[n.provider_domain])==null?void 0:_.name),1)]}),subtitle:i(()=>[r.itemDetails.media_type==u(F).TRACK&&n.audio_format?(a(),m("span",Xe,y(n.audio_format.content_type)+" | "+y(n.audio_format.sample_rate/1e3)+"kHz/"+y(n.audio_format.bit_depth)+" bits | ",1)):f("",!0),n.url&&!n.provider_domain.startsWith("file")?(a(),m("a",{key:1,style:{opacity:"0.4"},title:r.$t("tooltip.open_provider_link"),onClick:H(_=>p(n.url),["prevent"])},y(n.url),9,Ze)):(a(),m("span",{key:2,style:{opacity:"0.4"},title:n.item_id},y(n.item_id),9,qe))]),append:i(()=>[n.audio_format&&n.audio_format.bit_depth>16?(a(),v(q,{key:0,src:u(fe),width:"30",class:ue(r.$vuetify.theme.current.dark?"hiresicondark":"hiresicon"),style:{"margin-right":"15px"}},null,8,["src","class"])):f("",!0),u(de)("bp1")&&r.itemDetails.media_type==u(F).TRACK?(a(),v(R,{key:1,icon:g[`${n.provider_instance}.${n.item_id}`]?"mdi-pause":"mdi-play-circle",title:r.$t("tooltip.play_sample"),onClick:_=>d(n)},null,8,["icon","title","onClick"])):f("",!0)]),_:2},1032,["disabled"]))),128))]}),_:1})]),_:1})):f("",!0)]))}});export{ft as I,yt as _};
