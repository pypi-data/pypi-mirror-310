(self.webpackChunkjupyterlab_chat_extension=self.webpackChunkjupyterlab_chat_extension||[]).push([[36],{9036:(e,t,s)=>{"use strict";s.r(t),s.d(t,{ICollaborativeDrive:()=>xe,WebSocketAwarenessProvider:()=>ke,WebSocketProvider:()=>Me,YDrive:()=>Ee});var n=s(4602);const o=127,r=Math.floor,a=(Math.ceil,Math.abs,Math.imul,Math.round,Math.log10,Math.log2,Math.log,Math.sqrt,(e,t)=>e<t?e:t),i=(Number.isNaN,Math.pow),c=(Math.sign,Number.MAX_SAFE_INTEGER),l=(Number.MIN_SAFE_INTEGER,Number.isInteger,Number.isNaN,Number.parseInt,String.fromCharCode),h=(String.fromCodePoint,l(65535),/^\s*/g),d=/([A-Z])/g,u=(e,t)=>(e=>e.replace(h,""))(e.replace(d,(e=>`${t}${(e=>e.toLowerCase())(e)}`))),f="undefined"!=typeof TextEncoder?new TextEncoder:null,p=f?e=>f.encode(e):e=>{const t=unescape(encodeURIComponent(e)),s=t.length,n=new Uint8Array(s);for(let e=0;e<s;e++)n[e]=t.codePointAt(e);return n};let g="undefined"==typeof TextDecoder?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});g&&1===g.decode(new Uint8Array).length&&(g=null);const y=e=>new Error(e),m=y("Unexpected end of array"),w=y("Integer out of Range");class b{constructor(e){this.arr=e,this.pos=0}}const _=e=>new b(e),v=e=>((e,t)=>{const s=new Uint8Array(e.arr.buffer,e.pos+e.arr.byteOffset,t);return e.pos+=t,s})(e,S(e)),C=e=>e.arr[e.pos++],S=e=>{let t=0,s=1;const n=e.arr.length;for(;e.pos<n;){const n=e.arr[e.pos++];if(t+=(n&o)*s,s*=128,n<128)return t;if(t>c)throw w}throw m},U=g?e=>g.decode(v(e)):e=>{let t=S(e);if(0===t)return"";{let s=String.fromCodePoint(C(e));if(--t<100)for(;t--;)s+=String.fromCodePoint(C(e));else for(;t>0;){const n=t<1e4?t:1e4,o=e.arr.subarray(e.pos,e.pos+n);e.pos+=n,s+=String.fromCodePoint.apply(null,o),t-=n}return decodeURIComponent(escape(s))}};class k{constructor(){this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]}}const I=()=>new k,T=e=>{let t=e.cpos;for(let s=0;s<e.bufs.length;s++)t+=e.bufs[s].length;return t},A=e=>{const t=new Uint8Array(T(e));let s=0;for(let n=0;n<e.bufs.length;n++){const o=e.bufs[n];t.set(o,s),s+=o.length}return t.set(new Uint8Array(e.cbuf.buffer,0,e.cpos),s),t},D=(e,t)=>{const s=e.cbuf.length;e.cpos===s&&(e.bufs.push(e.cbuf),e.cbuf=new Uint8Array(2*s),e.cpos=0),e.cbuf[e.cpos++]=t},M=(e,t)=>{for(;t>o;)D(e,128|o&t),t=r(t/128);D(e,o&t)},L=new Uint8Array(3e4),E=L.length/3,R=f&&f.encodeInto?(e,t)=>{if(t.length<E){const s=f.encodeInto(t,L).written||0;M(e,s);for(let t=0;t<s;t++)D(e,L[t])}else x(e,p(t))}:(e,t)=>{const s=unescape(encodeURIComponent(t)),n=s.length;M(e,n);for(let t=0;t<n;t++)D(e,s.codePointAt(t))},x=(e,t)=>{M(e,t.byteLength),((e,t)=>{const s=e.cbuf.length,n=e.cpos,o=a(s-n,t.length),r=t.length-o;var i,c;e.cbuf.set(t.subarray(0,o),n),e.cpos+=o,r>0&&(e.bufs.push(e.cbuf),e.cbuf=new Uint8Array((i=2*s)>(c=r)?i:c),e.cbuf.set(t.subarray(o)),e.cpos=r)})(e,t)};new DataView(new ArrayBuffer(4));var O=s(2206);const N=()=>new Map,P=(e,t,s)=>{let n=e.get(t);return void 0===n&&e.set(t,n=s()),n},$=()=>new Set;let B=new class{constructor(){this.map=new Map}setItem(e,t){this.map.set(e,t)}getItem(e){return this.map.get(e)}},H=!0;try{"undefined"!=typeof localStorage&&localStorage&&(B=localStorage,H=!1)}catch(e){}const j=B,W=Array.from,F=(Array.isArray,Object.assign,Object.keys),J=e=>F(e).length,z=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),V=(e,t)=>{if(null==e||null==t)return((e,t)=>e===t)(e,t);if(e.constructor!==t.constructor)return!1;if(e===t)return!0;switch(e.constructor){case ArrayBuffer:e=new Uint8Array(e),t=new Uint8Array(t);case Uint8Array:if(e.byteLength!==t.byteLength)return!1;for(let s=0;s<e.length;s++)if(e[s]!==t[s])return!1;break;case Set:if(e.size!==t.size)return!1;for(const s of e)if(!t.has(s))return!1;break;case Map:if(e.size!==t.size)return!1;for(const s of e.keys())if(!t.has(s)||!V(e.get(s),t.get(s)))return!1;break;case Object:if(J(e)!==J(t))return!1;for(const s in e)if(!z(e,s)||!V(e[s],t[s]))return!1;break;case Array:if(e.length!==t.length)return!1;for(let s=0;s<e.length;s++)if(!V(e[s],t[s]))return!1;break;default:return!1}return!0};var Y=s(9907);const q=void 0!==Y&&Y.release&&/node|io\.js/.test(Y.release.name)&&"[object process]"===Object.prototype.toString.call(void 0!==Y?Y:0),G="undefined"!=typeof window&&"undefined"!=typeof document&&!q;let X;"undefined"!=typeof navigator&&/Mac/.test(navigator.platform);const Z=[],K=e=>(()=>{if(void 0===X)if(q){X=N();const e=Y.argv;let t=null;for(let s=0;s<e.length;s++){const n=e[s];"-"===n[0]?(null!==t&&X.set(t,""),t=n):null!==t?(X.set(t,n),t=null):Z.push(n)}null!==t&&X.set(t,"")}else"object"==typeof location?(X=N(),(location.search||"?").slice(1).split("&").forEach((e=>{if(0!==e.length){const[t,s]=e.split("=");X.set(`--${u(t,"-")}`,s),X.set(`-${u(t,"-")}`,s)}}))):X=N();return X})().has(e),Q=e=>{return void 0===(t=q?Y.env[e.toUpperCase().replaceAll("-","_")]:j.getItem(e))?null:t;var t};K("--"+"production")||Q("production");const ee=q&&(te=Y.env.FORCE_COLOR,["true","1","2"].includes(te));var te;!K("--no-colors")&&(!q||Y.stdout.isTTY||ee)&&(!q||K("--color")||ee||null!==Q("COLORTERM")||(Q("TERM")||"").includes("color"));const se=G?e=>{let t="";for(let s=0;s<e.byteLength;s++)t+=l(e[s]);return btoa(t)}:e=>Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("base64"),ne=G?e=>{const t=atob(e),s=(n=t.length,new Uint8Array(n));var n;for(let e=0;e<t.length;e++)s[e]=t.charCodeAt(e);return s}:e=>{const t=Buffer.from(e,"base64");return s=t.buffer,n=t.byteOffset,o=t.byteLength,new Uint8Array(s,n,o);var s,n,o},oe=new Map,re="undefined"==typeof BroadcastChannel?class{constructor(e){var t;this.room=e,this.onmessage=null,this._onChange=t=>t.key===e&&null!==this.onmessage&&this.onmessage({data:ne(t.newValue||"")}),t=this._onChange,H||addEventListener("storage",t)}postMessage(e){j.setItem(this.room,se(new Uint8Array(e)))}close(){var e;e=this._onChange,H||removeEventListener("storage",e)}}:BroadcastChannel,ae=e=>P(oe,e,(()=>{const t=$(),s=new re(e);return s.onmessage=e=>t.forEach((t=>t(e.data,"broadcastchannel"))),{bc:s,subs:t}})),ie=(e,t,s=null)=>{const n=ae(e);n.bc.postMessage(t),n.subs.forEach((e=>e(t,s)))},ce=Date.now,le=(e,t)=>{M(e,0);const s=O.encodeStateVector(t);x(e,s)},he=(e,t,s)=>{M(e,1),x(e,O.encodeStateAsUpdate(t,s))},de=(e,t,s)=>{try{O.applyUpdate(t,v(e),s)}catch(e){console.error("Caught error while handling a Yjs update",e)}},ue=de;class fe{constructor(){this._observers=N()}on(e,t){P(this._observers,e,$).add(t)}once(e,t){const s=(...n)=>{this.off(e,s),t(...n)};this.on(e,s)}off(e,t){const s=this._observers.get(e);void 0!==s&&(s.delete(t),0===s.size&&this._observers.delete(e))}emit(e,t){return W((this._observers.get(e)||N()).values()).forEach((e=>e(...t)))}destroy(){this._observers=N()}}class pe extends fe{constructor(e){super(),this.doc=e,this.clientID=e.clientID,this.states=new Map,this.meta=new Map,this._checkInterval=setInterval((()=>{const e=ce();null!==this.getLocalState()&&15e3<=e-this.meta.get(this.clientID).lastUpdated&&this.setLocalState(this.getLocalState());const t=[];this.meta.forEach(((s,n)=>{n!==this.clientID&&3e4<=e-s.lastUpdated&&this.states.has(n)&&t.push(n)})),t.length>0&&ge(this,t,"timeout")}),r(3e3)),e.on("destroy",(()=>{this.destroy()})),this.setLocalState({})}destroy(){this.emit("destroy",[this]),this.setLocalState(null),super.destroy(),clearInterval(this._checkInterval)}getLocalState(){return this.states.get(this.clientID)||null}setLocalState(e){const t=this.clientID,s=this.meta.get(t),n=void 0===s?0:s.clock+1,o=this.states.get(t);null===e?this.states.delete(t):this.states.set(t,e),this.meta.set(t,{clock:n,lastUpdated:ce()});const r=[],a=[],i=[],c=[];null===e?c.push(t):null==o?null!=e&&r.push(t):(a.push(t),V(o,e)||i.push(t)),(r.length>0||i.length>0||c.length>0)&&this.emit("change",[{added:r,updated:i,removed:c},"local"]),this.emit("update",[{added:r,updated:a,removed:c},"local"])}setLocalStateField(e,t){const s=this.getLocalState();null!==s&&this.setLocalState({...s,[e]:t})}getStates(){return this.states}}const ge=(e,t,s)=>{const n=[];for(let s=0;s<t.length;s++){const o=t[s];if(e.states.has(o)){if(e.states.delete(o),o===e.clientID){const t=e.meta.get(o);e.meta.set(o,{clock:t.clock+1,lastUpdated:ce()})}n.push(o)}}n.length>0&&(e.emit("change",[{added:[],updated:[],removed:n},s]),e.emit("update",[{added:[],updated:[],removed:n},s]))},ye=(e,t,s=e.states)=>{const n=t.length,o=I();M(o,n);for(let r=0;r<n;r++){const n=t[r],a=s.get(n)||null,i=e.meta.get(n).clock;M(o,n),M(o,i),R(o,JSON.stringify(a))}return A(o)};var me=s(9907);const we=[];we[0]=(e,t,s,n,o)=>{M(e,0);const r=((e,t,s,n)=>{const o=S(e);switch(o){case 0:((e,t,s)=>{he(t,s,v(e))})(e,t,s);break;case 1:de(e,s,n);break;case 2:ue(e,s,n);break;default:throw new Error("Unknown message type")}return o})(t,e,s.doc,s);n&&1===r&&!s.synced&&(s.synced=!0)},we[3]=(e,t,s,n,o)=>{M(e,1),x(e,ye(s.awareness,Array.from(s.awareness.getStates().keys())))},we[1]=(e,t,s,n,o)=>{((e,t,s)=>{const n=_(t),o=ce(),r=[],a=[],i=[],c=[],l=S(n);for(let t=0;t<l;t++){const t=S(n);let s=S(n);const l=JSON.parse(U(n)),h=e.meta.get(t),d=e.states.get(t),u=void 0===h?0:h.clock;(u<s||u===s&&null===l&&e.states.has(t))&&(null===l?t===e.clientID&&null!=e.getLocalState()?s++:e.states.delete(t):e.states.set(t,l),e.meta.set(t,{clock:s,lastUpdated:o}),void 0===h&&null!==l?r.push(t):void 0!==h&&null===l?c.push(t):null!==l&&(V(l,d)||i.push(t),a.push(t)))}(r.length>0||i.length>0||c.length>0)&&e.emit("change",[{added:r,updated:i,removed:c},s]),(r.length>0||a.length>0||c.length>0)&&e.emit("update",[{added:r,updated:a,removed:c},s])})(s.awareness,v(t),s)},we[2]=(e,t,s,n,o)=>{((e,t,s)=>{0===S(e)&&s(0,U(e))})(t,s.doc,((e,t)=>be(s,t)))};const be=(e,t)=>console.warn(`Permission denied to access ${e.url}.\n${t}`),_e=(e,t,s)=>{const n=_(t),o=I(),r=S(n),a=e.messageHandlers[r];return a?a(o,n,e,s,r):console.error("Unable to compute message"),o},ve=e=>{if(e.shouldConnect&&null===e.ws){const t=new e._WS(e.url);t.binaryType="arraybuffer",e.ws=t,e.wsconnecting=!0,e.wsconnected=!1,e.synced=!1,t.onmessage=s=>{e.wsLastMessageReceived=ce();const n=_e(e,new Uint8Array(s.data),!0);T(n)>1&&t.send(A(n))},t.onerror=t=>{e.emit("connection-error",[t,e])},t.onclose=t=>{e.emit("connection-close",[t,e]),e.ws=null,e.wsconnecting=!1,e.wsconnected?(e.wsconnected=!1,e.synced=!1,ge(e.awareness,Array.from(e.awareness.getStates().keys()).filter((t=>t!==e.doc.clientID)),e),e.emit("status",[{status:"disconnected"}])):e.wsUnsuccessfulReconnects++,setTimeout(ve,a(100*i(2,e.wsUnsuccessfulReconnects),e.maxBackoffTime),e)},t.onopen=()=>{e.wsLastMessageReceived=ce(),e.wsconnecting=!1,e.wsconnected=!0,e.wsUnsuccessfulReconnects=0,e.emit("status",[{status:"connected"}]);const s=I();if(M(s,0),le(s,e.doc),t.send(A(s)),null!==e.awareness.getLocalState()){const s=I();M(s,1),x(s,ye(e.awareness,[e.doc.clientID])),t.send(A(s))}},e.emit("status",[{status:"connecting"}])}},Ce=(e,t)=>{const s=e.ws;e.wsconnected&&s&&s.readyState===s.OPEN&&s.send(t),e.bcconnected&&ie(e.bcChannel,t,e)};class Se extends fe{constructor(e,t,s,{connect:n=!0,awareness:o=new pe(s),params:r={},WebSocketPolyfill:a=WebSocket,resyncInterval:i=-1,maxBackoffTime:c=2500,disableBc:l=!1}={}){for(super();"/"===e[e.length-1];)e=e.slice(0,e.length-1);const h=(e=>((e,t)=>{const s=[];for(const n in e)s.push(t(e[n],n));return s})(e,((e,t)=>`${encodeURIComponent(t)}=${encodeURIComponent(e)}`)).join("&"))(r);this.maxBackoffTime=c,this.bcChannel=e+"/"+t,this.url=e+"/"+t+(0===h.length?"":"?"+h),this.roomname=t,this.doc=s,this._WS=a,this.awareness=o,this.wsconnected=!1,this.wsconnecting=!1,this.bcconnected=!1,this.disableBc=l,this.wsUnsuccessfulReconnects=0,this.messageHandlers=we.slice(),this._synced=!1,this.ws=null,this.wsLastMessageReceived=0,this.shouldConnect=n,this._resyncInterval=0,i>0&&(this._resyncInterval=setInterval((()=>{if(this.ws&&this.ws.readyState===WebSocket.OPEN){const e=I();M(e,0),le(e,s),this.ws.send(A(e))}}),i)),this._bcSubscriber=(e,t)=>{if(t!==this){const t=_e(this,new Uint8Array(e),!1);T(t)>1&&ie(this.bcChannel,A(t),this)}},this._updateHandler=(e,t)=>{if(t!==this){const t=I();M(t,0),((e,t)=>{M(e,2),x(e,t)})(t,e),Ce(this,A(t))}},this.doc.on("update",this._updateHandler),this._awarenessUpdateHandler=({added:e,updated:t,removed:s},n)=>{const r=e.concat(t).concat(s),a=I();M(a,1),x(a,ye(o,r)),Ce(this,A(a))},this._exitHandler=()=>{ge(this.awareness,[s.clientID],"app closed")},q&&void 0!==me&&me.on("exit",this._exitHandler),o.on("update",this._awarenessUpdateHandler),this._checkInterval=setInterval((()=>{this.wsconnected&&3e4<ce()-this.wsLastMessageReceived&&this.ws.close()}),3e3),n&&this.connect()}get synced(){return this._synced}set synced(e){this._synced!==e&&(this._synced=e,this.emit("synced",[e]),this.emit("sync",[e]))}destroy(){0!==this._resyncInterval&&clearInterval(this._resyncInterval),clearInterval(this._checkInterval),this.disconnect(),q&&void 0!==me&&me.off("exit",this._exitHandler),this.awareness.off("update",this._awarenessUpdateHandler),this.doc.off("update",this._updateHandler),super.destroy()}connectBc(){if(this.disableBc)return;var e,t;this.bcconnected||(e=this.bcChannel,t=this._bcSubscriber,ae(e).subs.add(t),this.bcconnected=!0);const s=I();M(s,0),le(s,this.doc),ie(this.bcChannel,A(s),this);const n=I();M(n,0),he(n,this.doc),ie(this.bcChannel,A(n),this);const o=I();M(o,3),ie(this.bcChannel,A(o),this);const r=I();M(r,1),x(r,ye(this.awareness,[this.doc.clientID])),ie(this.bcChannel,A(r),this)}disconnectBc(){const e=I();M(e,1),x(e,ye(this.awareness,[this.doc.clientID],new Map)),Ce(this,A(e)),this.bcconnected&&(((e,t)=>{const s=ae(e);s.subs.delete(t)&&0===s.subs.size&&(s.bc.close(),oe.delete(e))})(this.bcChannel,this._bcSubscriber),this.bcconnected=!1)}disconnect(){this.shouldConnect=!1,this.disconnectBc(),null!==this.ws&&this.ws.close()}connect(){this.shouldConnect=!0,this.wsconnected||null!==this.ws||(ve(this),this.connectBc())}}var Ue;!function(e){e[e.CHAT=125]="CHAT"}(Ue||(Ue={}));class ke extends Se{constructor(e){super(e.url,e.roomID,e.awareness.doc,{awareness:e.awareness}),this._isDisposed=!1,this._awareness=e.awareness,this._user=e.user,this._user.ready.then((()=>this._onUserChanged(this._user))).catch((e=>console.error(e))),this._user.userChanged.connect(this._onUserChanged,this),this._messageStream=new n.Stream(this),this.messageHandlers[Ue.CHAT]=(e,t,s,n,o)=>{const r=U(t),a=JSON.parse(r);this._messageStream.emit(a)}}get isDisposed(){return this._isDisposed}get messageStream(){return this._messageStream}dispose(){this._isDisposed||(this._user.userChanged.disconnect(this._onUserChanged,this),this._isDisposed=!0,this.destroy())}sendMessage(e){const t={type:"text",body:e},s=I();M(s,Ue.CHAT),R(s,JSON.stringify(t)),this.ws.send(A(s))}_onUserChanged(e){this._awareness.setLocalStateField("user",e.identity)}}var Ie=s(314),Te=s(9033),Ae=s(6501),De=s(7262);class Me{constructor(e){this._onConnectionClosed=e=>{1003===e.code&&(console.error("Document provider closed:",e.reason),(0,Ae.showErrorMessage)(this._trans.__("Document session error"),e.reason,[Ae.Dialog.okButton()]),this._sharedModel.dispose())},this._onSync=e=>{var t;e&&(this._ready.resolve(),null===(t=this._yWebsocketProvider)||void 0===t||t.off("sync",this._onSync))},this._ready=new De.PromiseDelegate,this._isDisposed=!1,this._path=e.path,this._contentType=e.contentType,this._format=e.format,this._serverUrl=e.url,this._sharedModel=e.model,this._awareness=e.model.awareness,this._yWebsocketProvider=null,this._trans=e.translator;const t=e.user;t.ready.then((()=>{this._onUserChanged(t)})).catch((e=>console.error(e))),t.userChanged.connect(this._onUserChanged,this),this._connect().catch((e=>console.warn(e)))}get isDisposed(){return this._isDisposed}get ready(){return this._ready.promise}dispose(){var e,t,s;this.isDisposed||(this._isDisposed=!0,null===(e=this._yWebsocketProvider)||void 0===e||e.off("connection-close",this._onConnectionClosed),null===(t=this._yWebsocketProvider)||void 0===t||t.off("sync",this._onSync),null===(s=this._yWebsocketProvider)||void 0===s||s.destroy(),n.Signal.clearData(this))}async _connect(){const e=await async function(e,t,s){const n=Te.ServerConnection.makeSettings(),o=Ie.URLExt.join(n.baseUrl,"api/collaboration/session",encodeURIComponent(s)),r={method:"PUT",body:JSON.stringify({format:e,type:t})};let a;try{a=await Te.ServerConnection.makeRequest(o,r,n)}catch(e){throw new Te.ServerConnection.NetworkError(e)}let i=await a.text();if(i.length>0)try{i=JSON.parse(i)}catch(e){console.log("Not a JSON response body.",a)}if(!a.ok)throw new Te.ServerConnection.ResponseError(a,i.message||i);return i}(this._format,this._contentType,this._path);this._yWebsocketProvider=new Se(this._serverUrl,`${e.format}:${e.type}:${e.fileId}`,this._sharedModel.ydoc,{disableBc:!0,params:{sessionId:e.sessionId},awareness:this._awareness}),this._yWebsocketProvider.on("sync",this._onSync),this._yWebsocketProvider.on("connection-close",this._onConnectionClosed)}_onUserChanged(e){this._awareness.setLocalStateField("user",e.identity)}}const Le="true"===Ie.PageConfig.getOption("disableRTC");class Ee extends Te.Drive{constructor(e,t){super({name:"RTC"}),this._onCreate=(e,t)=>{if("string"==typeof e.format)try{const s=new Me({url:Ie.URLExt.join(this.serverSettings.wsUrl,"api/collaboration/room"),path:e.path,format:e.format,contentType:e.contentType,model:t,user:this._user,translator:this._trans}),n=`${e.format}:${e.contentType}:${e.path}`;this._providers.set(n,s),t.disposed.connect((()=>{const e=this._providers.get(n);e&&(e.dispose(),this._providers.delete(n))}))}catch(t){console.error(`Failed to open websocket connection for ${e.path}.\n:${t}`)}},this._user=e,this._trans=t,this._providers=new Map,this.sharedModelFactory=new Re(this._onCreate)}dispose(){this.isDisposed||(this._providers.forEach((e=>e.dispose())),this._providers.clear(),super.dispose())}async get(e,t){if(t&&t.format&&t.type){const s=`${t.format}:${t.type}:${e}`,n=this._providers.get(s);if(n){const[s]=await Promise.all([super.get(e,{...t,content:!1}),n.ready]);return{...s,format:t.format}}}return super.get(e,t)}async save(e,t={}){if(t.format&&t.type){const s=`${t.format}:${t.type}:${e}`;if(this._providers.get(s)){const s={type:t.type,format:t.format,content:!1};return this.get(e,s)}}return super.save(e,t)}}class Re{constructor(e){this._onCreate=e,this.collaborative=!Le,this._documentFactories=new Map}registerDocumentFactory(e,t){if(this._documentFactories.has(e))throw new Error(`The content type ${e} already exists`);this._documentFactories.set(e,t)}createNew(e){if("string"==typeof e.format){if(this.collaborative&&e.collaborative&&this._documentFactories.has(e.contentType)){const t=this._documentFactories.get(e.contentType)(e);return this._onCreate(e,t),t}}else console.warn(`Only defined format are supported; got ${e.format}.`)}}const xe=new De.Token("@jupyter/collaboration-extension:ICollaborativeDrive")},9907:e=>{var t,s,n=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function a(e){if(t===setTimeout)return setTimeout(e,0);if((t===o||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(s){try{return t.call(null,e,0)}catch(s){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:o}catch(e){t=o}try{s="function"==typeof clearTimeout?clearTimeout:r}catch(e){s=r}}();var i,c=[],l=!1,h=-1;function d(){l&&i&&(l=!1,i.length?c=i.concat(c):h=-1,c.length&&u())}function u(){if(!l){var e=a(d);l=!0;for(var t=c.length;t;){for(i=c,c=[];++h<t;)i&&i[h].run();h=-1,t=c.length}i=null,l=!1,function(e){if(s===clearTimeout)return clearTimeout(e);if((s===r||!s)&&clearTimeout)return s=clearTimeout,clearTimeout(e);try{return s(e)}catch(t){try{return s.call(null,e)}catch(t){return s.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function p(){}n.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var s=1;s<arguments.length;s++)t[s-1]=arguments[s];c.push(new f(e,t)),1!==c.length||l||a(u)},f.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=p,n.addListener=p,n.once=p,n.off=p,n.removeListener=p,n.removeAllListeners=p,n.emit=p,n.prependListener=p,n.prependOnceListener=p,n.listeners=function(e){return[]},n.binding=function(e){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(e){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}}}]);