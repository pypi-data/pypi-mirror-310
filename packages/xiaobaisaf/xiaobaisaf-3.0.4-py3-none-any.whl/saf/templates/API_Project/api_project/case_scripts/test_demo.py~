import os
import pytest
import allure
from ..apis.Client import *
from ..common.CSV import Reader
from ..config.case_config import 接口名称_CASE_DATA_PATH

# @allure.story('接口名称')
@pytest.mark.parametrize(','.join(Reader(接口名称_CASE_DATA_PATH, False)[0]), Reader(接口名称_CASE_DATA_PATH, True))
def test_接口名称(method, uri, headers, data):
    allure.step('接口名称-请求')
    response = APIClient.session(method=method, url=os.environ.get('HOST') + uri, headers=eval(headers), data=data,
                                 auth_username='root', auth_password='r00t@xiaobaiaiservice')

    allure.step('接口名称-断言')
    json_assert(response, 'code', 0)

    # allure.step('接口名称-提取器')
    # json_extractor()


