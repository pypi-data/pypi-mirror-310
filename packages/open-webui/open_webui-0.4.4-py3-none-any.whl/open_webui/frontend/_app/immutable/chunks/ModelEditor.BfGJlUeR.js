import{s as _t,j as we,p as mt,B as wn,q as xt,r as In,v as yn,w as En,x as Dn,e as g,c as v,a as k,d,f as p,i as $,k as S,I as Oe,o as A,g as f,C as We,u as ae,l as Mt,Q as ot,t as F,b as H,h as L,n as jt,D as Vn,H as bl,y as je,z as Tn,A as Ze,O as Cn,P as As,R as Sn,S as zl}from"./scheduler.CvZYoJ9P.js";import{S as pt,i as gt,b as q,d as R,m as Z,t as T,a as O,e as J,g as fe,c as ue,f as Je}from"./index.C1N8d1hw.js";import{e as oe}from"./each.BAtknz4E.js";import{k as Ul,m as An,t as Ns,f as $s}from"./index.C1H59eSH.js";import{A as Nn}from"./AdvancedParams.B15erOux.js";import{T as $n}from"./Tags.C-l5FLru.js";import{F as Mn}from"./fuse.CU2r43ac.js";import"./updater.iOEUNrP6.js";import{D as jn,M as On}from"./Dropdown.Dbsi7U2M.js";import{b as Bn}from"./menu-trigger.BIDVZcLU.js";import{f as Pn}from"./index.DyIcjikr.js";import{F as Fn}from"./FileItem.CL5vAJb8.js";import{C as kl}from"./Checkbox.BVdJlN-L.js";import{T as Kl,m as Ms}from"./Tooltip.DE9EGTmQ.js";import{T as hn}from"./Textarea.BuO9faAd.js";import{g as Hn}from"./index.DxIdiPJF.js";import{g as Ln}from"./index.DahrPRNI.js";import{g as zn}from"./index.CpsTsfkM.js";import{A as Un}from"./AccessControl.nierUpmf.js";import"./postcss.CP3FhFTo.js";function js(n,e,t){const s=n.slice();return s[14]=e[t],s}function Kn(n){let e;const t=n[8].default,s=In(t,n,n[12],null);return{c(){s&&s.c()},l(l){s&&s.l(l)},m(l,a){s&&s.m(l,a),e=!0},p(l,a){s&&s.p&&(!e||a&4096)&&yn(s,t,l,l[12],e?Dn(t,l[12],a,null):En(l[12]),null)},i(l){e||(T(s,l),e=!0)},o(l){O(s,l),e=!1},d(l){s&&s.d(l)}}}function qn(n){let e,t,s=oe(n[2]),l=[];for(let r=0;r<s.length;r+=1)l[r]=Os(js(n,s,r));const a=r=>O(l[r],1,1,()=>{l[r]=null});return{c(){for(let r=0;r<l.length;r+=1)l[r].c();e=Mt()},l(r){for(let i=0;i<l.length;i+=1)l[i].l(r);e=Mt()},m(r,i){for(let o=0;o<l.length;o+=1)l[o]&&l[o].m(r,i);$(r,e,i),t=!0},p(r,i){if(i&36){s=oe(r[2]);let o;for(o=0;o<s.length;o+=1){const u=js(r,s,o);l[o]?(l[o].p(u,i),T(l[o],1)):(l[o]=Os(u),l[o].c(),T(l[o],1),l[o].m(e.parentNode,e))}for(fe(),o=s.length;o<l.length;o+=1)a(o);ue()}},i(r){if(!t){for(let i=0;i<s.length;i+=1)T(l[i]);t=!0}},o(r){l=l.filter(Boolean);for(let i=0;i<l.length;i+=1)O(l[i]);t=!1},d(r){r&&d(e),ot(l,r)}}}function Rn(n){let e,t=n[3].t("No knowledge found")+"",s;return{c(){e=g("div"),s=F(t),this.h()},l(l){e=v(l,"DIV",{class:!0});var a=k(e);s=H(a,t),a.forEach(d),this.h()},h(){p(e,"class","text-center text-sm text-gray-500 dark:text-gray-400")},m(l,a){$(l,e,a),f(e,s)},p(l,a){a&8&&t!==(t=l[3].t("No knowledge found")+"")&&L(s,t)},i:jt,o:jt,d(l){l&&d(e)}}}function Zn(n){let e,t="Collection";return{c(){e=g("div"),e.textContent=t,this.h()},l(s){e=v(s,"DIV",{class:!0,"data-svelte-h":!0}),Oe(e)!=="svelte-13dseu7"&&(e.textContent=t),this.h()},h(){p(e,"class","bg-green-500/20 text-green-700 dark:text-green-200 rounded uppercase text-xs font-bold px-1")},m(s,l){$(s,e,l)},d(s){s&&d(e)}}}function Jn(n){let e,t="Document";return{c(){e=g("div"),e.textContent=t,this.h()},l(s){e=v(s,"DIV",{class:!0,"data-svelte-h":!0}),Oe(e)!=="svelte-1geke3w"&&(e.textContent=t),this.h()},h(){p(e,"class","bg-gray-500/20 text-gray-700 dark:text-gray-200 rounded uppercase text-xs font-bold px-1")},m(s,l){$(s,e,l)},d(s){s&&d(e)}}}function Wn(n){let e,t="Legacy";return{c(){e=g("div"),e.textContent=t,this.h()},l(s){e=v(s,"DIV",{class:!0,"data-svelte-h":!0}),Oe(e)!=="svelte-alm5wq"&&(e.textContent=t),this.h()},h(){p(e,"class","bg-gray-500/20 text-gray-700 dark:text-gray-200 rounded uppercase text-xs font-bold px-1")},m(s,l){$(s,e,l)},d(s){s&&d(e)}}}function Yn(n){let e,t,s,l,a,r=n[14].name+"",i,o;function u(_,m){var b,y;return _[14].legacy?Wn:(y=(b=_[14])==null?void 0:b.meta)!=null&&y.document?Jn:Zn}let h=u(n),c=h(n);return{c(){e=g("div"),t=g("div"),s=g("div"),c.c(),l=S(),a=g("div"),i=F(r),o=S(),this.h()},l(_){e=v(_,"DIV",{class:!0});var m=k(e);t=v(m,"DIV",{class:!0});var b=k(t);s=v(b,"DIV",{class:!0});var y=k(s);c.l(y),y.forEach(d),l=A(b),a=v(b,"DIV",{class:!0});var D=k(a);i=H(D,r),D.forEach(d),b.forEach(d),m.forEach(d),o=A(_),this.h()},h(){p(s,"class","w-fit mb-0.5"),p(a,"class","line-clamp-1 font-medium pr-0.5"),p(t,"class","flex flex-col"),p(e,"class","flex items-center")},m(_,m){$(_,e,m),f(e,t),f(t,s),c.m(s,null),f(t,l),f(t,a),f(a,i),$(_,o,m)},p(_,m){h!==(h=u(_))&&(c.d(1),c=h(_),c&&(c.c(),c.m(s,null))),m&4&&r!==(r=_[14].name+"")&&L(i,r)},d(_){_&&(d(e),d(o)),c.d()}}}function Os(n){let e,t;function s(){return n[10](n[14])}return e=new On({props:{class:"flex gap-2.5 items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",$$slots:{default:[Yn]},$$scope:{ctx:n}}}),e.$on("click",s),{c(){q(e.$$.fragment)},l(l){R(e.$$.fragment,l)},m(l,a){Z(e,l,a),t=!0},p(l,a){n=l;const r={};a&4100&&(r.$$scope={dirty:a,ctx:n}),e.$set(r)},i(l){t||(T(e.$$.fragment,l),t=!0)},o(l){O(e.$$.fragment,l),t=!1},d(l){J(e,l)}}}function Gn(n){let e,t,s,l='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-4 h-4"><path fill-rule="evenodd" d="M9 3.5a5.5 5.5 0 100 11 5.5 5.5 0 000-11zM2 9a7 7 0 1112.452 4.391l3.328 3.329a.75.75 0 11-1.06 1.06l-3.329-3.328A7 7 0 012 9z" clip-rule="evenodd"></path></svg>',a,r,i,o,u,h,c,_,m,b,y,D;const V=[Rn,qn],B=[];function C(N,M){return N[2].length===0?0:1}return _=C(n),m=B[_]=V[_](n),{c(){e=g("div"),t=g("div"),s=g("div"),s.innerHTML=l,a=S(),r=g("input"),o=S(),u=g("hr"),h=S(),c=g("div"),m.c(),this.h()},l(N){e=v(N,"DIV",{class:!0});var M=k(e);t=v(M,"DIV",{class:!0});var I=k(t);s=v(I,"DIV",{class:!0,"data-svelte-h":!0}),Oe(s)!=="svelte-kinl2y"&&(s.innerHTML=l),a=A(I),r=v(I,"INPUT",{class:!0,placeholder:!0}),I.forEach(d),M.forEach(d),o=A(N),u=v(N,"HR",{class:!0}),h=A(N),c=v(N,"DIV",{class:!0});var z=k(c);m.l(z),z.forEach(d),this.h()},h(){p(s,"class","self-center ml-1 mr-3"),p(r,"class","w-full text-sm pr-4 py-1 rounded-r-xl outline-none bg-transparent"),p(r,"placeholder",i=n[3].t("Search Knowledge")),p(t,"class","flex flex-1"),p(e,"class","flex w-full space-x-2 py-0.5 px-2"),p(u,"class","border-gray-50 dark:border-gray-700 my-1.5"),p(c,"class","max-h-48 overflow-y-scroll")},m(N,M){$(N,e,M),f(e,t),f(t,s),f(t,a),f(t,r),We(r,n[1]),$(N,o,M),$(N,u,M),$(N,h,M),$(N,c,M),B[_].m(c,null),b=!0,y||(D=ae(r,"input",n[9]),y=!0)},p(N,M){(!b||M&8&&i!==(i=N[3].t("Search Knowledge")))&&p(r,"placeholder",i),M&2&&r.value!==N[1]&&We(r,N[1]);let I=_;_=C(N),_===I?B[_].p(N,M):(fe(),O(B[I],1,1,()=>{B[I]=null}),ue(),m=B[_],m?m.p(N,M):(m=B[_]=V[_](N),m.c()),T(m,1),m.m(c,null))},i(N){b||(T(m),b=!0)},o(N){O(m),b=!1},d(N){N&&(d(e),d(o),d(u),d(h),d(c)),B[_].d(),y=!1,D()}}}function Xn(n){let e,t,s;return t=new Bn({props:{class:"w-full max-w-80 rounded-lg px-1 py-1.5 border border-gray-300/30 dark:border-gray-700/50 z-50 bg-white dark:bg-gray-850 dark:text-white shadow-lg",sideOffset:8,side:"bottom",align:"start",transition:Pn,$$slots:{default:[Gn]},$$scope:{ctx:n}}}),{c(){e=g("div"),q(t.$$.fragment),this.h()},l(l){e=v(l,"DIV",{slot:!0});var a=k(e);R(t.$$.fragment,a),a.forEach(d),this.h()},h(){p(e,"slot","content")},m(l,a){$(l,e,a),Z(t,e,null),s=!0},p(l,a){const r={};a&4110&&(r.$$scope={dirty:a,ctx:l}),t.$set(r)},i(l){s||(T(t.$$.fragment,l),s=!0)},o(l){O(t.$$.fragment,l),s=!1},d(l){l&&d(e),J(t)}}}function Qn(n){let e,t;return e=new jn({props:{$$slots:{content:[Xn],default:[Kn]},$$scope:{ctx:n}}}),e.$on("change",n[11]),{c(){q(e.$$.fragment)},l(s){R(e.$$.fragment,s)},m(s,l){Z(e,s,l),t=!0},p(s,[l]){const a={};l&4110&&(a.$$scope={dirty:l,ctx:s}),e.$set(a)},i(s){t||(T(e.$$.fragment,s),t=!0)},o(s){O(e.$$.fragment,s),t=!1},d(s){J(e,s)}}}function xn(n,e,t){let s,l;we(n,Ul,V=>t(13,s=V));let{$$slots:a={},$$scope:r}=e;const i=mt("i18n");we(n,i,V=>t(3,l=V));const o=wn();let{onClose:u=()=>{}}=e,h="",c=[],_=[],m=null;xt(()=>{let V=s.filter(C=>{var N;return(N=C==null?void 0:C.meta)==null?void 0:N.document}),B=V.length>0?[{name:"All Documents",legacy:!0,type:"collection",description:"Deprecated (legacy collection), please create a new knowledge base.",title:l.t("All Documents"),collection_names:V.map(C=>C.id)},...V.reduce((C,N)=>{var M;return[...new Set([...C,...(((M=N==null?void 0:N.meta)==null?void 0:M.tags)??[]).map(I=>I.name)])]},[]).map(C=>({name:C,legacy:!0,type:"collection",description:"Deprecated (legacy collection), please create a new knowledge base.",collection_names:V.filter(N=>{var M;return(((M=N==null?void 0:N.meta)==null?void 0:M.tags)??[]).map(I=>I.name).includes(C)}).map(N=>N.id)}))]:[];t(6,c=[...s,...B].map(C=>{var N,M,I;return{...C,...C!=null&&C.legacy||(N=C==null?void 0:C.meta)!=null&&N.legacy||(M=C==null?void 0:C.meta)!=null&&M.document?{legacy:!0}:{},type:(I=C==null?void 0:C.meta)!=null&&I.document?"document":"collection"}})),t(7,m=new Mn(c,{keys:["name","description"]}))});function b(){h=this.value,t(1,h)}const y=V=>{o("select",V)},D=V=>{V.detail===!1&&(u(),t(1,h=""))};return n.$$set=V=>{"onClose"in V&&t(0,u=V.onClose),"$$scope"in V&&t(12,r=V.$$scope)},n.$$.update=()=>{n.$$.dirty&194&&m&&t(2,_=h?m.search(h).map(V=>V.item):c)},[u,h,_,l,i,o,c,m,a,b,y,D,r]}class er extends pt{constructor(e){super(),gt(this,e,xn,Qn,_t,{onClose:0})}}function Bs(n,e,t){const s=n.slice();return s[6]=e[t],s[8]=t,s}function Ps(n){let e,t,s=oe(n[0]),l=[];for(let r=0;r<s.length;r+=1)l[r]=Fs(Bs(n,s,r));const a=r=>O(l[r],1,1,()=>{l[r]=null});return{c(){e=g("div");for(let r=0;r<l.length;r+=1)l[r].c();this.h()},l(r){e=v(r,"DIV",{class:!0});var i=k(e);for(let o=0;o<l.length;o+=1)l[o].l(i);i.forEach(d),this.h()},h(){p(e,"class","flex flex-wrap items-center gap-2 mt-2")},m(r,i){$(r,e,i);for(let o=0;o<l.length;o+=1)l[o]&&l[o].m(e,null);t=!0},p(r,i){if(i&1){s=oe(r[0]);let o;for(o=0;o<s.length;o+=1){const u=Bs(r,s,o);l[o]?(l[o].p(u,i),T(l[o],1)):(l[o]=Fs(u),l[o].c(),T(l[o],1),l[o].m(e,null))}for(fe(),o=s.length;o<l.length;o+=1)a(o);ue()}},i(r){if(!t){for(let i=0;i<s.length;i+=1)T(l[i]);t=!0}},o(r){l=l.filter(Boolean);for(let i=0;i<l.length;i+=1)O(l[i]);t=!1},d(r){r&&d(e),ot(l,r)}}}function Fs(n){var l,a;let e,t;function s(...r){return n[4](n[8],...r)}return e=new Fn({props:{file:n[6],name:n[6].name,type:(l=n[6])!=null&&l.legacy?`Legacy${n[6].type?` ${n[6].type}`:""}`:((a=n[6])==null?void 0:a.type)??"Collection",dismissible:!0}}),e.$on("dismiss",s),{c(){q(e.$$.fragment)},l(r){R(e.$$.fragment,r)},m(r,i){Z(e,r,i),t=!0},p(r,i){var u,h;n=r;const o={};i&1&&(o.file=n[6]),i&1&&(o.name=n[6].name),i&1&&(o.type=(u=n[6])!=null&&u.legacy?`Legacy${n[6].type?` ${n[6].type}`:""}`:((h=n[6])==null?void 0:h.type)??"Collection"),e.$set(o)},i(r){t||(T(e.$$.fragment,r),t=!0)},o(r){O(e.$$.fragment,r),t=!1},d(r){J(e,r)}}}function tr(n){let e,t=n[1].t("Select Knowledge")+"",s;return{c(){e=g("button"),s=F(t),this.h()},l(l){e=v(l,"BUTTON",{class:!0,type:!0});var a=k(e);s=H(a,t),a.forEach(d),this.h()},h(){p(e,"class","px-3.5 py-1.5 font-medium hover:bg-black/5 dark:hover:bg-white/5 outline outline-1 outline-gray-100 dark:outline-gray-850 rounded-3xl"),p(e,"type","button")},m(l,a){$(l,e,a),f(e,s)},p(l,a){a&2&&t!==(t=l[1].t("Select Knowledge")+"")&&L(s,t)},d(l){l&&d(e)}}}function lr(n){var V;let e,t,s,l=n[1].t("Knowledge")+"",a,r,i,o=n[1].t('To attach knowledge base here, add them to the "Knowledge" workspace first.')+"",u,h,c,_,m,b,y,D=((V=n[0])==null?void 0:V.length)>0&&Ps(n);return b=new er({props:{$$slots:{default:[tr]},$$scope:{ctx:n}}}),b.$on("select",n[5]),{c(){e=g("div"),t=g("div"),s=g("div"),a=F(l),r=S(),i=g("div"),u=F(o),h=S(),c=g("div"),D&&D.c(),_=S(),m=g("div"),q(b.$$.fragment),this.h()},l(B){e=v(B,"DIV",{});var C=k(e);t=v(C,"DIV",{class:!0});var N=k(t);s=v(N,"DIV",{class:!0});var M=k(s);a=H(M,l),M.forEach(d),N.forEach(d),r=A(C),i=v(C,"DIV",{class:!0});var I=k(i);u=H(I,o),I.forEach(d),h=A(C),c=v(C,"DIV",{class:!0});var z=k(c);D&&D.l(z),_=A(z),m=v(z,"DIV",{class:!0});var G=k(m);R(b.$$.fragment,G),G.forEach(d),z.forEach(d),C.forEach(d),this.h()},h(){p(s,"class","self-center text-sm font-semibold"),p(t,"class","flex w-full justify-between mb-1"),p(i,"class","text-xs dark:text-gray-500"),p(m,"class","flex flex-wrap text-sm font-medium gap-1.5 mt-2"),p(c,"class","flex flex-col")},m(B,C){$(B,e,C),f(e,t),f(t,s),f(s,a),f(e,r),f(e,i),f(i,u),f(e,h),f(e,c),D&&D.m(c,null),f(c,_),f(c,m),Z(b,m,null),y=!0},p(B,[C]){var M;(!y||C&2)&&l!==(l=B[1].t("Knowledge")+"")&&L(a,l),(!y||C&2)&&o!==(o=B[1].t('To attach knowledge base here, add them to the "Knowledge" workspace first.')+"")&&L(u,o),((M=B[0])==null?void 0:M.length)>0?D?(D.p(B,C),C&1&&T(D,1)):(D=Ps(B),D.c(),T(D,1),D.m(c,_)):D&&(fe(),O(D,1,1,()=>{D=null}),ue());const N={};C&514&&(N.$$scope={dirty:C,ctx:B}),b.$set(N)},i(B){y||(T(D),T(b.$$.fragment,B),y=!0)},o(B){O(D),O(b.$$.fragment,B),y=!1},d(B){B&&d(e),D&&D.d(),J(b)}}}function sr(n,e,t){let s,{selectedKnowledge:l=[]}=e,{collections:a=[]}=e;const r=mt("i18n");we(n,r,u=>t(1,s=u));const i=(u,h)=>{t(0,l=l.filter((c,_)=>_!==u))},o=u=>{const h=u.detail;l.find(c=>c.id===h.id)||t(0,l=[...l,{...h}])};return n.$$set=u=>{"selectedKnowledge"in u&&t(0,l=u.selectedKnowledge),"collections"in u&&t(3,a=u.collections)},[l,s,r,a,i,o]}class nr extends pt{constructor(e){super(),gt(this,e,sr,lr,_t,{selectedKnowledge:0,collections:3})}}function Hs(n,e,t){const s=n.slice();return s[6]=e[t],s[8]=t,s}function Ls(n){let e,t,s=oe(Object.keys(n[2])),l=[];for(let r=0;r<s.length;r+=1)l[r]=zs(Hs(n,s,r));const a=r=>O(l[r],1,1,()=>{l[r]=null});return{c(){e=g("div");for(let r=0;r<l.length;r+=1)l[r].c();this.h()},l(r){e=v(r,"DIV",{class:!0});var i=k(e);for(let o=0;o<l.length;o+=1)l[o].l(i);i.forEach(d),this.h()},h(){p(e,"class","flex items-center mt-2 flex-wrap")},m(r,i){$(r,e,i);for(let o=0;o<l.length;o+=1)l[o]&&l[o].m(e,null);t=!0},p(r,i){if(i&5){s=oe(Object.keys(r[2]));let o;for(o=0;o<s.length;o+=1){const u=Hs(r,s,o);l[o]?(l[o].p(u,i),T(l[o],1)):(l[o]=zs(u),l[o].c(),T(l[o],1),l[o].m(e,null))}for(fe(),o=s.length;o<l.length;o+=1)a(o);ue()}},i(r){if(!t){for(let i=0;i<s.length;i+=1)T(l[i]);t=!0}},o(r){l=l.filter(Boolean);for(let i=0;i<l.length;i+=1)O(l[i]);t=!1},d(r){r&&d(e),ot(l,r)}}}function zs(n){let e,t,s,l,a,r=n[2][n[6]].name+"",i,o,u;function h(...c){return n[5](n[6],...c)}return s=new kl({props:{state:n[2][n[6]].selected?"checked":"unchecked"}}),s.$on("change",h),{c(){e=g("div"),t=g("div"),q(s.$$.fragment),l=S(),a=g("div"),i=F(r),o=S(),this.h()},l(c){e=v(c,"DIV",{class:!0});var _=k(e);t=v(_,"DIV",{class:!0});var m=k(t);R(s.$$.fragment,m),m.forEach(d),l=A(_),a=v(_,"DIV",{class:!0});var b=k(a);i=H(b,r),b.forEach(d),o=A(_),_.forEach(d),this.h()},h(){p(t,"class","self-center flex items-center"),p(a,"class","py-0.5 text-sm w-full capitalize font-medium"),p(e,"class","flex items-center gap-2 mr-3")},m(c,_){$(c,e,_),f(e,t),Z(s,t,null),f(e,l),f(e,a),f(a,i),f(e,o),u=!0},p(c,_){n=c;const m={};_&4&&(m.state=n[2][n[6]].selected?"checked":"unchecked"),s.$set(m),(!u||_&4)&&r!==(r=n[2][n[6]].name+"")&&L(i,r)},i(c){u||(T(s.$$.fragment,c),u=!0)},o(c){O(s.$$.fragment,c),u=!1},d(c){c&&d(e),J(s)}}}function rr(n){let e,t,s,l=n[3].t("Tools")+"",a,r,i,o=n[3].t('To select toolkits here, add them to the "Tools" workspace first.')+"",u,h,c,_,m=n[1].length>0&&Ls(n);return{c(){e=g("div"),t=g("div"),s=g("div"),a=F(l),r=S(),i=g("div"),u=F(o),h=S(),c=g("div"),m&&m.c(),this.h()},l(b){e=v(b,"DIV",{});var y=k(e);t=v(y,"DIV",{class:!0});var D=k(t);s=v(D,"DIV",{class:!0});var V=k(s);a=H(V,l),V.forEach(d),D.forEach(d),r=A(y),i=v(y,"DIV",{class:!0});var B=k(i);u=H(B,o),B.forEach(d),h=A(y),c=v(y,"DIV",{class:!0});var C=k(c);m&&m.l(C),C.forEach(d),y.forEach(d),this.h()},h(){p(s,"class","self-center text-sm font-semibold"),p(t,"class","flex w-full justify-between mb-1"),p(i,"class","text-xs dark:text-gray-500"),p(c,"class","flex flex-col")},m(b,y){$(b,e,y),f(e,t),f(t,s),f(s,a),f(e,r),f(e,i),f(i,u),f(e,h),f(e,c),m&&m.m(c,null),_=!0},p(b,[y]){(!_||y&8)&&l!==(l=b[3].t("Tools")+"")&&L(a,l),(!_||y&8)&&o!==(o=b[3].t('To select toolkits here, add them to the "Tools" workspace first.')+"")&&L(u,o),b[1].length>0?m?(m.p(b,y),y&2&&T(m,1)):(m=Ls(b),m.c(),T(m,1),m.m(c,null)):m&&(fe(),O(m,1,1,()=>{m=null}),ue())},i(b){_||(T(m),_=!0)},o(b){O(m),_=!1},d(b){b&&d(e),m&&m.d()}}}function ar(n,e,t){let s,{tools:l=[]}=e,a={},{selectedToolIds:r=[]}=e;const i=mt("i18n");we(n,i,u=>t(3,s=u)),xt(()=>{t(2,a=l.reduce((u,h)=>(u[h.id]={...h,selected:r.includes(h.id)},u),{}))});const o=(u,h)=>{t(2,a[u].selected=h.detail==="checked",a),t(0,r=Object.keys(a).filter(c=>a[c].selected))};return n.$$set=u=>{"tools"in u&&t(1,l=u.tools),"selectedToolIds"in u&&t(0,r=u.selectedToolIds)},[r,l,a,s,i,o]}class or extends pt{constructor(e){super(),gt(this,e,ar,rr,_t,{tools:1,selectedToolIds:0})}}function Us(n,e,t){const s=n.slice();return s[6]=e[t],s[8]=t,s}function Ks(n){let e,t,s=oe(Object.keys(n[2])),l=[];for(let r=0;r<s.length;r+=1)l[r]=qs(Us(n,s,r));const a=r=>O(l[r],1,1,()=>{l[r]=null});return{c(){e=g("div");for(let r=0;r<l.length;r+=1)l[r].c();this.h()},l(r){e=v(r,"DIV",{class:!0});var i=k(e);for(let o=0;o<l.length;o+=1)l[o].l(i);i.forEach(d),this.h()},h(){p(e,"class","flex items-center mt-2 flex-wrap")},m(r,i){$(r,e,i);for(let o=0;o<l.length;o+=1)l[o]&&l[o].m(e,null);t=!0},p(r,i){if(i&5){s=oe(Object.keys(r[2]));let o;for(o=0;o<s.length;o+=1){const u=Us(r,s,o);l[o]?(l[o].p(u,i),T(l[o],1)):(l[o]=qs(u),l[o].c(),T(l[o],1),l[o].m(e,null))}for(fe(),o=s.length;o<l.length;o+=1)a(o);ue()}},i(r){if(!t){for(let i=0;i<s.length;i+=1)T(l[i]);t=!0}},o(r){l=l.filter(Boolean);for(let i=0;i<l.length;i+=1)O(l[i]);t=!1},d(r){r&&d(e),ot(l,r)}}}function ir(n){let e=n[2][n[6]].name+"",t;return{c(){t=F(e)},l(s){t=H(s,e)},m(s,l){$(s,t,l)},p(s,l){l&4&&e!==(e=s[2][s[6]].name+"")&&L(t,e)},d(s){s&&d(t)}}}function qs(n){let e,t,s,l,a,r,i,o;function u(...h){return n[5](n[6],...h)}return s=new kl({props:{state:n[2][n[6]].selected?"checked":"unchecked"}}),s.$on("change",u),r=new Kl({props:{content:n[2][n[6]].meta.description,$$slots:{default:[ir]},$$scope:{ctx:n}}}),{c(){e=g("div"),t=g("div"),q(s.$$.fragment),l=S(),a=g("div"),q(r.$$.fragment),i=S(),this.h()},l(h){e=v(h,"DIV",{class:!0});var c=k(e);t=v(c,"DIV",{class:!0});var _=k(t);R(s.$$.fragment,_),_.forEach(d),l=A(c),a=v(c,"DIV",{class:!0});var m=k(a);R(r.$$.fragment,m),m.forEach(d),i=A(c),c.forEach(d),this.h()},h(){p(t,"class","self-center flex items-center"),p(a,"class","py-0.5 text-sm w-full capitalize font-medium"),p(e,"class","flex items-center gap-2 mr-3")},m(h,c){$(h,e,c),f(e,t),Z(s,t,null),f(e,l),f(e,a),Z(r,a,null),f(e,i),o=!0},p(h,c){n=h;const _={};c&4&&(_.state=n[2][n[6]].selected?"checked":"unchecked"),s.$set(_);const m={};c&4&&(m.content=n[2][n[6]].meta.description),c&516&&(m.$$scope={dirty:c,ctx:n}),r.$set(m)},i(h){o||(T(s.$$.fragment,h),T(r.$$.fragment,h),o=!0)},o(h){O(s.$$.fragment,h),O(r.$$.fragment,h),o=!1},d(h){h&&d(e),J(s),J(r)}}}function cr(n){let e,t,s,l=n[3].t("Filters")+"",a,r,i,o=n[3].t('To select filters here, add them to the "Functions" workspace first.')+"",u,h,c,_,m=n[1].length>0&&Ks(n);return{c(){e=g("div"),t=g("div"),s=g("div"),a=F(l),r=S(),i=g("div"),u=F(o),h=S(),c=g("div"),m&&m.c(),this.h()},l(b){e=v(b,"DIV",{});var y=k(e);t=v(y,"DIV",{class:!0});var D=k(t);s=v(D,"DIV",{class:!0});var V=k(s);a=H(V,l),V.forEach(d),D.forEach(d),r=A(y),i=v(y,"DIV",{class:!0});var B=k(i);u=H(B,o),B.forEach(d),h=A(y),c=v(y,"DIV",{class:!0});var C=k(c);m&&m.l(C),C.forEach(d),y.forEach(d),this.h()},h(){p(s,"class","self-center text-sm font-semibold"),p(t,"class","flex w-full justify-between mb-1"),p(i,"class","text-xs dark:text-gray-500"),p(c,"class","flex flex-col")},m(b,y){$(b,e,y),f(e,t),f(t,s),f(s,a),f(e,r),f(e,i),f(i,u),f(e,h),f(e,c),m&&m.m(c,null),_=!0},p(b,[y]){(!_||y&8)&&l!==(l=b[3].t("Filters")+"")&&L(a,l),(!_||y&8)&&o!==(o=b[3].t('To select filters here, add them to the "Functions" workspace first.')+"")&&L(u,o),b[1].length>0?m?(m.p(b,y),y&2&&T(m,1)):(m=Ks(b),m.c(),T(m,1),m.m(c,null)):m&&(fe(),O(m,1,1,()=>{m=null}),ue())},i(b){_||(T(m),_=!0)},o(b){O(m),_=!1},d(b){b&&d(e),m&&m.d()}}}function fr(n,e,t){let s;const l=mt("i18n");we(n,l,u=>t(3,s=u));let{filters:a=[]}=e,{selectedFilterIds:r=[]}=e,i={};xt(()=>{t(2,i=a.reduce((u,h)=>(u[h.id]={...h,selected:r.includes(h.id)},u),{}))});const o=(u,h)=>{t(2,i[u].selected=h.detail==="checked",i),t(0,r=Object.keys(i).filter(c=>i[c].selected))};return n.$$set=u=>{"filters"in u&&t(1,a=u.filters),"selectedFilterIds"in u&&t(0,r=u.selectedFilterIds)},[r,a,i,s,l,o]}class ur extends pt{constructor(e){super(),gt(this,e,fr,cr,_t,{filters:1,selectedFilterIds:0})}}function Rs(n,e,t){const s=n.slice();return s[6]=e[t],s[8]=t,s}function Zs(n){let e,t,s=oe(Object.keys(n[2])),l=[];for(let r=0;r<s.length;r+=1)l[r]=Js(Rs(n,s,r));const a=r=>O(l[r],1,1,()=>{l[r]=null});return{c(){e=g("div");for(let r=0;r<l.length;r+=1)l[r].c();this.h()},l(r){e=v(r,"DIV",{class:!0});var i=k(e);for(let o=0;o<l.length;o+=1)l[o].l(i);i.forEach(d),this.h()},h(){p(e,"class","flex items-center mt-2 flex-wrap")},m(r,i){$(r,e,i);for(let o=0;o<l.length;o+=1)l[o]&&l[o].m(e,null);t=!0},p(r,i){if(i&5){s=oe(Object.keys(r[2]));let o;for(o=0;o<s.length;o+=1){const u=Rs(r,s,o);l[o]?(l[o].p(u,i),T(l[o],1)):(l[o]=Js(u),l[o].c(),T(l[o],1),l[o].m(e,null))}for(fe(),o=s.length;o<l.length;o+=1)a(o);ue()}},i(r){if(!t){for(let i=0;i<s.length;i+=1)T(l[i]);t=!0}},o(r){l=l.filter(Boolean);for(let i=0;i<l.length;i+=1)O(l[i]);t=!1},d(r){r&&d(e),ot(l,r)}}}function dr(n){let e=n[2][n[6]].name+"",t;return{c(){t=F(e)},l(s){t=H(s,e)},m(s,l){$(s,t,l)},p(s,l){l&4&&e!==(e=s[2][s[6]].name+"")&&L(t,e)},d(s){s&&d(t)}}}function Js(n){let e,t,s,l,a,r,i,o;function u(...h){return n[5](n[6],...h)}return s=new kl({props:{state:n[2][n[6]].selected?"checked":"unchecked"}}),s.$on("change",u),r=new Kl({props:{content:n[2][n[6]].meta.description,$$slots:{default:[dr]},$$scope:{ctx:n}}}),{c(){e=g("div"),t=g("div"),q(s.$$.fragment),l=S(),a=g("div"),q(r.$$.fragment),i=S(),this.h()},l(h){e=v(h,"DIV",{class:!0});var c=k(e);t=v(c,"DIV",{class:!0});var _=k(t);R(s.$$.fragment,_),_.forEach(d),l=A(c),a=v(c,"DIV",{class:!0});var m=k(a);R(r.$$.fragment,m),m.forEach(d),i=A(c),c.forEach(d),this.h()},h(){p(t,"class","self-center flex items-center"),p(a,"class","py-0.5 text-sm w-full capitalize font-medium"),p(e,"class","flex items-center gap-2 mr-3")},m(h,c){$(h,e,c),f(e,t),Z(s,t,null),f(e,l),f(e,a),Z(r,a,null),f(e,i),o=!0},p(h,c){n=h;const _={};c&4&&(_.state=n[2][n[6]].selected?"checked":"unchecked"),s.$set(_);const m={};c&4&&(m.content=n[2][n[6]].meta.description),c&516&&(m.$$scope={dirty:c,ctx:n}),r.$set(m)},i(h){o||(T(s.$$.fragment,h),T(r.$$.fragment,h),o=!0)},o(h){O(s.$$.fragment,h),O(r.$$.fragment,h),o=!1},d(h){h&&d(e),J(s),J(r)}}}function hr(n){let e,t,s,l=n[3].t("Actions")+"",a,r,i,o=n[3].t('To select actions here, add them to the "Functions" workspace first.')+"",u,h,c,_,m=n[1].length>0&&Zs(n);return{c(){e=g("div"),t=g("div"),s=g("div"),a=F(l),r=S(),i=g("div"),u=F(o),h=S(),c=g("div"),m&&m.c(),this.h()},l(b){e=v(b,"DIV",{});var y=k(e);t=v(y,"DIV",{class:!0});var D=k(t);s=v(D,"DIV",{class:!0});var V=k(s);a=H(V,l),V.forEach(d),D.forEach(d),r=A(y),i=v(y,"DIV",{class:!0});var B=k(i);u=H(B,o),B.forEach(d),h=A(y),c=v(y,"DIV",{class:!0});var C=k(c);m&&m.l(C),C.forEach(d),y.forEach(d),this.h()},h(){p(s,"class","self-center text-sm font-semibold"),p(t,"class","flex w-full justify-between mb-1"),p(i,"class","text-xs dark:text-gray-500"),p(c,"class","flex flex-col")},m(b,y){$(b,e,y),f(e,t),f(t,s),f(s,a),f(e,r),f(e,i),f(i,u),f(e,h),f(e,c),m&&m.m(c,null),_=!0},p(b,[y]){(!_||y&8)&&l!==(l=b[3].t("Actions")+"")&&L(a,l),(!_||y&8)&&o!==(o=b[3].t('To select actions here, add them to the "Functions" workspace first.')+"")&&L(u,o),b[1].length>0?m?(m.p(b,y),y&2&&T(m,1)):(m=Zs(b),m.c(),T(m,1),m.m(c,null)):m&&(fe(),O(m,1,1,()=>{m=null}),ue())},i(b){_||(T(m),_=!0)},o(b){O(m),_=!1},d(b){b&&d(e),m&&m.d()}}}function _r(n,e,t){let s;const l=mt("i18n");we(n,l,u=>t(3,s=u));let{actions:a=[]}=e,{selectedActionIds:r=[]}=e,i={};xt(()=>{t(2,i=a.reduce((u,h)=>(u[h.id]={...h,selected:r.includes(h.id)},u),{}))});const o=(u,h)=>{t(2,i[u].selected=h.detail==="checked",i),t(0,r=Object.keys(i).filter(c=>i[c].selected))};return n.$$set=u=>{"actions"in u&&t(1,a=u.actions),"selectedActionIds"in u&&t(0,r=u.selectedActionIds)},[r,a,i,s,l,o]}class mr extends pt{constructor(e){super(),gt(this,e,_r,hr,_t,{actions:1,selectedActionIds:0})}}function Ws(n,e,t){const s=n.slice();return s[5]=e[t],s}function pr(n){let e=n[1].t(n[5])+"",t;return{c(){t=F(e)},l(s){t=H(s,e)},m(s,l){$(s,t,l)},p(s,l){l&3&&e!==(e=s[1].t(s[5])+"")&&L(t,e)},d(s){s&&d(t)}}}function Ys(n){let e,t,s,l,a,r,i;function o(...u){return n[4](n[5],...u)}return t=new kl({props:{state:n[0][n[5]]?"checked":"unchecked"}}),t.$on("change",o),a=new Kl({props:{content:Ms.parse(n[3][n[5]]),$$slots:{default:[pr]},$$scope:{ctx:n}}}),{c(){e=g("div"),q(t.$$.fragment),s=S(),l=g("div"),q(a.$$.fragment),r=S(),this.h()},l(u){e=v(u,"DIV",{class:!0});var h=k(e);R(t.$$.fragment,h),s=A(h),l=v(h,"DIV",{class:!0});var c=k(l);R(a.$$.fragment,c),c.forEach(d),r=A(h),h.forEach(d),this.h()},h(){p(l,"class","py-0.5 text-sm capitalize"),p(e,"class","flex items-center gap-2 mr-3")},m(u,h){$(u,e,h),Z(t,e,null),f(e,s),f(e,l),Z(a,l,null),f(e,r),i=!0},p(u,h){n=u;const c={};h&1&&(c.state=n[0][n[5]]?"checked":"unchecked"),t.$set(c);const _={};h&1&&(_.content=Ms.parse(n[3][n[5]])),h&259&&(_.$$scope={dirty:h,ctx:n}),a.$set(_)},i(u){i||(T(t.$$.fragment,u),T(a.$$.fragment,u),i=!0)},o(u){O(t.$$.fragment,u),O(a.$$.fragment,u),i=!1},d(u){u&&d(e),J(t),J(a)}}}function gr(n){let e,t,s,l=n[1].t("Capabilities")+"",a,r,i,o,u=oe(Object.keys(n[0])),h=[];for(let _=0;_<u.length;_+=1)h[_]=Ys(Ws(n,u,_));const c=_=>O(h[_],1,1,()=>{h[_]=null});return{c(){e=g("div"),t=g("div"),s=g("div"),a=F(l),r=S(),i=g("div");for(let _=0;_<h.length;_+=1)h[_].c();this.h()},l(_){e=v(_,"DIV",{});var m=k(e);t=v(m,"DIV",{class:!0});var b=k(t);s=v(b,"DIV",{class:!0});var y=k(s);a=H(y,l),y.forEach(d),b.forEach(d),r=A(m),i=v(m,"DIV",{class:!0});var D=k(i);for(let V=0;V<h.length;V+=1)h[V].l(D);D.forEach(d),m.forEach(d),this.h()},h(){p(s,"class","self-center text-sm font-semibold"),p(t,"class","flex w-full justify-between mb-1"),p(i,"class","flex")},m(_,m){$(_,e,m),f(e,t),f(t,s),f(s,a),f(e,r),f(e,i);for(let b=0;b<h.length;b+=1)h[b]&&h[b].m(i,null);o=!0},p(_,[m]){if((!o||m&2)&&l!==(l=_[1].t("Capabilities")+"")&&L(a,l),m&11){u=oe(Object.keys(_[0]));let b;for(b=0;b<u.length;b+=1){const y=Ws(_,u,b);h[b]?(h[b].p(y,m),T(h[b],1)):(h[b]=Ys(y),h[b].c(),T(h[b],1),h[b].m(i,null))}for(fe(),b=u.length;b<h.length;b+=1)c(b);ue()}},i(_){if(!o){for(let m=0;m<u.length;m+=1)T(h[m]);o=!0}},o(_){h=h.filter(Boolean);for(let m=0;m<h.length;m+=1)O(h[m]);o=!1},d(_){_&&d(e),ot(h,_)}}}function vr(n,e,t){let s;const l=mt("i18n");we(n,l,o=>t(1,s=o));const a={vision:s.t("Model accepts image inputs"),usage:s.t("Sends `stream_options: { include_usage: true }` in the request.\nSupported providers will return token usage information in the response when set."),citations:s.t("Displays citations in the response")};let{capabilities:r={}}=e;const i=(o,u)=>{t(0,r[o]=u.detail==="checked",r)};return n.$$set=o=>{"capabilities"in o&&t(0,r=o.capabilities)},[r,s,l,a,i]}class br extends pt{constructor(e){super(),gt(this,e,vr,gr,_t,{capabilities:0})}}function Gs(n,e,t){const s=n.slice();return s[59]=e[t],s[60]=e,s[61]=t,s}function Xs(n,e,t){const s=n.slice();return s[0]=e[t],s}function Qs(n){let e,t,s,l,a,r,i,o=n[1]&&xs(n),u=(!n[2]||n[2]&&n[0])&&en(n);return{c(){o&&o.c(),e=S(),t=g("div"),s=g("input"),l=S(),u&&u.c(),this.h()},l(h){o&&o.l(h),e=A(h),t=v(h,"DIV",{class:!0});var c=k(t);s=v(c,"INPUT",{type:!0,accept:!0}),l=A(c),u&&u.l(c),c.forEach(d),this.h()},h(){p(s,"type","file"),s.hidden=!0,p(s,"accept","image/*"),p(t,"class","w-full max-h-full flex justify-center")},m(h,c){o&&o.m(h,c),$(h,e,c),$(h,t,c),f(t,s),n[30](s),f(t,l),u&&u.m(t,null),a=!0,r||(i=[ae(s,"change",n[31]),ae(s,"change",n[32])],r=!0)},p(h,c){h[1]?o?o.p(h,c):(o=xs(h),o.c(),o.m(e.parentNode,e)):o&&(o.d(1),o=null),!h[2]||h[2]&&h[0]?u?(u.p(h,c),c[0]&5&&T(u,1)):(u=en(h),u.c(),T(u,1),u.m(t,null)):u&&(fe(),O(u,1,1,()=>{u=null}),ue())},i(h){a||(T(u),a=!0)},o(h){O(u),a=!1},d(h){h&&(d(e),d(t)),o&&o.d(h),n[30](null),u&&u.d(),r=!1,bl(i)}}}function xs(n){let e,t,s='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="h-4 w-4"><path fill-rule="evenodd" d="M17 10a.75.75 0 01-.75.75H5.612l4.158 3.96a.75.75 0 11-1.04 1.08l-5.5-5.25a.75.75 0 010-1.08l5.5-5.25a.75.75 0 111.04 1.08L5.612 9.25H16.25A.75.75 0 0117 10z" clip-rule="evenodd"></path></svg>',l,a,r="Back",i,o,u;return{c(){e=g("button"),t=g("div"),t.innerHTML=s,l=S(),a=g("div"),i=F(r),this.h()},l(h){e=v(h,"BUTTON",{class:!0});var c=k(e);t=v(c,"DIV",{class:!0,"data-svelte-h":!0}),Oe(t)!=="svelte-fdogea"&&(t.innerHTML=s),l=A(c),a=v(c,"DIV",{class:!0});var _=k(a);i=H(_,r),_.forEach(d),c.forEach(d),this.h()},h(){p(t,"class","self-center"),p(a,"class","self-center text-sm font-medium"),p(e,"class","flex space-x-1")},m(h,c){$(h,e,c),f(e,t),f(e,l),f(e,a),f(a,i),o||(u=ae(e,"click",n[29]),o=!0)},p:jt,d(h){h&&d(e),o=!1,u()}}}function en(n){var ns,rs,as,os,is,cs;let e,t,s,l,a,r,i='<div class="m-1.5"><div class="shadow-xl p-1 rounded-full border-2 border-white bg-gray-800 text-white group-hover:bg-gray-600 transition dark:border-black dark:bg-white dark:group-hover:bg-gray-200 dark:text-black"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="size-5"><path fill-rule="evenodd" d="M2 4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V4Zm10.5 5.707a.5.5 0 0 0-.146-.353l-1-1a.5.5 0 0 0-.708 0L9.354 9.646a.5.5 0 0 1-.708 0L6.354 7.354a.5.5 0 0 0-.708 0l-2 2a.5.5 0 0 0-.146.353V12a.5.5 0 0 0 .5.5h8a.5.5 0 0 0 .5-.5V9.707ZM12 5a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z" clip-rule="evenodd"></path></svg></div></div>',o,u,h,c,_,m,b,y,D,V,B,C,N,M,I,z,G,ee,ie,he,ge=n[21].t("Description")+"",ve,vt,be,Ot,Bt,Ye,Ge,ke,Pt,Xe,Qe,Ie,Ft,Ht,bt,Lt,$e,xe,et,it=n[21].t("Model Params")+"",kt,zt,_e,Me,tt,ct=n[21].t("System Prompt")+"",wt,Ut,ft,ye,Kt,qt,E,U,X=n[21].t("Advanced Params")+"",te,me,de,K,Q,Be,Rt,Ee,De,lt,It,Zt=n[21].t("Prompt suggestions")+"",el,wl,Pe,Il,yl,El,tl,Dl,yt,Fe,Vl,Tl,Et,He,Cl,Sl,Dt,Le,Al,Nl,Vt,ze,$l,Ml,Tt,Ue,jl,Ol,Ke,st,Ct,Jt=n[21].t("JSON Preview")+"",ll,Bl,qe,Pl,Fl,St,pe,ut,Hl,sl,x,Ll,ql;function Rl(w,j){return w[12].meta.profile_image_url?wr:kr}let nl=Rl(n),Ve=nl(n),le=n[3]&&tn(n);function Zl(w,j){return w[12].meta.description===null?yr:Ir}let rl=Zl(n),Te=rl(n),W=n[12].meta.description!==null&&sn(n);ke=new $n({props:{tags:((rs=(ns=n[12])==null?void 0:ns.meta)==null?void 0:rs.tags)??[]}}),ke.$on("delete",n[40]),ke.$on("add",n[41]);function _n(w){n[42](w)}let Jl={};n[19]!==void 0&&(Jl.accessControl=n[19]),Ie=new Un({props:Jl}),je.push(()=>Je(Ie,"accessControl",_n));function mn(w){n[43](w)}let Wl={className:" text-sm w-full bg-transparent outline-none resize-none overflow-y-hidden ",placeholder:`Write your model system prompt content here
e.g.) You are Mario from Super Mario Bros, acting as an assistant.`,rows:4};n[12].params.system!==void 0&&(Wl.value=n[12].params.system),ye=new hn({props:Wl}),je.push(()=>Je(ye,"value",mn));function Yl(w,j){return w[8]?Dr:Er}let al=Yl(n),Ce=al(n),Y=n[8]&&nn(n);function Gl(w,j){var nt,rt;return(((rt=(nt=w[12])==null?void 0:nt.meta)==null?void 0:rt.suggestion_prompts)??null)===null?Tr:Vr}let ol=Gl(n),Se=ol(n),se=(((os=(as=n[12])==null?void 0:as.meta)==null?void 0:os.suggestion_prompts)??null)!==null&&rn(n),ne=((cs=(is=n[12])==null?void 0:is.meta)==null?void 0:cs.suggestion_prompts)&&an(n);function pn(w){n[51](w)}let Xl={collections:n[22]};n[15]!==void 0&&(Xl.selectedKnowledge=n[15]),Fe=new nr({props:Xl}),je.push(()=>Je(Fe,"selectedKnowledge",pn));function gn(w){n[52](w)}let Ql={tools:n[23]};n[16]!==void 0&&(Ql.selectedToolIds=n[16]),He=new or({props:Ql}),je.push(()=>Je(He,"selectedToolIds",gn));function vn(w){n[53](w)}let xl={filters:n[24].filter(un)};n[17]!==void 0&&(xl.selectedFilterIds=n[17]),Le=new ur({props:xl}),je.push(()=>Je(Le,"selectedFilterIds",vn));function bn(w){n[54](w)}let es={actions:n[24].filter(dn)};n[18]!==void 0&&(es.selectedActionIds=n[18]),ze=new mr({props:es}),je.push(()=>Je(ze,"selectedActionIds",bn));function kn(w){n[55](w)}let ts={};n[14]!==void 0&&(ts.capabilities=n[14]),Ue=new br({props:ts}),je.push(()=>Je(Ue,"capabilities",kn));function ls(w,j){return w[9]?Nr:Ar}let il=ls(n),Ae=il(n),re=n[9]&&cn(n);function ss(w,j){return w[2]?Mr:$r}let cl=ss(n),Ne=cl(n),ce=n[5]&&fn();return{c(){e=g("form"),t=g("div"),s=g("div"),l=g("button"),Ve.c(),a=S(),r=g("div"),r.innerHTML=i,o=S(),u=g("div"),c=S(),_=g("div"),m=g("div"),b=g("div"),y=g("div"),D=g("input"),B=S(),C=g("div"),N=g("div"),M=g("input"),z=S(),le&&le.c(),G=S(),ee=g("div"),ie=g("div"),he=g("div"),ve=F(ge),vt=S(),be=g("button"),Te.c(),Ot=S(),W&&W.c(),Bt=S(),Ye=g("div"),Ge=g("div"),q(ke.$$.fragment),Pt=S(),Xe=g("div"),Qe=g("div"),q(Ie.$$.fragment),Ht=S(),bt=g("hr"),Lt=S(),$e=g("div"),xe=g("div"),et=g("div"),kt=F(it),zt=S(),_e=g("div"),Me=g("div"),tt=g("div"),wt=F(ct),Ut=S(),ft=g("div"),q(ye.$$.fragment),qt=S(),E=g("div"),U=g("div"),te=F(X),me=S(),de=g("button"),Ce.c(),K=S(),Y&&Y.c(),Q=S(),Be=g("hr"),Rt=S(),Ee=g("div"),De=g("div"),lt=g("div"),It=g("div"),el=F(Zt),wl=S(),Pe=g("button"),Se.c(),Il=S(),se&&se.c(),yl=S(),ne&&ne.c(),El=S(),tl=g("hr"),Dl=S(),yt=g("div"),q(Fe.$$.fragment),Tl=S(),Et=g("div"),q(He.$$.fragment),Sl=S(),Dt=g("div"),q(Le.$$.fragment),Nl=S(),Vt=g("div"),q(ze.$$.fragment),Ml=S(),Tt=g("div"),q(Ue.$$.fragment),Ol=S(),Ke=g("div"),st=g("div"),Ct=g("div"),ll=F(Jt),Bl=S(),qe=g("button"),Ae.c(),Pl=S(),re&&re.c(),Fl=S(),St=g("div"),pe=g("button"),ut=g("div"),Ne.c(),Hl=S(),ce&&ce.c(),this.h()},l(w){e=v(w,"FORM",{class:!0});var j=k(e);t=v(j,"DIV",{class:!0});var nt=k(t);s=v(nt,"DIV",{class:!0});var rt=k(s);l=v(rt,"BUTTON",{class:!0,type:!0});var Re=k(l);Ve.l(Re),a=A(Re),r=v(Re,"DIV",{class:!0,"data-svelte-h":!0}),Oe(r)!=="svelte-tn89fj"&&(r.innerHTML=i),o=A(Re),u=v(Re,"DIV",{class:!0}),k(u).forEach(d),Re.forEach(d),rt.forEach(d),nt.forEach(d),c=A(j),_=v(j,"DIV",{class:!0});var P=k(_);m=v(P,"DIV",{class:!0});var at=k(m);b=v(at,"DIV",{class:!0});var At=k(b);y=v(At,"DIV",{});var Nt=k(y);D=v(Nt,"INPUT",{class:!0,placeholder:!0}),Nt.forEach(d),At.forEach(d),B=A(at),C=v(at,"DIV",{class:!0});var Wt=k(C);N=v(Wt,"DIV",{});var Yt=k(N);M=v(Yt,"INPUT",{class:!0,placeholder:!0}),Yt.forEach(d),Wt.forEach(d),at.forEach(d),z=A(P),le&&le.l(P),G=A(P),ee=v(P,"DIV",{class:!0});var dt=k(ee);ie=v(dt,"DIV",{class:!0});var ht=k(ie);he=v(ht,"DIV",{class:!0});var Gt=k(he);ve=H(Gt,ge),Gt.forEach(d),vt=A(ht),be=v(ht,"BUTTON",{class:!0,type:!0});var Xt=k(be);Te.l(Xt),Xt.forEach(d),ht.forEach(d),Ot=A(dt),W&&W.l(dt),dt.forEach(d),Bt=A(P),Ye=v(P,"DIV",{class:!0});var Qt=k(Ye);Ge=v(Qt,"DIV",{class:!0});var fs=k(Ge);R(ke.$$.fragment,fs),fs.forEach(d),Qt.forEach(d),Pt=A(P),Xe=v(P,"DIV",{class:!0});var us=k(Xe);Qe=v(us,"DIV",{class:!0});var ds=k(Qe);R(Ie.$$.fragment,ds),ds.forEach(d),us.forEach(d),Ht=A(P),bt=v(P,"HR",{class:!0}),Lt=A(P),$e=v(P,"DIV",{class:!0});var fl=k($e);xe=v(fl,"DIV",{class:!0});var hs=k(xe);et=v(hs,"DIV",{class:!0});var _s=k(et);kt=H(_s,it),_s.forEach(d),hs.forEach(d),zt=A(fl),_e=v(fl,"DIV",{class:!0});var $t=k(_e);Me=v($t,"DIV",{class:!0});var ul=k(Me);tt=v(ul,"DIV",{class:!0});var ms=k(tt);wt=H(ms,ct),ms.forEach(d),Ut=A(ul),ft=v(ul,"DIV",{});var ps=k(ft);R(ye.$$.fragment,ps),ps.forEach(d),ul.forEach(d),qt=A($t),E=v($t,"DIV",{class:!0});var dl=k(E);U=v(dl,"DIV",{class:!0});var gs=k(U);te=H(gs,X),gs.forEach(d),me=A(dl),de=v(dl,"BUTTON",{class:!0,type:!0});var vs=k(de);Ce.l(vs),vs.forEach(d),dl.forEach(d),K=A($t),Y&&Y.l($t),$t.forEach(d),fl.forEach(d),Q=A(P),Be=v(P,"HR",{class:!0}),Rt=A(P),Ee=v(P,"DIV",{class:!0});var hl=k(Ee);De=v(hl,"DIV",{class:!0});var _l=k(De);lt=v(_l,"DIV",{class:!0});var ml=k(lt);It=v(ml,"DIV",{class:!0});var bs=k(It);el=H(bs,Zt),bs.forEach(d),wl=A(ml),Pe=v(ml,"BUTTON",{class:!0,type:!0});var ks=k(Pe);Se.l(ks),ks.forEach(d),ml.forEach(d),Il=A(_l),se&&se.l(_l),_l.forEach(d),yl=A(hl),ne&&ne.l(hl),hl.forEach(d),El=A(P),tl=v(P,"HR",{class:!0}),Dl=A(P),yt=v(P,"DIV",{class:!0});var ws=k(yt);R(Fe.$$.fragment,ws),ws.forEach(d),Tl=A(P),Et=v(P,"DIV",{class:!0});var Is=k(Et);R(He.$$.fragment,Is),Is.forEach(d),Sl=A(P),Dt=v(P,"DIV",{class:!0});var ys=k(Dt);R(Le.$$.fragment,ys),ys.forEach(d),Nl=A(P),Vt=v(P,"DIV",{class:!0});var Es=k(Vt);R(ze.$$.fragment,Es),Es.forEach(d),Ml=A(P),Tt=v(P,"DIV",{class:!0});var Ds=k(Tt);R(Ue.$$.fragment,Ds),Ds.forEach(d),Ol=A(P),Ke=v(P,"DIV",{class:!0});var pl=k(Ke);st=v(pl,"DIV",{class:!0});var gl=k(st);Ct=v(gl,"DIV",{class:!0});var Vs=k(Ct);ll=H(Vs,Jt),Vs.forEach(d),Bl=A(gl),qe=v(gl,"BUTTON",{class:!0,type:!0});var Ts=k(qe);Ae.l(Ts),Ts.forEach(d),gl.forEach(d),Pl=A(pl),re&&re.l(pl),pl.forEach(d),Fl=A(P),St=v(P,"DIV",{class:!0});var Cs=k(St);pe=v(Cs,"BUTTON",{class:!0,type:!0});var vl=k(pe);ut=v(vl,"DIV",{class:!0});var Ss=k(ut);Ne.l(Ss),Ss.forEach(d),Hl=A(vl),ce&&ce.l(vl),vl.forEach(d),Cs.forEach(d),P.forEach(d),j.forEach(d),this.h()},h(){p(r,"class","absolute bottom-0 right-0 z-10"),p(u,"class","absolute top-0 bottom-0 left-0 right-0 bg-white dark:bg-black rounded-lg opacity-0 group-hover:opacity-20 transition"),p(l,"class",h="rounded-2xl flex flex-shrink-0 items-center "+(n[12].meta.profile_image_url!=="/static/favicon.png"?"bg-transparent":"bg-white")+" shadow-xl group relative"),p(l,"type","button"),p(s,"class","self-center"),p(t,"class","self-center md:self-start flex justify-center my-2 flex-shrink-0"),p(D,"class","text-3xl font-semibold w-full bg-transparent outline-none"),p(D,"placeholder",V=n[21].t("Model Name")),D.required=!0,p(b,"class","flex-1"),p(M,"class","text-xs w-full bg-transparent text-gray-500 outline-none"),p(M,"placeholder",I=n[21].t("Model ID")),M.value=n[11],M.disabled=n[2],M.required=!0,p(C,"class","flex-1"),p(m,"class","mt-2 my-2 flex flex-col"),p(he,"class","self-center text-sm font-semibold"),p(be,"class","p-1 text-xs flex rounded transition"),p(be,"type","button"),p(ie,"class","mb-1 flex w-full justify-between items-center"),p(ee,"class","my-1"),p(Ge,"class",""),p(Ye,"class","my-1"),p(Qe,"class","px-3 py-2 bg-gray-50 dark:bg-gray-950 rounded-lg"),p(Xe,"class","my-2"),p(bt,"class","border-gray-50 dark:border-gray-850 my-1.5"),p(et,"class","self-center text-sm font-semibold"),p(xe,"class","flex w-full justify-between"),p(tt,"class","text-xs font-semibold mb-2"),p(Me,"class","my-1"),p(U,"class","self-center text-xs font-semibold"),p(de,"class","p-1 px-3 text-xs flex rounded transition"),p(de,"type","button"),p(E,"class","flex w-full justify-between"),p(_e,"class","mt-2"),p($e,"class","my-2"),p(Be,"class","border-gray-50 dark:border-gray-850 my-1"),p(It,"class","self-center text-sm font-semibold"),p(Pe,"class","p-1 text-xs flex rounded transition"),p(Pe,"type","button"),p(lt,"class","flex w-full justify-between items-center"),p(De,"class","flex w-full justify-between items-center"),p(Ee,"class","my-2"),p(tl,"class","border-gray-50 dark:border-gray-850 my-1.5"),p(yt,"class","my-2"),p(Et,"class","my-2"),p(Dt,"class","my-2"),p(Vt,"class","my-2"),p(Tt,"class","my-2"),p(Ct,"class","self-center text-sm font-semibold"),p(qe,"class","p-1 px-3 text-xs flex rounded transition"),p(qe,"type","button"),p(st,"class","flex w-full justify-between mb-2"),p(Ke,"class","my-2 text-gray-300 dark:text-gray-700"),p(ut,"class","self-center font-medium"),p(pe,"class",sl="text-sm px-3 py-2 transition rounded-lg "+(n[5]?" cursor-not-allowed bg-black hover:bg-gray-900 text-white dark:bg-white dark:hover:bg-gray-100 dark:text-black":"bg-black hover:bg-gray-900 text-white dark:bg-white dark:hover:bg-gray-100 dark:text-black")+" flex w-full justify-center"),p(pe,"type","submit"),pe.disabled=n[5],p(St,"class","my-2 flex justify-end pb-20"),p(_,"class","w-full"),p(e,"class","flex flex-col md:flex-row w-full gap-3 md:gap-6")},m(w,j){$(w,e,j),f(e,t),f(t,s),f(s,l),Ve.m(l,null),f(l,a),f(l,r),f(l,o),f(l,u),f(e,c),f(e,_),f(_,m),f(m,b),f(b,y),f(y,D),We(D,n[4]),f(m,B),f(m,C),f(C,N),f(N,M),f(_,z),le&&le.m(_,null),f(_,G),f(_,ee),f(ee,ie),f(ie,he),f(he,ve),f(ie,vt),f(ie,be),Te.m(be,null),f(ee,Ot),W&&W.m(ee,null),f(_,Bt),f(_,Ye),f(Ye,Ge),Z(ke,Ge,null),f(_,Pt),f(_,Xe),f(Xe,Qe),Z(Ie,Qe,null),f(_,Ht),f(_,bt),f(_,Lt),f(_,$e),f($e,xe),f(xe,et),f(et,kt),f($e,zt),f($e,_e),f(_e,Me),f(Me,tt),f(tt,wt),f(Me,Ut),f(Me,ft),Z(ye,ft,null),f(_e,qt),f(_e,E),f(E,U),f(U,te),f(E,me),f(E,de),Ce.m(de,null),f(_e,K),Y&&Y.m(_e,null),f(_,Q),f(_,Be),f(_,Rt),f(_,Ee),f(Ee,De),f(De,lt),f(lt,It),f(It,el),f(lt,wl),f(lt,Pe),Se.m(Pe,null),f(De,Il),se&&se.m(De,null),f(Ee,yl),ne&&ne.m(Ee,null),f(_,El),f(_,tl),f(_,Dl),f(_,yt),Z(Fe,yt,null),f(_,Tl),f(_,Et),Z(He,Et,null),f(_,Sl),f(_,Dt),Z(Le,Dt,null),f(_,Nl),f(_,Vt),Z(ze,Vt,null),f(_,Ml),f(_,Tt),Z(Ue,Tt,null),f(_,Ol),f(_,Ke),f(Ke,st),f(st,Ct),f(Ct,ll),f(st,Bl),f(st,qe),Ae.m(qe,null),f(Ke,Pl),re&&re.m(Ke,null),f(_,Fl),f(_,St),f(St,pe),f(pe,ut),Ne.m(ut,null),f(pe,Hl),ce&&ce.m(pe,null),x=!0,Ll||(ql=[ae(l,"click",n[33]),ae(D,"input",n[34]),ae(be,"click",n[38]),ae(de,"click",n[44]),ae(Pe,"click",n[47]),ae(qe,"click",n[56]),ae(e,"submit",Tn(n[57]))],Ll=!0)},p(w,j){var Yt,dt,ht,Gt,Xt,Qt;nl===(nl=Rl(w))&&Ve?Ve.p(w,j):(Ve.d(1),Ve=nl(w),Ve&&(Ve.c(),Ve.m(l,a))),(!x||j[0]&1052672&&h!==(h="rounded-2xl flex flex-shrink-0 items-center "+(w[12].meta.profile_image_url!=="/static/favicon.png"?"bg-transparent":"bg-white")+" shadow-xl group relative"))&&p(l,"class",h),(!x||j[0]&2097152&&V!==(V=w[21].t("Model Name")))&&p(D,"placeholder",V),j[0]&16&&D.value!==w[4]&&We(D,w[4]),(!x||j[0]&2097152&&I!==(I=w[21].t("Model ID")))&&p(M,"placeholder",I),(!x||j[0]&2048&&M.value!==w[11])&&(M.value=w[11]),(!x||j[0]&4)&&(M.disabled=w[2]),w[3]?le?le.p(w,j):(le=tn(w),le.c(),le.m(_,G)):le&&(le.d(1),le=null),(!x||j[0]&2097152)&&ge!==(ge=w[21].t("Description")+"")&&L(ve,ge),rl===(rl=Zl(w))&&Te?Te.p(w,j):(Te.d(1),Te=rl(w),Te&&(Te.c(),Te.m(be,null))),w[12].meta.description!==null?W?(W.p(w,j),j[0]&4096&&T(W,1)):(W=sn(w),W.c(),T(W,1),W.m(ee,null)):W&&(fe(),O(W,1,1,()=>{W=null}),ue());const nt={};j[0]&4096&&(nt.tags=((dt=(Yt=w[12])==null?void 0:Yt.meta)==null?void 0:dt.tags)??[]),ke.$set(nt);const rt={};!Ft&&j[0]&524288&&(Ft=!0,rt.accessControl=w[19],Ze(()=>Ft=!1)),Ie.$set(rt),(!x||j[0]&2097152)&&it!==(it=w[21].t("Model Params")+"")&&L(kt,it),(!x||j[0]&2097152)&&ct!==(ct=w[21].t("System Prompt")+"")&&L(wt,ct);const Re={};!Kt&&j[0]&4096&&(Kt=!0,Re.value=w[12].params.system,Ze(()=>Kt=!1)),ye.$set(Re),(!x||j[0]&2097152)&&X!==(X=w[21].t("Advanced Params")+"")&&L(te,X),al===(al=Yl(w))&&Ce?Ce.p(w,j):(Ce.d(1),Ce=al(w),Ce&&(Ce.c(),Ce.m(de,null))),w[8]?Y?(Y.p(w,j),j[0]&256&&T(Y,1)):(Y=nn(w),Y.c(),T(Y,1),Y.m(_e,null)):Y&&(fe(),O(Y,1,1,()=>{Y=null}),ue()),(!x||j[0]&2097152)&&Zt!==(Zt=w[21].t("Prompt suggestions")+"")&&L(el,Zt),ol===(ol=Gl(w))&&Se?Se.p(w,j):(Se.d(1),Se=ol(w),Se&&(Se.c(),Se.m(Pe,null))),(((Gt=(ht=w[12])==null?void 0:ht.meta)==null?void 0:Gt.suggestion_prompts)??null)!==null?se?se.p(w,j):(se=rn(w),se.c(),se.m(De,null)):se&&(se.d(1),se=null),(Qt=(Xt=w[12])==null?void 0:Xt.meta)!=null&&Qt.suggestion_prompts?ne?ne.p(w,j):(ne=an(w),ne.c(),ne.m(Ee,null)):ne&&(ne.d(1),ne=null);const P={};j[0]&4194304&&(P.collections=w[22]),!Vl&&j[0]&32768&&(Vl=!0,P.selectedKnowledge=w[15],Ze(()=>Vl=!1)),Fe.$set(P);const at={};j[0]&8388608&&(at.tools=w[23]),!Cl&&j[0]&65536&&(Cl=!0,at.selectedToolIds=w[16],Ze(()=>Cl=!1)),He.$set(at);const At={};j[0]&16777216&&(At.filters=w[24].filter(un)),!Al&&j[0]&131072&&(Al=!0,At.selectedFilterIds=w[17],Ze(()=>Al=!1)),Le.$set(At);const Nt={};j[0]&16777216&&(Nt.actions=w[24].filter(dn)),!$l&&j[0]&262144&&($l=!0,Nt.selectedActionIds=w[18],Ze(()=>$l=!1)),ze.$set(Nt);const Wt={};!jl&&j[0]&16384&&(jl=!0,Wt.capabilities=w[14],Ze(()=>jl=!1)),Ue.$set(Wt),(!x||j[0]&2097152)&&Jt!==(Jt=w[21].t("JSON Preview")+"")&&L(ll,Jt),il===(il=ls(w))&&Ae?Ae.p(w,j):(Ae.d(1),Ae=il(w),Ae&&(Ae.c(),Ae.m(qe,null))),w[9]?re?re.p(w,j):(re=cn(w),re.c(),re.m(Ke,null)):re&&(re.d(1),re=null),cl===(cl=ss(w))&&Ne?Ne.p(w,j):(Ne.d(1),Ne=cl(w),Ne&&(Ne.c(),Ne.m(ut,null))),w[5]?ce||(ce=fn(),ce.c(),ce.m(pe,null)):ce&&(ce.d(1),ce=null),(!x||j[0]&32&&sl!==(sl="text-sm px-3 py-2 transition rounded-lg "+(w[5]?" cursor-not-allowed bg-black hover:bg-gray-900 text-white dark:bg-white dark:hover:bg-gray-100 dark:text-black":"bg-black hover:bg-gray-900 text-white dark:bg-white dark:hover:bg-gray-100 dark:text-black")+" flex w-full justify-center"))&&p(pe,"class",sl),(!x||j[0]&32)&&(pe.disabled=w[5])},i(w){x||(T(W),T(ke.$$.fragment,w),T(Ie.$$.fragment,w),T(ye.$$.fragment,w),T(Y),T(Fe.$$.fragment,w),T(He.$$.fragment,w),T(Le.$$.fragment,w),T(ze.$$.fragment,w),T(Ue.$$.fragment,w),x=!0)},o(w){O(W),O(ke.$$.fragment,w),O(Ie.$$.fragment,w),O(ye.$$.fragment,w),O(Y),O(Fe.$$.fragment,w),O(He.$$.fragment,w),O(Le.$$.fragment,w),O(ze.$$.fragment,w),O(Ue.$$.fragment,w),x=!1},d(w){w&&d(e),Ve.d(),le&&le.d(),Te.d(),W&&W.d(),J(ke),J(Ie),J(ye),Ce.d(),Y&&Y.d(),Se.d(),se&&se.d(),ne&&ne.d(),J(Fe),J(He),J(Le),J(ze),J(Ue),Ae.d(),re&&re.d(),Ne.d(),ce&&ce.d(),Ll=!1,bl(ql)}}}function kr(n){let e,t;return{c(){e=g("img"),this.h()},l(s){e=v(s,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){zl(e.src,t="/static/favicon.png")||p(e,"src",t),p(e,"alt","model profile"),p(e,"class","rounded-lg size-72 md:size-60 object-cover shrink-0")},m(s,l){$(s,e,l)},p:jt,d(s){s&&d(e)}}}function wr(n){let e,t;return{c(){e=g("img"),this.h()},l(s){e=v(s,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){zl(e.src,t=n[12].meta.profile_image_url)||p(e,"src",t),p(e,"alt","model profile"),p(e,"class","rounded-lg size-72 md:size-60 object-cover shrink-0")},m(s,l){$(s,e,l)},p(s,l){l[0]&1052672&&!zl(e.src,t=s[12].meta.profile_image_url)&&p(e,"src",t)},d(s){s&&d(e)}}}function tn(n){let e,t,s=n[21].t("Base Model (From)")+"",l,a,r,i,o,u=n[21].t("Select a base model")+"",h,c,_,m=oe(n[20].filter(n[35])),b=[];for(let y=0;y<m.length;y+=1)b[y]=ln(Xs(n,m,y));return{c(){e=g("div"),t=g("div"),l=F(s),a=S(),r=g("div"),i=g("select"),o=g("option"),h=F(u);for(let y=0;y<b.length;y+=1)b[y].c();this.h()},l(y){e=v(y,"DIV",{class:!0});var D=k(e);t=v(D,"DIV",{class:!0});var V=k(t);l=H(V,s),V.forEach(d),a=A(D),r=v(D,"DIV",{});var B=k(r);i=v(B,"SELECT",{class:!0,placeholder:!0});var C=k(i);o=v(C,"OPTION",{class:!0});var N=k(o);h=H(N,u),N.forEach(d);for(let M=0;M<b.length;M+=1)b[M].l(C);C.forEach(d),B.forEach(d),D.forEach(d),this.h()},h(){p(t,"class","text-sm font-semibold mb-1"),o.__value=null,We(o,o.__value),p(o,"class","text-gray-900"),p(i,"class","text-sm w-full bg-transparent outline-none"),p(i,"placeholder","Select a base model (e.g. llama3, gpt-4o)"),i.required=!0,n[12].base_model_id===void 0&&Cn(()=>n[36].call(i)),p(e,"class","my-1")},m(y,D){$(y,e,D),f(e,t),f(t,l),f(e,a),f(e,r),f(r,i),f(i,o),f(o,h);for(let V=0;V<b.length;V+=1)b[V]&&b[V].m(i,null);As(i,n[12].base_model_id,!0),c||(_=[ae(i,"change",n[36]),ae(i,"change",n[37])],c=!0)},p(y,D){if(D[0]&2097152&&s!==(s=y[21].t("Base Model (From)")+"")&&L(l,s),D[0]&2097152&&u!==(u=y[21].t("Select a base model")+"")&&L(h,u),D[0]&1048577){m=oe(y[20].filter(y[35]));let V;for(V=0;V<m.length;V+=1){const B=Xs(y,m,V);b[V]?b[V].p(B,D):(b[V]=ln(B),b[V].c(),b[V].m(i,null))}for(;V<b.length;V+=1)b[V].d(1);b.length=m.length}D[0]&1052672&&As(i,y[12].base_model_id)},d(y){y&&d(e),ot(b,y),c=!1,bl(_)}}}function ln(n){let e,t=n[0].name+"",s,l;return{c(){e=g("option"),s=F(t),this.h()},l(a){e=v(a,"OPTION",{class:!0});var r=k(e);s=H(r,t),r.forEach(d),this.h()},h(){e.__value=l=n[0].id,We(e,e.__value),p(e,"class","text-gray-900")},m(a,r){$(a,e,r),f(e,s)},p(a,r){r[0]&1048577&&t!==(t=a[0].name+"")&&L(s,t),r[0]&1048577&&l!==(l=a[0].id)&&(e.__value=l,We(e,e.__value))},d(a){a&&d(e)}}}function Ir(n){let e,t=n[21].t("Custom")+"",s;return{c(){e=g("span"),s=F(t),this.h()},l(l){e=v(l,"SPAN",{class:!0});var a=k(e);s=H(a,t),a.forEach(d),this.h()},h(){p(e,"class","ml-2 self-center")},m(l,a){$(l,e,a),f(e,s)},p(l,a){a[0]&2097152&&t!==(t=l[21].t("Custom")+"")&&L(s,t)},d(l){l&&d(e)}}}function yr(n){let e,t=n[21].t("Default")+"",s;return{c(){e=g("span"),s=F(t),this.h()},l(l){e=v(l,"SPAN",{class:!0});var a=k(e);s=H(a,t),a.forEach(d),this.h()},h(){p(e,"class","ml-2 self-center")},m(l,a){$(l,e,a),f(e,s)},p(l,a){a[0]&2097152&&t!==(t=l[21].t("Default")+"")&&L(s,t)},d(l){l&&d(e)}}}function sn(n){let e,t,s;function l(r){n[39](r)}let a={className:" text-sm w-full bg-transparent outline-none resize-none overflow-y-hidden ",placeholder:n[21].t("Add a short description about what this model does"),rows:3};return n[12].meta.description!==void 0&&(a.value=n[12].meta.description),e=new hn({props:a}),je.push(()=>Je(e,"value",l)),{c(){q(e.$$.fragment)},l(r){R(e.$$.fragment,r)},m(r,i){Z(e,r,i),s=!0},p(r,i){const o={};i[0]&2097152&&(o.placeholder=r[21].t("Add a short description about what this model does")),!t&&i[0]&4096&&(t=!0,o.value=r[12].meta.description,Ze(()=>t=!1)),e.$set(o)},i(r){s||(T(e.$$.fragment,r),s=!0)},o(r){O(e.$$.fragment,r),s=!1},d(r){J(e,r)}}}function Er(n){let e,t=n[21].t("Show")+"",s;return{c(){e=g("span"),s=F(t),this.h()},l(l){e=v(l,"SPAN",{class:!0});var a=k(e);s=H(a,t),a.forEach(d),this.h()},h(){p(e,"class","ml-2 self-center")},m(l,a){$(l,e,a),f(e,s)},p(l,a){a[0]&2097152&&t!==(t=l[21].t("Show")+"")&&L(s,t)},d(l){l&&d(e)}}}function Dr(n){let e,t=n[21].t("Hide")+"",s;return{c(){e=g("span"),s=F(t),this.h()},l(l){e=v(l,"SPAN",{class:!0});var a=k(e);s=H(a,t),a.forEach(d),this.h()},h(){p(e,"class","ml-2 self-center")},m(l,a){$(l,e,a),f(e,s)},p(l,a){a[0]&2097152&&t!==(t=l[21].t("Hide")+"")&&L(s,t)},d(l){l&&d(e)}}}function nn(n){let e,t,s,l;function a(i){n[45](i)}let r={admin:!0};return n[13]!==void 0&&(r.params=n[13]),t=new Nn({props:r}),je.push(()=>Je(t,"params",a)),t.$on("change",n[46]),{c(){e=g("div"),q(t.$$.fragment),this.h()},l(i){e=v(i,"DIV",{class:!0});var o=k(e);R(t.$$.fragment,o),o.forEach(d),this.h()},h(){p(e,"class","my-2")},m(i,o){$(i,e,o),Z(t,e,null),l=!0},p(i,o){const u={};!s&&o[0]&8192&&(s=!0,u.params=i[13],Ze(()=>s=!1)),t.$set(u)},i(i){l||(T(t.$$.fragment,i),l=!0)},o(i){O(t.$$.fragment,i),l=!1},d(i){i&&d(e),J(t)}}}function Vr(n){let e,t=n[21].t("Custom")+"",s;return{c(){e=g("span"),s=F(t),this.h()},l(l){e=v(l,"SPAN",{class:!0});var a=k(e);s=H(a,t),a.forEach(d),this.h()},h(){p(e,"class","ml-2 self-center")},m(l,a){$(l,e,a),f(e,s)},p(l,a){a[0]&2097152&&t!==(t=l[21].t("Custom")+"")&&L(s,t)},d(l){l&&d(e)}}}function Tr(n){let e,t=n[21].t("Default")+"",s;return{c(){e=g("span"),s=F(t),this.h()},l(l){e=v(l,"SPAN",{class:!0});var a=k(e);s=H(a,t),a.forEach(d),this.h()},h(){p(e,"class","ml-2 self-center")},m(l,a){$(l,e,a),f(e,s)},p(l,a){a[0]&2097152&&t!==(t=l[21].t("Default")+"")&&L(s,t)},d(l){l&&d(e)}}}function rn(n){let e,t='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-4 h-4"><path d="M10.75 4.75a.75.75 0 00-1.5 0v4.5h-4.5a.75.75 0 000 1.5h4.5v4.5a.75.75 0 001.5 0v-4.5h4.5a.75.75 0 000-1.5h-4.5v-4.5z"></path></svg>',s,l;return{c(){e=g("button"),e.innerHTML=t,this.h()},l(a){e=v(a,"BUTTON",{class:!0,type:!0,"data-svelte-h":!0}),Oe(e)!=="svelte-twr6nu"&&(e.innerHTML=t),this.h()},h(){p(e,"class","p-1 px-2 text-xs flex rounded transition"),p(e,"type","button")},m(a,r){$(a,e,r),s||(l=ae(e,"click",n[48]),s=!0)},p:jt,d(a){a&&d(e),s=!1,l()}}}function an(n){let e;function t(a,r){return a[12].meta.suggestion_prompts.length>0?Sr:Cr}let s=t(n),l=s(n);return{c(){e=g("div"),l.c(),this.h()},l(a){e=v(a,"DIV",{class:!0});var r=k(e);l.l(r),r.forEach(d),this.h()},h(){p(e,"class","flex flex-col space-y-1 mt-1 mb-3")},m(a,r){$(a,e,r),l.m(e,null)},p(a,r){s===(s=t(a))&&l?l.p(a,r):(l.d(1),l=s(a),l&&(l.c(),l.m(e,null)))},d(a){a&&d(e),l.d()}}}function Cr(n){let e,t="No suggestion prompts";return{c(){e=g("div"),e.textContent=t,this.h()},l(s){e=v(s,"DIV",{class:!0,"data-svelte-h":!0}),Oe(e)!=="svelte-18dnedh"&&(e.textContent=t),this.h()},h(){p(e,"class","text-xs text-center")},m(s,l){$(s,e,l)},p:jt,d(s){s&&d(e)}}}function Sr(n){let e,t=oe(n[12].meta.suggestion_prompts),s=[];for(let l=0;l<t.length;l+=1)s[l]=on(Gs(n,t,l));return{c(){for(let l=0;l<s.length;l+=1)s[l].c();e=Mt()},l(l){for(let a=0;a<s.length;a+=1)s[a].l(l);e=Mt()},m(l,a){for(let r=0;r<s.length;r+=1)s[r]&&s[r].m(l,a);$(l,e,a)},p(l,a){if(a[0]&2101248){t=oe(l[12].meta.suggestion_prompts);let r;for(r=0;r<t.length;r+=1){const i=Gs(l,t,r);s[r]?s[r].p(i,a):(s[r]=on(i),s[r].c(),s[r].m(e.parentNode,e))}for(;r<s.length;r+=1)s[r].d(1);s.length=t.length}},d(l){l&&d(e),ot(s,l)}}}function on(n){let e,t,s,l,a,r='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-4 h-4"><path d="M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z"></path></svg>',i,o,u;function h(){n[49].call(t,n[60],n[61])}function c(){return n[50](n[61])}return{c(){e=g("div"),t=g("input"),l=S(),a=g("button"),a.innerHTML=r,i=S(),this.h()},l(_){e=v(_,"DIV",{class:!0});var m=k(e);t=v(m,"INPUT",{class:!0,placeholder:!0}),l=A(m),a=v(m,"BUTTON",{class:!0,type:!0,"data-svelte-h":!0}),Oe(a)!=="svelte-1jlemba"&&(a.innerHTML=r),i=A(m),m.forEach(d),this.h()},h(){p(t,"class","text-sm w-full bg-transparent outline-none border-r border-gray-50 dark:border-gray-850"),p(t,"placeholder",s=n[21].t("Write a prompt suggestion (e.g. Who are you?)")),p(a,"class","px-2"),p(a,"type","button"),p(e,"class","flex rounded-lg")},m(_,m){$(_,e,m),f(e,t),We(t,n[59].content),f(e,l),f(e,a),f(e,i),o||(u=[ae(t,"input",h),ae(a,"click",c)],o=!0)},p(_,m){n=_,m[0]&2097152&&s!==(s=n[21].t("Write a prompt suggestion (e.g. Who are you?)"))&&p(t,"placeholder",s),m[0]&1052672&&t.value!==n[59].content&&We(t,n[59].content)},d(_){_&&d(e),o=!1,bl(u)}}}function Ar(n){let e,t=n[21].t("Show")+"",s;return{c(){e=g("span"),s=F(t),this.h()},l(l){e=v(l,"SPAN",{class:!0});var a=k(e);s=H(a,t),a.forEach(d),this.h()},h(){p(e,"class","ml-2 self-center")},m(l,a){$(l,e,a),f(e,s)},p(l,a){a[0]&2097152&&t!==(t=l[21].t("Show")+"")&&L(s,t)},d(l){l&&d(e)}}}function Nr(n){let e,t=n[21].t("Hide")+"",s;return{c(){e=g("span"),s=F(t),this.h()},l(l){e=v(l,"SPAN",{class:!0});var a=k(e);s=H(a,t),a.forEach(d),this.h()},h(){p(e,"class","ml-2 self-center")},m(l,a){$(l,e,a),f(e,s)},p(l,a){a[0]&2097152&&t!==(t=l[21].t("Hide")+"")&&L(s,t)},d(l){l&&d(e)}}}function cn(n){let e,t,s;return{c(){e=g("div"),t=g("textarea"),this.h()},l(l){e=v(l,"DIV",{});var a=k(e);t=v(a,"TEXTAREA",{class:!0,rows:!0}),k(t).forEach(d),a.forEach(d),this.h()},h(){p(t,"class","text-sm w-full bg-transparent outline-none resize-none"),p(t,"rows","10"),t.value=s=JSON.stringify(n[12],null,2),t.disabled=!0,t.readOnly=!0},m(l,a){$(l,e,a),f(e,t)},p(l,a){a[0]&1052672&&s!==(s=JSON.stringify(l[12],null,2))&&(t.value=s)},d(l){l&&d(e)}}}function $r(n){let e=n[21].t("Save & Create")+"",t;return{c(){t=F(e)},l(s){t=H(s,e)},m(s,l){$(s,t,l)},p(s,l){l[0]&2097152&&e!==(e=s[21].t("Save & Create")+"")&&L(t,e)},d(s){s&&d(t)}}}function Mr(n){let e=n[21].t("Save & Update")+"",t;return{c(){t=F(e)},l(s){t=H(s,e)},m(s,l){$(s,t,l)},p(s,l){l[0]&2097152&&e!==(e=s[21].t("Save & Update")+"")&&L(t,e)},d(s){s&&d(t)}}}function fn(n){let e,t=`<svg class="w-4 h-4" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><style>.spinner_ajPY {
												transform-origin: center;
												animation: spinner_AtaB 0.75s infinite linear;
											}
											@keyframes spinner_AtaB {
												100% {
													transform: rotate(360deg);
												}
											}
										</style><path d="M12,1A11,11,0,1,0,23,12,11,11,0,0,0,12,1Zm0,19a8,8,0,1,1,8-8A8,8,0,0,1,12,20Z" opacity=".25"></path><path d="M10.14,1.16a11,11,0,0,0-9,8.92A1.59,1.59,0,0,0,2.46,12,1.52,1.52,0,0,0,4.11,10.7a8,8,0,0,1,6.66-6.61A1.42,1.42,0,0,0,12,2.69h0A1.57,1.57,0,0,0,10.14,1.16Z" class="spinner_ajPY"></path></svg>`;return{c(){e=g("div"),e.innerHTML=t,this.h()},l(s){e=v(s,"DIV",{class:!0,"data-svelte-h":!0}),Oe(e)!=="svelte-1bpzrva"&&(e.innerHTML=t),this.h()},h(){p(e,"class","ml-1.5 self-center")},m(s,l){$(s,e,l)},d(s){s&&d(e)}}}function jr(n){let e,t,s=n[10]&&Qs(n);return{c(){s&&s.c(),e=Mt()},l(l){s&&s.l(l),e=Mt()},m(l,a){s&&s.m(l,a),$(l,e,a),t=!0},p(l,a){l[10]?s?(s.p(l,a),a[0]&1024&&T(s,1)):(s=Qs(l),s.c(),T(s,1),s.m(e.parentNode,e)):s&&(fe(),O(s,1,1,()=>{s=null}),ue())},i(l){t||(T(s),t=!0)},o(l){O(s),t=!1},d(l){l&&d(e),s&&s.d(l)}}}const un=n=>n.type==="filter",dn=n=>n.type==="action";function Or(n,e,t){let s,l,a,r,i;we(n,An,E=>t(20,s=E)),we(n,Ul,E=>t(22,a=E)),we(n,Ns,E=>t(23,r=E)),we(n,$s,E=>t(24,i=E));const o=mt("i18n");we(n,o,E=>t(21,l=E));let{onSubmit:u}=e,{onBack:h=null}=e,{model:c=null}=e,{edit:_=!1}=e,{preset:m=!0}=e,b=!1,y,D,V=!1,B=!1,C=!1,N="",M="",I={id:"",base_model_id:null,name:"",meta:{profile_image_url:"/static/favicon.png",description:"",suggestion_prompts:null,tags:[]},params:{system:""}},z={},G={vision:!0,usage:void 0,citations:!0},ee=[],ie=[],he=[],ge=[],ve={};const vt=E=>{var X,te;const U=s.find(me=>me.id===E);U&&(U.owned_by==="openai"?t(14,G.usage=((te=(X=U==null?void 0:U.meta)==null?void 0:X.capabilities)==null?void 0:te.usage)??!1,G):delete G.usage,t(14,G))},be=async()=>{t(5,b=!0),t(12,I.id=N,I),t(12,I.name=M,I),t(12,I.access_control=ve,I),t(12,I.meta.capabilities=G,I),ee.length>0?t(12,I.meta.knowledge=ee,I):I.meta.knowledge&&delete I.meta.knowledge,ie.length>0?t(12,I.meta.toolIds=ie,I):I.meta.toolIds&&delete I.meta.toolIds,he.length>0?t(12,I.meta.filterIds=he,I):I.meta.filterIds&&delete I.meta.filterIds,ge.length>0?t(12,I.meta.actionIds=ge,I):I.meta.actionIds&&delete I.meta.actionIds,t(12,I.params.stop=z.stop?z.stop.split(",").filter(E=>E.trim()):null,I),Object.keys(I.params).forEach(E=>{(I.params[E]===""||I.params[E]===null)&&delete I.params[E]}),await u(I),t(5,b=!1)};xt(async()=>{var U,X,te,me,de;await Ns.set(await Hn(localStorage.token)),await $s.set(await Ln(localStorage.token)),await Ul.set(await zn(localStorage.token));const E=document.getElementById("workspace-container");if(E&&(E.scrollTop=0),c){if(console.log(c),t(4,M=c.name),await Vn(),t(11,N=c.id),c.base_model_id){const K=s.filter(Q=>!(Q!=null&&Q.preset)&&!((Q==null?void 0:Q.arena)??!1)).find(Q=>[c.base_model_id,`${c.base_model_id}:latest`].includes(Q.id));console.log("base_model",K),K?t(0,c.base_model_id=K.id,c):t(0,c.base_model_id=null,c)}t(13,z={...z,...c==null?void 0:c.params}),t(13,z.stop=z!=null&&z.stop?(typeof z.stop=="string"?z.stop.split(","):(z==null?void 0:z.stop)??[]).join(","):null,z),t(16,ie=((U=c==null?void 0:c.meta)==null?void 0:U.toolIds)??[]),t(17,he=((X=c==null?void 0:c.meta)==null?void 0:X.filterIds)??[]),t(18,ge=((te=c==null?void 0:c.meta)==null?void 0:te.actionIds)??[]),t(15,ee=(((me=c==null?void 0:c.meta)==null?void 0:me.knowledge)??[]).map(K=>K!=null&&K.collection_name?{id:K.collection_name,name:K.name,legacy:!0}:K!=null&&K.collection_names?{name:K.name,type:"collection",collection_names:K.collection_names,legacy:!0}:K)),t(14,G={...G,...((de=c==null?void 0:c.meta)==null?void 0:de.capabilities)??{}}),"access_control"in c?t(19,ve=c.access_control):t(19,ve={}),console.log(c==null?void 0:c.access_control),console.log(ve),t(12,I={...I,...JSON.parse(JSON.stringify(c||{id:c.id,name:c.name}))}),console.log(c)}t(10,C=!0)});const Ot=()=>{h()};function Bt(E){je[E?"unshift":"push"](()=>{y=E,t(6,y)})}function Ye(){D=this.files,t(7,D)}const Ge=()=>{let E=new FileReader;E.onload=U=>{let X=`${U.target.result}`;const te=new Image;te.src=X,te.onload=function(){const me=document.createElement("canvas"),de=me.getContext("2d"),K=te.width/te.height;let Q,Be;K>1?(Q=250*K,Be=250):(Q=250,Be=250/K),me.width=250,me.height=250;const Rt=(250-Q)/2,Ee=(250-Be)/2;de.drawImage(te,Rt,Ee,Q,Be);const De=me.toDataURL();t(12,I.meta.profile_image_url=De,I),t(7,D=null)}},D&&D.length>0&&["image/gif","image/webp","image/jpeg","image/png","image/svg+xml"].includes(D[0].type)?E.readAsDataURL(D[0]):(console.log(`Unsupported File Type '${D[0].type}'.`),t(7,D=null))},ke=()=>{y.click()};function Pt(){M=this.value,t(4,M)}const Xe=E=>(c?E.id!==c.id:!0)&&!(E!=null&&E.preset)&&(E==null?void 0:E.owned_by)!=="arena";function Qe(){I.base_model_id=Sn(this),t(12,I)}const Ie=E=>{vt(E.target.value)},Ft=()=>{I.meta.description===null?t(12,I.meta.description="",I):t(12,I.meta.description=null,I)};function Ht(E){n.$$.not_equal(I.meta.description,E)&&(I.meta.description=E,t(12,I))}const bt=E=>{const U=E.detail;t(12,I.meta.tags=I.meta.tags.filter(X=>X.name!==U),I)},Lt=E=>{var X;const U=E.detail;((X=I==null?void 0:I.meta)==null?void 0:X.tags)??null?t(12,I.meta.tags=[...I.meta.tags,{name:U}],I):t(12,I.meta.tags=[{name:U}],I)};function $e(E){ve=E,t(19,ve)}function xe(E){n.$$.not_equal(I.params.system,E)&&(I.params.system=E,t(12,I))}const et=()=>{t(8,V=!V)};function it(E){z=E,t(13,z)}const kt=E=>{t(12,I.params={...I.params,...z},I)},zt=()=>{var E;(((E=I==null?void 0:I.meta)==null?void 0:E.suggestion_prompts)??null)===null?t(12,I.meta.suggestion_prompts=[{content:""}],I):t(12,I.meta.suggestion_prompts=null,I)},_e=()=>{(I.meta.suggestion_prompts.length===0||I.meta.suggestion_prompts.at(-1).content!=="")&&t(12,I.meta.suggestion_prompts=[...I.meta.suggestion_prompts,{content:""}],I)};function Me(E,U){E[U].content=this.value,t(12,I)}const tt=E=>{I.meta.suggestion_prompts.splice(E,1),t(12,I)};function ct(E){ee=E,t(15,ee)}function wt(E){ie=E,t(16,ie)}function Ut(E){he=E,t(17,he)}function ft(E){ge=E,t(18,ge)}function ye(E){G=E,t(14,G)}const Kt=()=>{t(9,B=!B)},qt=()=>{be()};return n.$$set=E=>{"onSubmit"in E&&t(28,u=E.onSubmit),"onBack"in E&&t(1,h=E.onBack),"model"in E&&t(0,c=E.model),"edit"in E&&t(2,_=E.edit),"preset"in E&&t(3,m=E.preset)},n.$$.update=()=>{n.$$.dirty[0]&20&&(_||M&&t(11,N=M.replace(/\s+/g,"-").replace(/[^a-zA-Z0-9-]/g,"").toLowerCase()))},[c,h,_,m,M,b,y,D,V,B,C,N,I,z,G,ee,ie,he,ge,ve,s,l,a,r,i,o,vt,be,u,Ot,Bt,Ye,Ge,ke,Pt,Xe,Qe,Ie,Ft,Ht,bt,Lt,$e,xe,et,it,kt,zt,_e,Me,tt,ct,wt,Ut,ft,ye,Kt,qt]}class la extends pt{constructor(e){super(),gt(this,e,Or,jr,_t,{onSubmit:28,onBack:1,model:0,edit:2,preset:3},null,[-1,-1,-1])}}export{la as M};
//# sourceMappingURL=ModelEditor.BfGJlUeR.js.map
